{"version":3,"sources":["main.js","config/config-overrides-generated.js","services/authentication.service.js","services/aws.service.js","services/bdapi.service.js","services/config.service.js","services/data.service.js","services/jean.service.js","services/popups.service.js","services/preloader.factory.js","pages/admin/admin.controller.js","pages/closet/closet.controller.js","pages/home/home.controller.js","pages/customizer/customizer.controller.js","directives/choosers/chooser.controller.js","directives/choosers/chooser.directive.js","directives/choosers/fabric-chooser.directive.js","directives/choosers/gender-chooser.directive.js","directives/choosers/style-chooser.directive.js","directives/image-stack/image-stack.controller.js","directives/image-stack/image-stack.directive.js","directives/jean-list-delete/jean-list.directive.js","directives/navigation/navigation.controller.js","directives/navigation/navigation.directive.js","directives/slider/slider.controller.js","directives/slider/slider.directive.js","pages/auth/register/register.controller.js","pages/auth/login/login.controller.js"],"names":["config","$routeProvider","$locationProvider","when","templateUrl","controller","controllerAs","otherwise","redirectTo","html5Mode","run","$rootScope","$location","aws","$on","event","nextRoute","currentRoute","locked","indexOf","path","getCurrentUserFromLocalStorage","then","result","err","angular","module","filter","input","replace","min","max","key","retObj","display","configOverridesGenerated","REGION","PROFILE_IMAGES_S3_BUCKET","API_ENDPOINT","USER_POOL_ID","CLIENT_ID","IDENTITY_POOL_ID","authentication","$http","$window","$q","saveToken","token","localStorage","getToken","isLoggedIn","payload","split","atob","JSON","parse","exp","Date","now","currentUser","console","log","email","name","isAdmin","roles","permissions","register","userDetails","login","user","authenticateCognitoUser","password","logout","removeItem","service","$inject","AWSConfig","_getUserPool","poolData","UserPoolId","ClientId","userPool","AWSCognito","CognitoIdentityServiceProvider","CognitoUserPool","_getAuthenticationDetails","uname","pword","authenticationData","Username","Password","authenticationDetails","AuthenticationDetails","_getCognitoUser","upool","userData","Pool","cognitoUser","CognitoUser","_buildAttribute","keyName","value","attribute","Name","Value","CognitoUserAttribute","_buildAttributeList","attributeBuilder","obj","attrToAdd","attrList","push","_getAWSCredentials","idToken","logins","authenticator","AWS","update","region","credentials","CognitoIdentityCredentials","IdentityPoolId","Logins","getPromise","getUserFromLocalStorage","username","getSession","session","alert","isValid","deleteCognitoUser","getCurrentUser","deleteUser","authenticateViaFB","defer","FB","response","authResponse","graph.facebook.com","accessToken","resolve","reject","promise","authenticateUser","onSuccess","getAccessToken","getJwtToken","jwtToken","onFailure","newPasswordRequired","userAttributes","requiredAttributes","signupForApplication","emailAddress","attributeList","signUp","updateAttributesOnUser","updateAttributes","deleteUserAttributes","deleteAttributes","verifyUserAttribute","attributeName","getAttributeVerificationCode","inputVerificationCode","verificationCode","prompt","verifyAttribute","this","retrieveUserAttributes","getUserAttributes","i","length","getName","getValue","resendConfirmationCode","confirmRegistration","confirmationCode","changePassword","oldPassword","newPassword","forgotPasswordFlow","forgotPassword","confirmPassword","signUserOut","signOut","signCurrentUserOut","signUserOutGlobally","globalSignOut","confirmRegisteredUnauthenticatedUser","userName","saveImageTos3","image","userTokens","bucketName","s3bucket","S3","params","Bucket","Key","identityId","Body","upload","data","bdAPI","$httpParamSerializer","_thirdParty","BlueDeltaApi","API","Client","DefaultApi","injector","get","jsonData","getJeansByUser","userId","getProfile","getStyles","getThreads","getHardware","getFabrics","getGenders","getJeanById","id","callback","j","ret","meanData","getOptions","headers","Authorization","jean","set","property","createNew","constructor","Object","title","gender","style","fabric","accent_thread","top_thread","bottom_thread","Math","floor","random","popups","denim","hiw","infoPop","jeanProfile","preloaderFunc","Preloader","imageLocations","imageCount","loadCount","errorCount","states","PENDING","LOADING","RESOLVED","REJECTED","state","deferred","preloadImages","preloader","load","prototype","isInitiated","isRejected","isResolved","loadImageLocation","handleImageError","imageLocation","handleImageLoad","notify","percent","ceil","element","Image","bind","$apply","target","src","attr","factory","adminCtrl","vm","success","error","e","closetCtrl","$filter","$scope","jeans","defaultHeaders_","setUpClosetData","idTokenPayload","userID","sub","usersGet","setupData","func","dataKey","x","dataLookup","jeanKey","includes","dataSet","selected","copyJean","selectJean","homeCtrl","$animate","customizerCtrl","$timeout","$routeParams","landscapeDetect","ua","navigator","userAgent","toLowerCase","isAndroid","window","orientation","parseURLkey","jeanKeytoURL","loadImage","cntxt","onload","drawImage","onerror","landscape","supportsOrientationChange","orientationEvent","addEventListener","jean_id","action","jeanData","d","parts","match","parseInt","keys","jeanToUrl","url","document","location","origin","hasOwnProperty","urlKey","panel","panelTemplate","panelDir","panelStep","changeStep","step","undefined","updateActiveItem","activeItem","styleByGender","dataInfo","dataById","getData","res","all","$watch","current","original","saveJean","createThumb","imageURL","canvas","createElement","width","height","getContext","promises","imagesElements","getElementsByClassName","results","dataUrl","toDataURL","chooserCtrl","$element","scrollToLeft","el","scrollTo","scrollDuration","offsetWidth","maxLeft","scrollWidth","stepNum","distance","scrollLeft","scrollStep","scrollTest","a","b","scrollInterval","setInterval","newScroll","clearInterval","chvm","breakPoint","selectorCoords","top","left","newValue","oldValue","activeElement","querySelector","prop","selector","css","innerWidth","chooser","selectAttr","$event","text","querySelectorAll","right","opacity","jeanSet","val","restrict","scope","dataset","active","directive","template","link","changeTemplate","screenWidth","viewUrl","onresize","weightFilter","weight","genderChooser","styleChooser","checkGenderFilter","istackCtrl","isvm","centerPan","zoom","pan","y","isMobile","toggleZoom","touchEnd","dragTracker","returnPan","images","setTimeout","transform-origin","touchStart","swipeStart","touches","clientX","clientY","swipe","zoomDrag","touchMove","preventDefault","touch","drag","clientWidth","clientHeight","bounds","bottom","move","dragPan","u","direction","frame","innerHeight","deltaX","deltaY","abs","isFinal","scanImage","fWidth","fHeight","rect","getBoundingClientRect","rootDoc","ownerDocument","documentElement","offsetT","pageYOffset","clientTop","offsetL","pageXOffset","clientLeft","xPosition","yPosition","trackMouse","pageX","pageY","imageStack","ele","attrs","ctrl","on","navigationCtrl","$route","drops","acct","mobileMenu","reload","navigation","sliderCtrl","imagesLoaded","slides","currentIndex","setCurrentSlideIndex","index","isCurrentSlideIndex","nextSlide","prevSlide","slider","imageClick","registerCtrl","$sce","formStep","messages","message","type","reset","setMessage","resetMessage","registerUser","confirmUser","code","trustAsHtml","resendCode","loginCtrl","loginFB","onSubmit","errors"],"mappings":"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","file":"app.min.js","sourcesContent":["(function () {\n\n  angular.module('bdApp', ['ngRoute', 'ngAnimate','ngSanitize', 'angular-gestures']); \n  \n  \n  function config ($routeProvider, $locationProvider) {\n    $routeProvider\n      .when('/', {\n        templateUrl: '/pages/home/home.view.html',\n        controller: 'homeCtrl',\n        controllerAs: 'vm'\n      })\n      .when('/register', {\n        templateUrl: '/pages/auth/register/register.view.html',\n        controller: 'registerCtrl',\n        controllerAs: 'vm'\n      })\n      .when('/login', {\n        templateUrl: '/pages/auth/login/login.view.html',\n        controller: 'loginCtrl',\n        controllerAs: 'vm'\n      })\n      .when('/closet', {\n        templateUrl: '/pages/closet/closet.view.html',\n        controller: 'closetCtrl',\n        controllerAs: 'vm'\n      })\n      .when('/customizer/:jean_id?/:action?', {\n        templateUrl: '/pages/customizer/customizer.view.html',\n        controller: 'customizerCtrl',\n        controllerAs: 'vm'\n      })\n      .when('/admin', {\n        templateUrl: '/pages/admin/admin.view.html',\n        controller: 'adminCtrl',\n        controllerAs: 'vm'\n      })\n      .otherwise({redirectTo: '/'});\n\n    // use the HTML5 History API\n    $locationProvider.html5Mode(true);\n    \n   }\n\n  function run($rootScope, $location, aws) {\n    $rootScope.$on('$routeChangeStart', function(event, nextRoute, currentRoute) {\n\t    var locked = [\n\t\t    '/closet'\n\t    ];\n\t    if (locked.indexOf($location.path()) >= 0 ){\n\t\t    aws.getCurrentUserFromLocalStorage().then(\n\t\t\t    function(result){\n\t\t\t\t    return true;\n\t\t\t\t  },\n\t\t\t\t  function(err){\n\t\t\t\t\t  $location.path('/login');\n\t\t\t\t\t}\n\t\t    );\n\t  \t}\n    });\n  }\n  \n  angular\n    .module('bdApp')\n    .config(['$routeProvider', '$locationProvider', config])\n    .run(['$rootScope', '$location', 'aws', run])\n\t\t.filter('spaceless',function() {\n\t    return function(input) {\n\t      if (input) {\n\t      \treturn input.replace(/\\s+/g, '-');    \n\t      }\n\t    }\n\t\t})\n\t\t.filter('scoreToSpace',function() {\n\t    return function(input) {\n\t      if (input) {\n\t      \treturn input.replace(/_+/g, ' ');    \n\t      }\n\t    }\n\t\t})\n\t\t.filter('minMax',function(min, max, key) {\n\t\t\treturn function(input){\n\t\t\t\tif (min && input[key] < min) return false;\n\t\t\t\tif (max && input[key] > max) return false;\n\t\t    return true;\n\t\t  }  \n\t\t})\n\t\t.filter('displayName',function() {\n\t\t\treturn function(input){\t\t\t\t\n\t\t\t\treturn input ? input.replace(/Raw Denim/g, \"\") : false;\n\t\t  }  \n\t\t})\n\t\t\n\t\t.filter('listData',function() {\n\t\t\treturn function(input){\n\t\t\t\tvar retObj = {}; \n\t\t\t\tvar display = [\n\t\t\t\t\t'fabric',\n\t\t\t\t\t'accent_thread',\n\t\t\t\t\t'top_thread',\n\t\t\t\t\t'bottom_thread',\n\t\t\t\t\t'gender',\n\t\t\t\t\t'style'\n\t\t\t\t];\n\t\t\t\n\t\t\t\tfor (key in input){\n\t\t\t\t\tif (display.indexOf(key)>=0)\n\t\t\t\t\t\tretObj[key] = input[key];\t\t\t\n\t\t\t\t}\n\t\t\t\treturn retObj;\n\t\t  }  \n\t\t})\n\t\t\n\t\t\n\t\t\n\t\t\n\t\t\n})();","// Autogenerated file, do not modify directly\n\n(function() {\n\nconst configOverridesGenerated = {\n  \"REGION\": \"us-east-1\",\n  \"PROFILE_IMAGES_S3_BUCKET\": \"blue-delta-api-development-stack-userdatabucket-12z57hiicf3xy\",\n  \"API_ENDPOINT\": \"https://kd6f1omjzc.execute-api.us-east-1.amazonaws.com/development\",\n  \"USER_POOL_ID\": \"us-east-1_UvVeNoe5z\",\n  \"CLIENT_ID\": \"6hdrpk1j20qmjhfdiga31uia80\",\n  \"IDENTITY_POOL_ID\": \"us-east-1:60250bd7-bc76-4ab7-8813-2369461cb881\"\n};\n\nreturn configOverridesGenerated;\n})();","(function () {\n\n  angular\n    .module('bdApp')\n    .service('authentication', authentication);\n\n  authentication.$inject = ['$http', '$window', 'aws', '$q'];\n  function authentication ($http, $window, aws, $q) {\n\n    var saveToken = function (token) {\n      $window.localStorage['mean-token'] = token;\n    };\n\n    var getToken = function () {\n      return $window.localStorage['mean-token'];\n    };\n\n    var isLoggedIn = function() {\n      var token = getToken();\n      var payload;\n\n      if(token){\n        payload = token.split('.')[1];\n        payload = $window.atob(payload);\n        payload = JSON.parse(payload);\n\n        return payload.exp > Date.now() / 1000;\n      } else {\n        return false;\n      }\n    };\n\n    var currentUser = function() {\n      if(isLoggedIn()){\n        var token = getToken();\n        console.log(token);\n        var payload = token.split('.')[1];\n        payload = $window.atob(payload);\n        payload = JSON.parse(payload);\n        return {\n          email : payload.email,\n          name : payload.name\n        };\n      }\n    };\n\n\t\t\n\t\tvar isAdmin = function(){\n\t\t\tif(isLoggedIn()){\n        var token = getToken();\n\n        var payload = token.split('.')[1];\n        payload = $window.atob(payload);\n        payload = JSON.parse(payload);\n        console.log(payload);\n        var roles = payload.permissions;\n\t\t\t\treturn roles.indexOf('admin') !== -1;\n      }\n\t\t}\n\n    \n\n    \n\n\n//\t\tconsole.log(aws.authenticateCognitoUser('cplefevre', 'ConfitConfit@123'));\n\n\t\tvar register = function(userDetails){\n\t\t\t//console.log(userDetails);\n\t\t//\tconsole.log(aws.signupForApplication('hello@confitdesign.com', 'ConfitConfit@123'));\t\n\t\t}\n    \n\n\t\t\n    \n\n    login = function(user) {\n\t    \n\t    aws.authenticateCognitoUser(user, password);\n\t\t};\n\n    logout = function() {\n      $window.localStorage.removeItem('mean-token');\n    };\n\n    return {\n      //userAttrList: userAttrList,\n      //createUserAttributeList: createUserAttributeList,\n      //userPool: userPool,\n\t    isAdmin : isAdmin,\n      currentUser : currentUser,\n      saveToken : saveToken,\n      getToken : getToken,\n      isLoggedIn : isLoggedIn,\n      register : register,\n      login : login,\n      logout : logout\n    };\n  }\n\n\n})();","(function () {\n\n  angular\n    .module('bdApp')\n    .service('aws', aws);\n\n  aws.$inject = ['$http', '$window', '$q', 'AWSConfig'];\n  function aws ($http, $window, $q, AWSConfig) {\n\t\t\t\n    function _getUserPool() {\n      var poolData = { UserPoolId : AWSConfig.USER_POOL_ID, ClientId : AWSConfig.CLIENT_ID };\n      var userPool = new AWSCognito.CognitoIdentityServiceProvider.CognitoUserPool(poolData);\n      return userPool;\n    }\n\n    function _getAuthenticationDetails(uname, pword) {\n      var authenticationData = {\n        Username : uname,\n        Password : pword,\n      };\n      var authenticationDetails = new AWSCognito.CognitoIdentityServiceProvider.AuthenticationDetails(authenticationData);\n      return authenticationDetails;\n    }\n      \n    function _getCognitoUser(uname, upool) {\n      var userData = { Username : uname, Pool : upool };\n      var cognitoUser = new AWSCognito.CognitoIdentityServiceProvider.CognitoUser(userData);\n      return cognitoUser;\n    }\n\n    function _buildAttribute(keyName, value) {\n      var attribute = {\n        Name: keyName,\n        Value: value\n      }\n      var result = new AWSCognito.CognitoIdentityServiceProvider.CognitoUserAttribute(attribute);\n      return result;\n    }\n\n    function _buildAttributeList(attributeBuilder, obj) {\n      var attrList = [];\n      var attrToAdd;\n      for (var key in obj) {\n        attrToAdd = attributeBuilder(key, obj[key]);\n        attrList.push(attrToAdd);\n      }\n      return attrList;\n    }\n      \n    function _parseIdentityId(jwt){\n\t    var idTokenPayload = jwt.split('.')[1];\n\t\t\treturn JSON.parse(atob(idTokenPayload)).sub;\t\t\t\t\n    }\n    \n\t\tfunction _getAWSCredentials(idToken){\n\t\t\tconsole.log(idToken);\n\t\t\tlogins = {}\n\t\t\tvar authenticator = 'cognito-idp.'+AWSConfig.REGION+'.amazonaws.com/'+AWSConfig.USER_POOL_ID;\n\t\t\tlogins[authenticator] = idToken\n\n\t\t\tAWS.config.update({ region: AWSConfig.REGION });\n\n            AWS.config.credentials = new AWS.CognitoIdentityCredentials({\n                IdentityPoolId: AWSConfig.IDENTITY_POOL_ID,\n                Logins : logins\n\t\t\t});\n\n\t\t\treturn AWS.config.credentials.getPromise();\n\n\t    // if (AWS.config.credentials.needsRefresh()){\n\t    //   AWS.config.credentials.clearCachedId();\n\t    //   AWS.config.credentials.get(function(err){\n\t    //     if (err) {\n\t    //       defer.reject(err);\n\t    //     }\n\t    //     defer.resolve();\n\t    //   });\n\t    // } else {\n\t    //   AWS.config.credentials.get(function(err){\n\t    //     if (err) {\n\t    //       defer.reject(err);\n\t    //     }\n\t    //     defer.resolve();\n\t    //   });\n\t    // }\n\t\t\t//\n\t\t\t// return defer.promise;\n\t\t\t\n\t\t}\n\t\t\t\n    getUserFromLocalStorage = function(username) {\n      var cognitoUser = _getCognitoUser(username, _getUserPool());\n      if (cognitoUser != null) {\n          cognitoUser.getSession(function(err, session) {\n              if (err) {\n                  alert(err);\n                  return;\n              }\n              console.log('session validity: ' + session.isValid());\n          });\n      }\n    }\n\n    deleteCognitoUser = function() {\n      var cognitoUser = _getUserPool().getCurrentUser();\n      cognitoUser.deleteUser(function(err, result) {\n        if (err) {\n            alert(err);\n            return;\n        }\n        console.log('call result: ' + result);\n      });\n    }\n\t\t\n\n\t\tauthenticateViaFB = function(){\n\t\t\t\n\t\t\tvar defer = $q.defer();\n\t\t\t\n\t\t\tFB.login(function (response) {\n\t\t\t  if (response.authResponse) { // logged in\n\t\t\t    AWS.config.credentials = new AWS.CognitoIdentityCredentials({\n\t\t\t      IdentityPoolId: AWSConfig.IDENTITY_POOL_ID,\n\t\t\t      Logins: {\n\t\t\t        'graph.facebook.com': response.authResponse.accessToken\n\t\t\t      }\n\t\t\t    });\n\t\t\t\n\t\t\t    defer.resolve();\n\t\t\t  } else {\n\t\t\t    defer.reject('There was a problem logging in with Facebook.');\n\t\t\t  }\n\t\t\t});\n\t\t\t\n\t\t\treturn defer.promise;\t\t\n\t\t}\n\t\t\n    authenticateCognitoUser = function(username, password) {\n      var authenticationDetails = _getAuthenticationDetails(username, password);\n      var cognitoUser = _getCognitoUser(username, _getUserPool());\n      \n      var defer = $q.defer();\n      \n      \n      cognitoUser.authenticateUser(authenticationDetails, {\n        onSuccess: function (result) {\n\t\t\t\t\tdefer.resolve(result);\n\t\t\t\t\tconsole.log('access token + ' + result.getAccessToken().getJwtToken());\n\t\t\t\t\t//Use the idToken for Logins Map when Federating User Pools with Cognito Identity or when passing through an Authorization Header to an API Gateway Authorizer\n\t\t\t\t\tconsole.log('idToken + ' + result.idToken.jwtToken);\n        },\n        onFailure: function(err) {\n          defer.reject(err);\n        }, \n        newPasswordRequired: function(userAttributes, requiredAttributes) {\n          // User was signed up by an admin and must provide new\n          // password and required attributes, if any, to complete\n          // authentication.\n\t\t\t\t\tconsole.log(userAttributes, requiredAttributes);\n\n          // the api doesn't accept this field back\n          //delete userAttributes.email_verified;\n\n          // Get these details and call\n\t        // cognitoUser.completeNewPasswordChallenge(\"ConfitConfit@123\", userAttributes, this);\n\t      }\n      });\n      \n      return defer.promise;\n    }\n\t\t\n\n    signupForApplication = function(emailAddress, password) {\n\t    \n\t    var defer = $q.defer();\n\t    \n      var attributeList = _buildAttributeList(_buildAttribute, {email: emailAddress});\n      var cognitoUser;\n      _getUserPool().signUp(emailAddress, password, attributeList, null, function(err, result) {\n        if (err) defer.reject(err);\n        else defer.resolve(result);\n      });\n      \n      return defer.promise;\n    }\n\n    updateAttributesOnUser = function(username, obj) {      \n      var attributeList = _buildAttributeList(_buildAttribute, obj);\n      var cognitoUser   = _getCognitoUser(username, _getUserPool());\n      cognitoUser.updateAttributes(attributeList, function(err, result) {\n          if (err) {\n              alert(err);\n              return;\n          }\n          console.log('call result: ' + result);\n      });\n    }\n\n    deleteUserAttributes = function(cognitoUser, attributeList) {\n      cognitoUser.deleteAttributes(attributeList, function(err, result) {\n          if (err) {\n              alert(err);\n              return;\n          }\n          console.log('call result: ' + result);\n      });\n    }\n\n    verifyUserAttribute = function(cognitoUser, attributeName) {\n        cognitoUser.getAttributeVerificationCode(attributeName, {\n          onSuccess: function (result) {\n              console.log('call result: ' + result);\n          },\n          onFailure: function(err) {\n              alert(err);\n          },\n          inputVerificationCode: function() {\n              var verificationCode = prompt('Please input verification code: ' ,'');\n              cognitoUser.verifyAttribute(attributeName, verificationCode, this);\n          }\n      });\n    }\n\n    retrieveUserAttributes = function(cognitoUser) {\n      cognitoUser.getUserAttributes(function(err, result) {\n          if (err) {\n              alert(err);\n              return;\n          }\n          for (i = 0; i < result.length; i++) {\n              console.log('attribute ' + result[i].getName() + ' has value ' + result[i].getValue());\n          }\n      });\n    }\n\n    resendConfirmationCode = function(cognitoUser) {\n\t    if(!cognitoUser.resendConfirmationCode){\n\t\t  \t//We've just got an email address...\n\t\t  \tcognitoUser = _getCognitoUser(cognitoUser, _getUserPool());\n\t    }\n\t    \n      cognitoUser.resendConfirmationCode(function(err, result) {\n\t      \n\t      //TODO: This function throws an error on success that obscures a promise. Once the SDK has been fixed, we need to implement a promise structure to properly display results on the front end.\n        if (err) {\n          console.log(err);\n          return;\n        }\n        \n        //code has been sent\n        return true;\n      });\n    }\n    \n   confirmRegistration = function(cognitoUser, confirmationCode) {\n      cognitoUser.confirmRegistration(confirmationCode, true, function(err, result) {\n          if (err) {\n              alert(err);\n              return;\n          }\n          alert(result);\n      });\n    }\n\n    changePassword = function(cognitoUser, oldPassword, newPassword) {\n      cognitoUser.changePassword(oldPassword, newPassword, function(err, result) {\n        if (err) {\n            alert(err);\n            return;\n        }\n        console.log('call result: ' + result);\n      });\n    }\n\n    forgotPasswordFlow = function(cognitoUser) {\n      cognitoUser.forgotPassword({\n        onSuccess: function (result) {\n            console.log('call result: ' + result);\n        },\n        onFailure: function(err) {\n            alert(err);\n        },\n        \n        inputVerificationCode: function() {\n            var verificationCode = prompt('Please input verification code ' ,'');\n            var newPassword = prompt('Enter new password ' ,'');\n            cognitoUser.confirmPassword(verificationCode, newPassword, this);\n        }\n      });\n    }\n\n    deleteUser = function(cognitoUser) {\n      cognitoUser.deleteUser(function(err, result) {\n        if (err) {\n            alert(err);\n            return;\n        }\n        console.log('call result: ' + result);\n      });\n    }\n\n    signUserOut = function(cognitoUser) {\n      if (cognitoUser != null) {\n          cognitoUser.signOut();\n      }\n    }\n    \n    signCurrentUserOut = function() {\n\t  \tvar cognitoUser = _getUserPool().getCurrentUser();\n      if (cognitoUser != null) {\n          cognitoUser.signOut();\n      }\n    }\n\n\n    signUserOutGlobally = function(cognitoUser) {\n      cognitoUser.globalSignOut();\n    }\n\t\t\n\t\t\n\n    getCurrentUserFromLocalStorage = function() {\n\n\t    var defer = $q.defer();\n      var cognitoUser = _getUserPool().getCurrentUser();\n      \n      if (cognitoUser != null) {\n        cognitoUser.getSession(function(err, session) {\n        \t\n        \t//TODO: Decide if further error handling is necessary...\n          if (err) {\n            defer.reject(err);\n            return defer.promise;\n          }\n\t\t\t\t\t\n\t\t\t\t\tAWS.config.credentials = new AWS.CognitoIdentityCredentials({\n            IdentityPoolId : AWSConfig.IDENTITY_POOL_ID\n          });\n\t          \n          //var loginKey = 'cognito-idp.'+AWSConfig.REGION+'.amazonaws.com/'+AWSConfig.USER_POOL_ID;\n          defer.resolve(session);\n          \n        });\n      }else{\n\t      defer.reject(\"User is not logged in...\");\n      }\n      \n      return defer.promise;\n    }\n\t\t\n\t\t\n    confirmRegisteredUnauthenticatedUser = function(userName, confirmationCode) {\n\t    \n      var cognitoUser = _getCognitoUser(userName, _getUserPool());\n\t    var defer = $q.defer();\n      \n      cognitoUser.confirmRegistration(confirmationCode, true, function(err, result) {\n        if (err) defer.reject(err);\n        else defer.resolve(result);\n      });\n      \n      return defer.promise;\n    }\n    \n\t\t\n    changePassword = function(cognitoUser, oldPassword, newPassword) {\n      cognitoUser.changePassword(oldPassword, newPassword, function(err, result) {\n        if (err) {\n            alert(err);\n            return;\n        }\n        console.log('call result: ' + result);\n      });\n    }\n   \n    \n    \n    \n    \n    //Save an image to s3 Bucket\n    saveImageTos3 = function (image, userTokens){\n\t\t\t\n\t\t\tvar defer = $q.defer();\n\t\t\t_getAWSCredentials(userTokens.idToken.jwtToken).then(\n\n\t\t\t\t//Got credentials.. now save image\n\t\t\t\tfunction(){\n\n\t\t\t\t\tvar bucketName = 'blue-delta-api-development-stack-userdatabucket-12z57hiicf3xy';\n                    var s3bucket = new AWS.S3({region: AWSConfig.REGION, params: {Bucket: bucketName}});\n                    var params = {Key: AWS.config.credentials.identityId + \"/\" + \"myfilename.png\", Body: image};\n\t\t\t\t\t\n\t\t\t\t\t//This is throwing 403 error\n\t\t\t\t\ts3bucket.upload(params, function(err, data){\t      \n\t\t\t\t\t\tif (err) {\n\t\t\t\t\t\t\tconsole.log('Failed to upload');\n\t\t\t\t\t\t\tconsole.log(err);\n\t\t\t\t\t\t\tdefer.reject(err);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tconsole.log('Successfully uploaded image to S3.');\n\t\t\t\t\t\t\tconsole.log(data);\n\t\t\t\t\t\t}\n    \t\t\t});\n    \t\t\t\n\t\t\t\t},\n\t\t\t\t\n\t\t\t\t//Can't get AWS Credentials\n\t\t\t\tfunction(err){\n\t\t\t\t\tdefer.reject(err);\n\t\t\t\t}\n\t\t\t);\n\t\t\t\n\t\t\treturn defer.promise;\n\n    }\n \n     \n      \n    \n    return {\n\t    authenticateViaFB: authenticateViaFB,\n\t    getUserFromLocalStorage: getUserFromLocalStorage,\n      deleteCognitoUser: deleteCognitoUser,\n      authenticateCognitoUser: authenticateCognitoUser,\n      signupForApplication: signupForApplication,\n      updateAttributesOnUser: updateAttributesOnUser,\n      deleteUserAttributes: deleteUserAttributes,\n      verifyUserAttribute: verifyUserAttribute,\n      retrieveUserAttributes: retrieveUserAttributes,\n      resendConfirmationCode: resendConfirmationCode,\n      confirmRegistration: confirmRegistration,\n      changePassword: changePassword,\n      forgotPasswordFlow: forgotPasswordFlow,\n      deleteUser: deleteUser,\n      signUserOut: signUserOut,\n      signUserOutGlobally: signUserOutGlobally,\n      getCurrentUserFromLocalStorage: getCurrentUserFromLocalStorage,\n      confirmRegisteredUnauthenticatedUser: confirmRegisteredUnauthenticatedUser,\n      signCurrentUserOut:signCurrentUserOut,\n      saveImageTos3 : saveImageTos3\n    };\n  }\n})();","\n(function() {\n\n  angular\n    .module('bdApp')\n    .service('bdAPI', bdAPI);\n\n  bdAPI.$inject = ['$window', '$http', '$httpParamSerializer'];\n  function bdAPI ($window, $http, $httpParamSerializer) {\n\t\t// if($window.BlueDeltaApi){\n\t  //   //Delete moment from window so it's not globally accessible.\n\t  //   //  We can still get at it through _thirdParty however, more on why later\n\n\t    $window._thirdParty = $window._thirdParty || {};\n\t  //   $window._thirdParty.BlueDeltaApi = $window.BlueDeltaApi;\n\t  //   try { delete $window.BlueDeltaApi; } catch (e) {$window.BlueDeltaApi = undefined;}\n\t  // }\n\t  $window._thirdParty.BlueDeltaApi =new API.Client.DefaultApi(angular.injector([\"ng\"]).get(\"$http\"),\n          angular.injector([\"ng\"]).get(\"$httpParamSerializer\"),\n          angular.injector([\"ng\"]));\n      //\n      //\n      var BlueDeltaApi = $window._thirdParty.BlueDeltaApi;\n\n\t\t// //JSON Data\n\t\tBlueDeltaApi.jsonData = {};\n\n\t\tBlueDeltaApi.jsonData.getJeansByUser = function(userId){\n\t\t\treturn $http.get('/data/chris-jeans.json');\n\t\t};\n\n\t\tBlueDeltaApi.jsonData.getProfile = function(){\n\t\t\treturn $http.get('/data/profile.json');\n\t\t};\n\n\t\tBlueDeltaApi.jsonData.getStyles = function(){\n\t\t\treturn $http.get('/data/styles.json');\n\t\t};\n\n\t\tBlueDeltaApi.jsonData.getThreads = function(){\n\t\t\treturn $http.get('/data/threads.json');\n\t\t};\n\n\t\tBlueDeltaApi.jsonData.getHardware = function(){\n\t\t\treturn $http.get('/data/buttons.json');\n\t\t};\n\n\t\tBlueDeltaApi.jsonData.getFabrics = function(){\n\t\t\treturn $http.get('/data/fabrics.json');\n\t\t};\n\n\t\tBlueDeltaApi.jsonData.getGenders = function(){\n\t\t\treturn $http.get('/data/genders.json');\n\t\t};\n\n\n\t\tBlueDeltaApi.jsonData.getJeanById = function(id, callback){\n\t\t\t$http.get('/data/chris-jeans.json').then(function(response){\n\t\t\t\tvar jeans = response.data;\n\t\t\t\tfor(j=0; j<response.data.length; j++){\n\n\t\t\t\t\tif (response.data[j].id == id){\n\t\t\t\t\t\tconsole.log('jean found');\n\t\t\t\t\t\tvar ret = response.data[j];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tcallback(ret);\n\n\t\t\t});\n\t\t}\n\n\n\t  return BlueDeltaApi;\n  }\n\n})();","// Autogenerated file, do not modify directly\n(function () {\n  angular \n    .module('bdApp')\n    .service('AWSConfig', AWSConfig);\n      \n  function AWSConfig () {\n\t\treturn{\n\t\t\t\"REGION\": \"us-east-1\",\n\t\t  \"PROFILE_IMAGES_S3_BUCKET\": \"blue-delta-api-development-stack-userdatabucket-12z57hiicf3xy\",\n\t\t  \"API_ENDPOINT\": \"https://kd6f1omjzc.execute-api.us-east-1.amazonaws.com/development\",\n\t\t  \"USER_POOL_ID\": \"us-east-1_UvVeNoe5z\",\n\t\t  \"CLIENT_ID\": \"6hdrpk1j20qmjhfdiga31uia80\",\n\t\t  \"IDENTITY_POOL_ID\": \"us-east-1:60250bd7-bc76-4ab7-8813-2369461cb881\"\n\t\t}\n  }\n\n\n})();","(function() {\n\n  angular\n    .module('bdApp')\n    .service('meanData', meanData);\n\n  meanData.$inject = ['$http', 'authentication'];\n  function meanData ($http, authentication) {\n\t\t\n\t\t/*\n    var getProfile = function () {\n      return $http.get('/api/profile', {\n        headers: {\n          Authorization: 'Bearer '+ authentication.getToken()\n        }\n      });\n    };\n    */\n    var getOptions = function () {\t    \n      return $http.get('/api/options', {\n        headers: {\n          Authorization: 'Bearer '+ authentication.getToken()\n        }\n      });\n    };\n\t\t\n\t\t\n\t\t\n\t\t\n\t\tvar getJeanById = function(id, callback){\n\t\t\t$http.get('/data/chris-jeans.json').then(function(response){\n\t\t\t\tvar jeans = response.data;\n\t\t\t\tfor(j=0; j<response.data.length; j++){\n\n\t\t\t\t\tif (response.data[j].id == id){\n\t\t\t\t\t\tconsole.log('jean found');\n\t\t\t\t\t\tvar ret = response.data[j];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tcallback(ret);\n\n\t\t\t});\n\t\t}\n\t\t\n\t\t//Placeholders\n\t\tvar getJeansByUser = function(userId){\n\t\t\treturn $http.get('/data/chris-jeans.json');\n\t\t};\t\t\n\t\tvar getProfile = function(){\n\t\t\treturn $http.get('/data/profile.json');\n\t\t};\n\t\t\n\t\tvar getStyles = function(){\n\t\t\treturn $http.get('/data/styles.json');\n\t\t};\n\t\t\n\t\tvar getThreads = function(){\n\t\t\treturn $http.get('/data/threads.json');\n\t\t};\n\t\t\n\t\tvar getHardware = function(){\n\t\t\treturn $http.get('/data/buttons.json');\n\t\t};\n\t\t\n\t\tvar getFabrics = function(){\n\t\t\treturn $http.get('/data/fabrics.json');\n\t\t};\n\t\t\n\t\t\n\t\tvar getGenders = function(){\n\t\t\treturn $http.get('/data/genders.json');\n\t\t};\n\t\t\n\t\t\n\t\t\n\t\t\n    return {\n\t    getJeanById: getJeanById,\n\t    getJeansByUser : getJeansByUser,\n      getProfile : getProfile,\n      getOptions : getOptions,\n      getStyles : getStyles,\n      getThreads : getThreads,\n      getHardware: getHardware,\n      getFabrics: getFabrics,\n      getGenders: getGenders\n    };\n  }\n\n})();","\n(function() {\n\n  angular\n    .module('bdApp')\n    .service('jean', jean);\n\n  function jean() {\n\t\t\n   \tdata = {};\n\t\t\n\t\tset = function(property, value){\n\t\t\tthis.data[property] = value;\n\t\t};\n\t\t\n\t\tcreateNew = function(jean){\n\t\t\tif (!jean || jean.constructor != Object){\n\t\t\t\tthis.data = {\n\t\t\t\t\t\"gender\" : 1,\n\t\t\t\t\t\"style\" : 1,\n\t\t\t\t\t\"fabric\" : \"1004\",\n\t\t\t\t\t\"accent_thread\" : \"1\",\n\t\t\t\t\t\"top_thread\" : \"1\",\n\t\t\t\t\t\"bottom_thread\" : \"1\",\n\t\t\t\t\t\"id\":Math.floor(Math.random() * 1000000000)\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tthis.data = {\n\t\t\t\t\t\"title\" : \"Copy of \"+jean.data.title,\n\t\t\t\t\t\"gender\" : jean.data.gender,\n\t\t\t\t\t\"style\" : jean.data.style,\n\t\t\t\t\t\"fabric\" : jean.data.fabric,\n\t\t\t\t\t\"accent_thread\" : jean.data.accent_thread,\n\t\t\t\t\t\"top_thread\" : jean.data.top_thread,\n\t\t\t\t\t\"bottom_thread\" : jean.data.bottom_thread,\n\t\t\t\t\t\"id\":Math.floor(Math.random() * 1000000000)\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n    return {\n      data : data,\n      set : set,\n      createNew :createNew\n    };\n    \n  }\n\n})();","\n(function() {\n\n  angular\n    .module('bdApp')\n    .service('popups', popups);\n\n  function popups() {\n\t\t\n    return {\n      denim : false,\n      hiw : false,\n      infoPop:false,\n      jeanProfile:false\n    };\n    \n  }\n\n})();","angular.module('bdApp')\n.factory('preloader', preloaderFunc);\n\npreloaderFunc.$inject = ['$q', '$rootScope'];\nfunction preloaderFunc( $q, $rootScope ) {\n  // I manage the preloading of image objects. Accepts an array of image URLs.\n  function Preloader( imageLocations ) {\n      // I am the image SRC values to preload.\n      this.imageLocations = imageLocations;\n      // As the images load, we'll need to keep track of the load/error\n      // counts when announing the progress on the loading.\n      this.imageCount = this.imageLocations.length;\n      this.loadCount = 0;\n      this.errorCount = 0;\n      // I am the possible states that the preloader can be in.\n      this.states = {\n          PENDING: 1,\n          LOADING: 2,\n          RESOLVED: 3,\n          REJECTED: 4\n      };\n      // I keep track of the current state of the preloader.\n      this.state = this.states.PENDING;\n      // When loading the images, a promise will be returned to indicate\n      // when the loading has completed (and / or progressed).\n      this.deferred = $q.defer();\n      this.promise = this.deferred.promise;\n  }\n  // ---\n  // STATIC METHODS.\n  // ---\n  // I reload the given images [Array] and return a promise. The promise\n  // will be resolved with the array of image locations.\n  Preloader.preloadImages = function( imageLocations ) {\n      var preloader = new Preloader( imageLocations );\n      return( preloader.load() );\n  };\n  // ---\n  // INSTANCE METHODS.\n  // ---\n  Preloader.prototype = {\n      // Best practice for \"instnceof\" operator.\n      constructor: Preloader,\n      // ---\n      // PUBLIC METHODS.\n      // ---\n      // I determine if the preloader has started loading images yet.\n      isInitiated: function isInitiated() {\n          return( this.state !== this.states.PENDING );\n      },\n      // I determine if the preloader has failed to load all of the images.\n      isRejected: function isRejected() {\n          return( this.state === this.states.REJECTED );\n      },\n      // I determine if the preloader has successfully loaded all of the images.\n      isResolved: function isResolved() {\n          return( this.state === this.states.RESOLVED );\n      },\n      // I initiate the preload of the images. Returns a promise.\n      load: function load() {\n          // If the images are already loading, return the existing promise.\n          if ( this.isInitiated() ) {\n              return( this.promise );\n          }\n          this.state = this.states.LOADING;\n          for ( var i = 0 ; i < this.imageCount ; i++ ) {\n              this.loadImageLocation( this.imageLocations[ i ] );\n          }\n          // Return the deferred promise for the load event.\n          return( this.promise );\n      },\n      // ---\n      // PRIVATE METHODS.\n      // ---\n      // I handle the load-failure of the given image location.\n      handleImageError: function handleImageError( imageLocation ) {\n          this.errorCount++;\n          // If the preload action has already failed, ignore further action.\n          if ( this.isRejected() ) {\n              return;\n          }\n          this.state = this.states.REJECTED;\n          this.deferred.reject( imageLocation );\n      },\n      // I handle the load-success of the given image location.\n      handleImageLoad: function handleImageLoad( imageLocation ) {\n          this.loadCount++;\n          // If the preload action has already failed, ignore further action.\n          if ( this.isRejected() ) {\n              return;\n          }\n          // Notify the progress of the overall deferred. This is different\n          // than Resolving the deferred - you can call notify many times\n          // before the ultimate resolution (or rejection) of the deferred.\n          this.deferred.notify({\n              percent: Math.ceil( this.loadCount / this.imageCount * 100 ),\n              imageLocation: imageLocation\n          });\n          // If all of the images have loaded, we can resolve the deferred\n          // value that we returned to the calling context.\n          if ( this.loadCount === this.imageCount ) {\n              this.state = this.states.RESOLVED;\n              this.deferred.resolve( this.imageLocations );\n          }\n      },\n      // I load the given image location and then wire the load / error\n      // events back into the preloader instance.\n      // --\n      // NOTE: The load/error events trigger a $digest.\n      loadImageLocation: function loadImageLocation( imageLocation ) {\n          var preloader = this;\n          // When it comes to creating the image object, it is critical that\n          // we bind the event handlers BEFORE we actually set the image\n          // source. Failure to do so will prevent the events from proper\n          // triggering in some browsers.\n          // --\n          // The below removes a dependency on jQuery, based on a comment\n          // on Ben Nadel's original blog by user Adriaan:\n          // http://www.bennadel.com/members/11887-adriaan.htm\n          var image = angular.element( new Image() )\n              .bind('load', function( event ) {\n                  // Since the load event is asynchronous, we have to\n                  // tell AngularJS that something changed.\n                  $rootScope.$apply(\n                      function() {\n                          preloader.handleImageLoad( event.target.src );\n                          // Clean up object reference to help with the\n                          // garbage collection in the closure.\n                          preloader = image = event = null;\n                      }\n                  );\n              })\n              .bind('error', function( event ) {\n                  // Since the load event is asynchronous, we have to\n                  // tell AngularJS that something changed.\n                  $rootScope.$apply(\n                      function() {\n                          preloader.handleImageError( event.target.src );\n                          // Clean up object reference to help with the\n                          // garbage collection in the closure.\n                          preloader = image = event = null;\n                      }\n                  );\n              })\n              .attr( 'src', imageLocation )\n          ;\n      }\n  };\n  // Return the factory instance.\n  return( Preloader );\n};","(function() {\n  \n  angular\n    .module('bdApp')\n    .controller('adminCtrl', adminCtrl);\n\n  adminCtrl.$inject = ['$location', 'meanData'];\n  function adminCtrl($location, meanData) {\n\t  \n\t  \n    var vm = this;\n\n    vm.user = {};\n    meanData.getOptions()\n      .success(function(data) {\n\t      console.log(\"admin.controller.jsln16:::\");\n        console.log(data);\n      })\n      .error(function (e) {\n        console.log(e);\n      });\n  }\n\n})();","(function() {\n  \n  angular\n    .module('bdApp')\n    .controller('closetCtrl', closetCtrl);\n\n  closetCtrl.$inject = ['$location', 'jean','popups', '$filter', 'aws', 'bdAPI', '$scope'];\n  function closetCtrl($location, jean, popups, $filter, aws, bdAPI, $scope) {\n\t  \n\n\t  \n    var vm = this;\n    \n\t\tvm.popups=popups;\n\t\tvm.jean=jean;\n\t\tvm.data={};\n\t\tvm.jeans = [];\n    aws.getCurrentUserFromLocalStorage().then(\n    \tfunction(result){\n\t    \t\n\t    \tbdAPI.defaultHeaders_['Authorization'] = result.idToken.getJwtToken();\n\t    \tvm.setUpClosetData();\n\t    \t\n\t    \t//Set Up user\n\t    \tvar idTokenPayload = result.idToken.jwtToken.split('.')[1];\n\t\t\t\tvar userID = JSON.parse(atob(idTokenPayload)).sub;\t\t\t\t\n\t\t\t\tbdAPI.usersGet(userID).then(\n\t\t\t\t\tfunction(result){\n\t\t\t\t\t\tvm.user = result.data;\t\n\t\t\t\t\t\t$scope.$apply();\n\t\t\t\t\t\t\n\t\t\t\t\t\t//var user = result.data;\n\t\t\t\t\t\t//user.name = \"Chris LeFevre\";\n\t\t\t\t\t\t//bdAPI.usersUpdate(userID, user);\n\t\t\t\t\t}, \n\t\t\t\t\tfunction(err){console.log(err)} \n\t\t\t\t);\n    \t},    \t\n    \tfunction(err){\n\t    \tconsole.log('you are not authenticated...'+err);\n    \t}\n    );\n\t\t\n\n\t\t//Utility function for setting up customizer data from JSON... \n\t\tvm.setupData = function (func, dataKey) {\n\t\t  bdAPI.jsonData[func]()\n\t\t   .success(function(data) {\n        vm.data[dataKey] = data;\n      })\n      .error(function (e) {\n        console.log(e);\n      });\n\t\t}\n\n\t\t\n\t\tvar logError = function(err){console.log(err)};\n\t\t\n\t\t\n\t\t//Set up Closet Data using JSON\n\t\tvm.setUpClosetData = function(){\n\t\n\t\t\n\t\t\t\n\t\n\t\t\t\n\t\t\tvm.setupData('getGenders', 'genders');\n\t\t\tvm.setupData('getStyles', 'styles');\n\t\t\tvm.setupData('getFabrics', 'fabrics');\n\t\t\tvm.setupData('getThreads', 'threads');\n\t\t\t\n\t\t\tbdAPI.jsonData.getJeansByUser(1)\n\t\t  .success(function(data) {\n\t\t\t\tfor (x=0; x<data.length; x++){\n\t\t\t\t\tvm.jeans.push(data[x]);\n\t\t\t\t}\n      })\n      .error(function (e) {\n        console.log(e);\n      });\n      \n\t\t}\n\t\t\n\n\t\t\n\t\n\n\n\n\n\n\t\tvm.dataLookup = function(jeanKey, id, attr){\n\n\t\t\tif (typeof jeanKey == 'undefined' || typeof id == 'undefined') return false;\n\t\t\tattr = attr||null;\n\t\t\t\n\t\t\tvar dataKey = (jeanKey.includes(\"thread\") ? \"threads\" : jeanKey+\"s\");\n\t\t\t\n\t\t\tvar dataSet = vm.data[dataKey];\n\t\t\tselected = $filter('filter')(dataSet, {id: id})[0];\n\t\t\tif (!attr) return selected;\n\t\t\telse return selected[attr];\t\n\t\t}\n\t\t\n\t\tvm.copyJean = function(){\n\t\t\tvm.jean = jean.createNew(vm.jean);\n\t\t\t$location.path('/customizer');\n\t\t}\n\t\t\n\t\tvm.selectJean = function(jean){\n\t\t\tconsole.log(jean);\n\t\t\tconsole.log(vm.jean);\n\t\t\tvm.popups.jeanProfile = true; \n\t\t\tvm.jean.data=jean\n\t\t}\n\t\t\n\t\n\t\t\n\t\t//Get User\n  }\n  \n\n\n\n})();","(function() {\n  \n  angular\n    .module('bdApp')\n    .controller('homeCtrl', homeCtrl);\n\t\t\t\n\t\thomeCtrl.$inject = ['$scope','jean', '$animate'];\n\n\t\t\n    function homeCtrl ($scope, jean, $animate) {\n\t    \t    \t    \n\t    $scope.jean = jean.data;\n\t    \t\n    }\n\n})();","(function() {\n  \n  angular\n    .module('bdApp')\n    .controller('customizerCtrl', customizerCtrl);\n\n  customizerCtrl.$inject = ['$q','$filter','$timeout','$location', '$window', '$routeParams', 'bdAPI', 'jean', '$scope', 'popups', 'aws'];\n  function customizerCtrl($q, $filter, $timeout, $location, $window, $routeParams, bdAPI, jean, $scope, popups, aws) {\n    var vm = this;\n\t\t\n\n\t\t//Detect Orientation\t\t\n\t\tfunction landscapeDetect() {\n\t\t  var ua = navigator.userAgent.toLowerCase();\n\t\t  var isAndroid = ua.indexOf(\"android\") > -1; // Detect Android devices\n\t\t  if (isAndroid) {\n\t\t    //window.orientation is different for iOS and Android\n\t\t    if (window.orientation == 0 || window.orientation == 180) { //Landscape Mode\n\t\t      return true;\n\t\t    }\n\t\t    else if (window.orientation == 90 || window.orientation == -90) { //Portrait Mode\n\t\t\t\t\treturn false;\n\t\t    }\n\t\t  }\n\t\t  else {\n\t\t    if (window.orientation == 90 || window.orientation == -90) { //Landscape Mode\n\t\t      return true;\n\t\t    }\n\t\t    else if (window.orientation == 0 || window.orientation == 180) { //Portrait Mode\n\t\t      return false;\n\t\t    }\n\t\t  }\n\t\t}\n    \n    vm.landscape=landscapeDetect();\n  \tvar supportsOrientationChange = \"onorientationchange\" in window,\n    orientationEvent = supportsOrientationChange ? \"orientationchange\" : \"resize\";\n\t\t\n\t\twindow.addEventListener(orientationEvent, function() {\t\n\t\t\t//Set a scope variable on orientation change. This will display a popup on the front end warning users that the customizer works best in protrait mode\n\t\t  vm.landscape=landscapeDetect();\n\t\t  $scope.$apply();\n\t\t}, false);\n\t\t\n\t\t\n\t\t//popups\n\t\tvm.popups = popups;\n\t\t\n\n\t\tfunction parseURLkey(key){\n\t\t\tswitch(key){\n\t\t\t\tcase \"g\":\n\t      return \"gender\";\n\t      break;\n\t      \n\t      case \"s\":\n\t      return \"style\";\n\t      break;\n\t      \n\t      case \"f\":\n\t      return \"fabric\";\n\t      break;\n\t      \n\t      case \"tt\":\n\t      return \"top_thread\";\n\t      break;\n\t      \n\t      case \"tb\":\n\t      return \"bottom_thread\";\n\t      break;\n\t      \n\t      case \"ta\":\n\t      return \"accent_thread\";\n\t      \n\t      default: return false;\n\t\t\t}\n\t\t}\n\t\t\n\t\tfunction jeanKeytoURL(key){\n\t\t\tswitch(key){\n\t\t\t\tcase \"gender\":\n\t      return \"g\";\n\t      break;\n\t      \n\t      case \"style\":\n\t      return \"s\";\n\t      break;\n\t      \n\t      case \"fabric\":\n\t      return \"f\";\n\t      break;\n\t      \n\t      case \"top_thread\":\n\t      return \"tt\";\n\t      break;\n\t      \n\t      case \"bottom_thread\":\n\t      return \"tb\";\n\t      break;\n\t      \n\t      case \"accent_thread\":\n\t      return \"ta\";\n\t      \n\t      default: return false;\n\t\t\t}\n\t\t}\n\t\t\n\t\tconsole.log($routeParams);\n\t\t\n\t\t//Set up jean data from parameter\n\t\tif ($routeParams.jean_id && $routeParams.action=='copy'){\n\t\t\tif ($routeParams.jean_id.indexOf(\":\")>0){\n\t\t\t\tjean.createNew();\n\t\t\t\tjeanData = $routeParams.jean_id.split(\":\");\n\t\t\t\tfor(var d=0; d<jeanData.length; d++){\n\t\t\t\t\tvar parts= jeanData[d].match(/([A-Za-z]+)([0-9]+)/);\n\t\t\t\t\tif (!parts) continue;\n\t\t\t\t\tvar jeanKey = parseURLkey(parts[1]);\n\t\t\t\t\tif (jeanKey) jean.data[jeanKey] = parseInt(parts[2]);\t\t\t\t\t\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\t//Copy Jean from ID\t\n\t\t\t\tjean.createNew($routeParams.jean_id);\n\t\t\t}\n\t\t\t\n\t\t//Lookup Jean by Id\n\t\t}else if ($routeParams.jean_id && !$routeParams.action){\n\t\t\t//Edit Jean\n\t\t\tbdAPI.jsonData.getJeanById($routeParams.jean_id, function(data){\n\t\t\t\tif (data){\n\t\t\t\t\tjean.data=data;\t\n\t\t\t\t}else{\n\t\t\t\t\t//jean id doesn't exist\n\t\t\t\t\tjean.createNew();\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t//New Jean\n\t\t}else{\n\t\t\t//New Jean\n\t\t\tif(Object.keys(jean.data).length === 0 && jean.data.constructor === Object){\n\t\t\t\tjean.createNew();\n\t\t\t}\t\t\t\n\t\t}\n\t\t\n\t\tvm.jean=jean;\n\t\t\n\t\t\n\t\t\n\t\t\n\t\t\n\t\t\n\t\t//SHARE JEAN\n\t\tvm.jeanToUrl = function(){\n\t\t\tvar url = document.location.origin+\"/customizer/d\";\n\t\t\tfor (var property in vm.jean.data) {\n\t\t    if (vm.jean.data.hasOwnProperty(property)) {\n\t\t\t\t\tvar urlKey = jeanKeytoURL(property);\n\t\t\t\t\tif (urlKey) url += \":\"+urlKey+vm.jean.data[property];\n\t\t    }\n\t\t\t}\n\t\t\turl += \"/copy\";\n\t\t\tconsole.log(url);\n\n\t\t}\n\t\n    /*\n\t  vm.jean.selectStyle = function(id){\n\t    vm.jean.data.style =\tid;\t   \n\t    //vm.form.nextStep();\n    }    \n\t\t*/\n\n\t\t\n\t\t//Build Control Panel Steps\n\t\tvm.panel = [];\n\t\t\n\t\t//Gender\n\t\tvm.panel.push({\n\t\t\t\"panelTemplate\":\"gender-chooser\",\n\t\t\t\"dataKey\":\"genders\",\n\t\t\t\"title\":\"Gender\",\n\t\t\t\"jeanKey\":\"gender\"\n\t\t});\n\t\t\n\t\t//Style\n\t\tvm.panel.push({\n\t\t\t\"panelTemplate\":\"style-chooser\",\n\t\t\t\"dataKey\":\"styles\",\n\t\t\t\"title\":\"Style\",\n\t\t\t\"jeanKey\":\"style\"\n\t\t});\n\t\t\n\t\t//Fabric\n\t\tvm.panel.push({\n\t\t\t\"panelTemplate\":\"fabric-chooser\",\n\t\t\t\"dataKey\":\"fabrics\",\n\t\t\t\"title\":\"Fabric\",\n\t\t\t\"jeanKey\":\"fabric\"\n\t\t});\n\t\t\n\t\t//Top Thread\n\t\tvm.panel.push({\n\t\t\t\"panelTemplate\":\"chooser\",\n\t\t\t\"dataKey\":\"threads\",\n\t\t\t\"title\":\"Top Thread\",\n\t\t\t\"jeanKey\":\"top_thread\"\n\t\t});\n\t\t\n\t\t//Bottom Thread\n\t\tvm.panel.push({\n\t\t\t\"panelTemplate\":\"chooser\",\n\t\t\t\"dataKey\":\"threads\",\n\t\t\t\"title\":\"Bottom Thread\",\n\t\t\t\"jeanKey\":\"bottom_thread\"\n\t\t});\n\t\t\n\t\t//Accent Thread\n\t\tvm.panel.push({\n\t\t\t\"panelTemplate\":\"chooser\",\n\t\t\t\"dataKey\":\"threads\",\n\t\t\t\"title\":\"Accent Thread\",\n\t\t\t\"jeanKey\":\"accent_thread\"\n\t\t});\n\t\t\n\t\t//Overview\n\t\tvm.panel.push({\n\t\t\t\"panelTemplate\":\"list\",\n\t\t\t\"title\":\"Overview\"\n\t\t});\n\t\t\n\t\t\n\t\t/*\n\t\tNot using hardware for now...\n\n\t\tvm.panel.push({\n\t\t\t\"panelTemplate\":\"chooser\",\n\t\t\t\"dataKey\":\"hardware\",\n\t\t\t\"title\":\"Hardware\",\n\t\t\t\"jeanKey\":\"hardware\"\n\t\t});\n\t\t*/\n\t\t\n\t\tvm.panelDir=\"next\";\t\t\n\t\tvm.panelStep = 0;\n\t\tvm.changeStep = function(step){\n\t\t\tif (step >= vm.panel.length) return false;\n\t\t\tif (step < 0) return false;\n\t\t\tif (step===undefined) return false;\n\t\t\telse vm.panelStep = step; \n\t\t\t\n\t\t\t//As long as we're not on the \"Overview\" Step, update active item...\n\t\t\tif (step+1 != vm.panel.length) vm.updateActiveItem();\n\t\t}\n\t\t\n\t\tvm.activeItem={};\n\t\t\n\t\tvm.updateActiveItem = function(){\n\t\t\tvar data = vm.data[vm.panel[vm.panelStep].dataKey];\n\t\t\tvar key = vm.jean.data[vm.panel[vm.panelStep].jeanKey];\n\t\t\tvar ret = $filter('filter')(data, {id: key})[0];\n\t\t\tvm.activeItem = ret;\n\t\t}\n\t\t\n\t\tvm.styleByGender = function(gender){\n\t\t\treturn function(style){\n\t\t\t\treturn style[\"images_\"+gender];\n\t\t  }\n\t\t};\n\t\t\n\t\t\t\t\n\t\tvm.dataLookup = function(jeanKey, id, attr){\n\t\t\t\n\t\t\tif (typeof jeanKey == 'undefined' || typeof id == 'undefined') return false;\n\t\t\tattr = attr||null;\n\t\t\t\n\t\t\tvar dataInfo = $filter('filter')(vm.panel, {jeanKey: jeanKey});\n\n\t\t\tif (dataInfo.length < 1) return false; //Return false for the \"List\" Panel\n\t\t\t\n\t\t\tvar dataKey = (jeanKey == \"gender\" || jeanKey == \"style\" ? jeanKey+\"s\" : $filter('filter')(vm.panel, {jeanKey: jeanKey})[0].dataKey);\n\t\t\tvar dataSet = vm.data[dataKey];\n\n\t\t\tdataById = \t$filter('filter')(dataSet, {id: id});\n\t\t\tif (typeof dataById == 'undefined') return false; //Return false when dataSet is undefined...\n\t\t\tselected = dataById[0];\n\t\t\t\n\t\t\tif (!attr) return selected;\n\t\t\telse return selected[attr];\t\n\t\t\t\n\t\t}\n\t\t\n\t\t\t\t\n\t\t/* GET CUSTOMIZER DATA */\n\t\tvm.data = {};\n\t\t\t\n\t\tvm.getData = function (func, dataKey) {\n\t\t\tvar d = $q.defer();\t   \n\t\t  bdAPI.jsonData[func]()\n\t\t  .then(function(res){\n\t\t    vm.data[dataKey]=res.data;\n\t\t    d.resolve(true);\n\t\t\t});\n\t\t\treturn d.promise;\n\t\t}\n\t\t\n\t\t//Make sure that all data is in place before running updateActiveItem\n\t\t$q.all([\n\t\t\tvm.getData('getGenders', 'genders'),\n\t\t\tvm.getData('getStyles', 'styles'),\n\t\t\tvm.getData('getFabrics', 'fabrics'),\n\t\t\tvm.getData('getThreads', 'threads'),\n\t\t]).then(function(data) {\n\t\t\n\t\t\t//Update the active item any time the jean data changes\n\t\t\t$scope.$watch(function() {\n\t\t\t  return vm.jean.data;\n\t\t\t}, function(current, original) {\n\t\t\t\tvm.updateActiveItem();\n\t\t\t}, true);\n\t\t\t\n\t\t});\n\t\t\n\t\t\n\t\t//Thumbnail\t\t\n  \tfunction loadImage(src, cntxt) {\n      return $q(function(resolve,reject) {\n        var image = new Image();\n        image.src = src;\n        image.onload = function() {\n          cntxt.drawImage(image,0,0,600,696);\n          resolve(image);\n        };\n        image.onerror = function(e) {\n          reject(e);\n        };\n      })\n    }\n    \n    vm.saveJean = function(){\n\t    console.log(\"save\");\n\t    aws.getCurrentUserFromLocalStorage().then(\n\t\t    function(result){\n\t\t\t    var userData = result;\n\t\t\t    vm.createThumb().then(\n\t\t\t\t    function(imageURL){\n\t\t\t\t\t  \taws.saveImageTos3(imageURL, userData).then(\n\t\t\t\t\t  \t\tfunction(){\n\t\t\t\t\t\t  \t\tconsole.log('creds refreshed');\n\t\t\t\t\t\t  \t}, \n\t\t\t\t\t\t\t\tfunction(err){\n\t\t\t\t\t\t\t\t\tconsole.log(err)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t);\n\t\t\t\t    }\n\t\t\t    );\n\t\t    },\n\t\t    function(err){\n\t\t\t    //TODO: properly notify\n\t\t\t\t\talert('you must be logged in to save!');\n\t\t    }\n\t    );\n    }\n    \n    \n\t\tvm.createThumb = function(){\n\t  \tvar canvas = document.createElement('canvas');\n\t  \tcanvas.width=600;\n\t  \tcanvas.height=600;\n\t  \tvar cntxt = canvas.getContext('2d');\t\n\t  \tvar promises = [];\n    \n\t    var imagesElements = document.getElementsByClassName(\"zoomed-image\");\n\t    for(var i=0; i<imagesElements.length; i++){\n\t\t    var image = imagesElements[i];\t\n\t      promises.push(loadImage(image.src, cntxt));\n\t    }\n\n\t    return $q.all(promises).then(function(results) {\n\t      var dataUrl = canvas.toDataURL('image/jpeg');\n\t\t\t\treturn dataUrl;\n\t    });\n\t\t\t\n  \t}\n\n\t\t\n  }\n\n})();","(function () {\n\n  angular\n    .module('bdApp')\n    .controller('chooserCtrl', chooserCtrl)\n\t\n\t\tchooserCtrl.$inject = ['$scope', '$element','$timeout', '$window', 'jean', 'popups'];\n\n\t\t\n\t\tfunction chooserCtrl($scope, $element, $timeout, $window, jean, popups) {\n\t\n\t\t\tvar chvm = this;\n\t\t\t\n\t\t\t//popups\n\t\t\tchvm.popups = popups;\n\t\t\tchvm.jean = jean;\n\t\t\tchvm.breakPoint = 800;\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\tfunction scrollToLeft(el, scrollTo, scrollDuration) {\n\t\t\t\t//Select First Element\n\t\t\t\tel = el[0];\n\t\t\t\t//Center Scroll To\n\t\t\t\tscrollTo = scrollTo-(el.offsetWidth/2)+40;\n\t\t\t\t\n\t\t\t\tvar maxLeft = el.scrollWidth - el.offsetWidth;\n\t\t\t\t\n\t\t\t\tif (scrollTo >= maxLeft) scrollTo = maxLeft-1;\n\t\t\t\tif (scrollTo == maxLeft) scrollTo = maxLeft-1;\n\t\t\t\tvar stepNum = Math.ceil(scrollDuration / 15),\n\t\t\t\t\t\tdistance = scrollTo - el.scrollLeft,\n\t\t\t\t\t\tscrollStep = (distance / stepNum),\n\t\t\t\t\t\tscrollTest = (el.scrollLeft < scrollTo ? function(a,b){return a<=b-1;} : function(a,b){return a>=b+1;} );\t\t\n\t\t\t\t/*\n\n\t\t\t\tconsole.log(\"current Scoll pos: \"+el.scrollLeft);\n\t\t\t\tconsole.log(\"Scroll to \"+scrollTo);\n\t\t\t\tconsole.log(\"distance to go \"+distance);\n\t\t\t\tconsole.log(scrollStep);\n\t\t\t\tconsole.log(\"func: \"+scrollTest)\n\t\t\t\tconsole.log(\"eval\");\n\t\t\t\tconsole.log(scrollTest(el.scrollLeft, scrollTo ));\n\t\t\t\tconsole.log(\"done\");\n\t\t\t\t*/\n\t\t\t\t\t\t\n\t\t\t\tvar scrollInterval = setInterval(function(){    \n\t\t\t\t\n\t\t\t\t\tif(scrollTest(el.scrollLeft, scrollTo )){\n\t\t\t\t\t\tvar newScroll = el.scrollLeft+scrollStep;\n\t\t\t\t\t\tif (newScroll >= maxLeft) newScroll = maxLeft-1;\n\t\t\t\t\t\tel.scrollLeft = newScroll;\n\t\t\t\t\t\t\n\t\t\t\t\t\t/*\n\t\t\t\t\t\tconsole.log(newScroll);\n\t\t\t\t\t\tconsole.log(scrollTo);\n\t\t\t\t\t\t*/\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\telse clearInterval(scrollInterval); \n\t\t      \n\t  \t\t},15);\n\t\t\t  \n\t\t\t}\n\n\t\t\tchvm.selectorCoords = {\"top\":0, \"left\":0};\n\t\t\t\n\t\t\t\n\t\t\t//Center Selector on chooser change... Center on selected attr if edting preexisting jean...\n\t\t\t$scope.$watch('active', function(newValue,oldValue) {\t\n\t\t\t\t\n\t\t\t\t//Only on active choosers...\n\t\t\t\tif (newValue == true){\n\n\t\t\t\t\t$timeout(function(){\n\t\t\t\t\t\t\n\t\t\t\t\t\tvar key = $scope.step.jeanKey+\"_\"+chvm.jean.data[$scope.step.jeanKey],\n\t\t\t\t\t\tactiveElement = angular.element(document.querySelector('#'+key));\n\t\t\t\t\t\t\n\t\t\t\t\t\tchvm.selectorCoords.top = activeElement.prop('offsetTop');\n\t\t\t\t\t\tchvm.selectorCoords.left = activeElement.prop('offsetLeft');\n\t\t\t\t\t\t\t\n\t\t\t\t\t\tvar selector = angular.element(document.querySelector(\"#\"+$scope.step.jeanKey+\"-selector\"));\n\t\t\t\t\t\tselector.css({'top':chvm.selectorCoords.top+'px', 'left':chvm.selectorCoords.left+'px'});\n\t\t\t\t\t\t\n\t\t\t\t\t\t//Mobile Choosers\n\t\t\t\t\t\tif ($window.innerWidth < chvm.breakPoint){\n\t\t\t\t\t\t\tvar chooser = angular.element($element[0].querySelector('.chooser-grid'));\t\n\t\t\t\t\t\t\tvar left = (chooser[0] ? chvm.selectorCoords.left-(chooser[0].offsetWidth/2)+40 : 0);\n\t\t\t\t\t\t\tchooser.prop('scrollLeft', left);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t//Desktop Choosers\n\t\t\t\t\t\telse{\t\t\t\t\t\t\n\t\t\t\t\t\t\tvar chooser = angular.element($element[0]);\t\n\t\t\t\t\t\t\tchooser.prop('scrollTop', chvm.selectorCoords.top - 15);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t}, 200);\n\t\t\t\t\t\n\t\t\t\t}\t\t\n\t\t\t\t\n    \t});\n\n\n\t\t\tchvm.selectAttr = function($event, id, attr, selector){\n\t\t\t\tvar chooser = angular.element(document.querySelector(\"#\"+attr+\"-chooser\"));\n\t\t\t\tvar selector = angular.element(document.querySelector(\"#\"+attr+\"-selector\"));\n\t\t\t\tvar top = angular.element($event.target).prop('offsetTop');\n\t\t\t\tvar left = angular.element($event.target).prop('offsetLeft');\n\t\t\t\tvar text = angular.element(document.querySelectorAll('#item-title'));\n\t\t\t\t\n\t\t\t\ttext.css({'right':'-400px', 'opacity':0});\n\t\t\t\tselector.css({'top':top+'px', 'left':left+'px'});\n\t\t\t\t\n\t\t\t\tchvm.selectorCoords = {\"top\":top,\"left\":left};\n\t\t\t\t\n\t\t\t\tif ($window.innerWidth < chvm.breakPoint) scrollToLeft(chooser, left, 200);\n\t\t\t\t\n\t\t\t\t$timeout(function(){\n\t\t\t\t\ttext.css({'right':'15px', 'opacity':1});\t\t\t\t\n\t\t\t\t\tchvm.jean.data[attr] =\tid;\t\n\t\t\t\t}, 200);\n\t\t\t\n\t\t\t}\n\t\t\t\n\t\t\tchvm.jeanSet = function(attr, val){\n\t\t\t\tchvm.jean.data[attr] =\tval;\n\t\t\t}\n\t\t\n\t\t}\t\n\t\t\t\n})();","(function () {\n\n  angular\n    .module('bdApp')\n    .directive('chooser', chooser);\n\t\t\n  function chooser () {\n    return {\n      restrict: 'EA',\n      templateUrl: '/directives/choosers/chooser.template.html',\n      controller: 'chooserCtrl as chvm',\n      scope : {\n        step : '=',\n        dataset: '=',\n        active: '='\n      }\n    };\n  }\n\n})();","(function () {\n\n  angular\n    .module('bdApp')\n    .directive('fabricChooser', ['$window', function($window) {\n    \t\n\t\t\treturn {\n\t    \t\n\t      restrict: 'EA',\n\t      template: '<div class=\"fabric-chooser-container\" ng-include=\"viewUrl\"></div>',\n\t      controller: 'chooserCtrl as chvm',\n\t      scope : {\n\t        step : '=',\n\t        dataset: '=',\n\t\t\t\t\tactive: '='\n\t      },\n\t      \n\t      link: function($scope){\n\t\t      \n\t\t      $scope.breakPoint = 800;\n\t\t      \n\t\t      //Template on window resize\n\t\t      $window.onresize = function() {\n\t          changeTemplate();\n\t          $scope.$apply();\n\t        };\n\t        \n\t        changeTemplate();\n\t            \n\t        function changeTemplate() {\n\t          var screenWidth = $window.innerWidth;\n\t          if (screenWidth < $scope.breakPoint) {\n\t            $scope.viewUrl = \"/directives/choosers/fabric-chooser.template-mobile.html\";\n\t          } else if (screenWidth >= $scope.breakPoint) {\n\t            $scope.viewUrl = \"/directives/choosers/fabric-chooser.template-desk.html\";\n\t          }\n\t        }\n\t\t      \n\t\t      \n\t\t      function positionChooser(){\n\t\t\t    \t//element.animate({scrollLeft: element.offset().left - 50}, \"slow\");\n\t\t\t    \t//var selector = angular.element(document.querySelector(\"#\"+attr+\"-selector\"));  \n\t\t      }\n\t\t      \n\t\t      \n\t\t      //Weight Filter\n\t\t      $scope.weightFilter = function(min, max){\n\t\t\t\t\t\treturn function(fabric){\n\t\t\t\t\t\t\tif (min && fabric.weight < min) return false;\n\t\t\t\t\t\t\tif (max && fabric.weight > max) return false;\n\t\t\t\t\t    return true;\n\t\t\t\t\t  }\n\t\t\t\t\t};\n\t      }\n\t      \n\t   };\n    \n    \n  }]);\n\n})();","(function () {\n\n  angular\n    .module('bdApp')\n    .directive('genderChooser', genderChooser);\n\t\t\n  function genderChooser () {\n    return {\n      restrict: 'EA',\n      templateUrl: '/directives/choosers/gender-chooser.template.html',\n      controller: 'chooserCtrl as chvm',\n      scope : {\n        step : '=',\n        dataset: '=',\n        active: '='\n      }\n    };\n  }\n\n})();","(function () {\n\n  angular\n    .module('bdApp')\n    .directive('styleChooser', styleChooser);\n\t\t\n  function styleChooser () {\n    return {\n      restrict: 'EA',\n      templateUrl: '/directives/choosers/style-chooser.template.html',\n      controller: 'chooserCtrl as chvm',\n      scope : {\n        step : '=',\n        dataset: '=',\n        active: '='\n      },\n      link: function($scope){\n\t      //Weight Filter\n\t      $scope.checkGenderFilter = function(gender){\n\t\t\t\t\treturn function(style){\n\t\t\t\t\t\treturn (style['images_'+gender] ? true:false);\n\t\t\t\t  }\n\t\t\t\t};\n\t    }\n     \n\n    };\n  }\n\n})();","(function () {\n\n  angular\n    .module('bdApp')\n    .controller('istackCtrl', istackCtrl);\n\n  istackCtrl.$inject = ['$window', '$scope', '$q', 'jean'];\n  \n  \n  \n  function istackCtrl($window, $scope, $q, jean) {\n\t  var isvm = this;\n\t\tisvm.jean = jean;\n\t\tisvm.centerPan = false;\t\t\n\t\tisvm.zoom = false;\n\t\tisvm.pan = {\"x\":50, \"y\":30};\n\t\tisvm.isMobile = function(){ return $window.innerWidth<800 };\n\t\t\n\t\t\n\t\tisvm.toggleZoom = function(){\n\t\t\tisvm.zoom = !isvm.zoom\n\t\t}\n\t\t\n\t\tisvm.touchEnd = function(){\n\t\t\tisvm.dragTracker = {\"x\":0,\"y\":0};\n\t\t\t$scope.$apply();\n\t\t}\n\t\t\n\t\tisvm.returnPan = function(){\n\t\t\tif (isvm.isMobile()) return false;\n\t\t\tisvm.pan = \"50% 30% 0\";\t\n\t\t\tisvm.centerPan = true;\n\t\t\timages = angular.element(document.querySelectorAll(\"#zoom-frame img\"));\n\t\t\tsetTimeout(function(){\n\t\t\t\timages.css({\"transform-origin\":isvm.pan});\n\t\t\t}, 200);\n\t\t}\n\t\t\t\t\n\t\tisvm.touchStart= function(e){\t\n\t\t\t//Setup Swipe starting point\n\t\t\tisvm.swipeStart={\"x\":e.touches[0].clientX,\"y\":e.touches[0].clientY};\n\t\t\t//Clear out Swipe Object\n\t\t\tisvm.swipe={};\n\t\t}\n\t\t\n\t\tisvm.zoomDrag = {\"x\":0,\"y\":0};\n\t  isvm.dragTracker = {\"x\":0,\"y\":0};\n\t\t\n\t\tisvm.touchMove= function(e){\n\t\t\t\n\t\t\tvar images = angular.element(document.querySelectorAll(\"#zoom-frame img\"));\n\t\t\t//Only Drag on mobile\n\t\t\tif (!isvm.isMobile()) return false;\n\t\t\t//Only run function if we're zoomed in\n\t\t\tif (!isvm.zoom) return false;\n\t\t\t//Prevent Scrolling?\n\t\t\te.preventDefault();\n\t\t\t\n\n\t\t\tvar touch = e.touches[0],\n\t\t\ttarget = touch.target,\n\t\t\tdrag = {\n\t\t\t\t\"x\" : touch.clientX-isvm.swipeStart.x,\n\t\t\t\t\"y\" : touch.clientY-isvm.swipeStart.y\n\t\t\t};\n\t\t\t\n\t\t\t//Subtract previous returns of this drag length to get the amount dragged since last return\t\n\t\t\tvar x = drag.x-isvm.dragTracker.x,\n\t\t\ty = drag.y-isvm.dragTracker.y;\n\t\t\n\t\t\t//Get drag % of container for Transform Origin Only \n\t\t\tvar x = (x/target.clientWidth*100)+isvm.zoomDrag.x,      \n\t\t\ty = (y/target.clientHeight*100)+isvm.zoomDrag.y;\n\n\t\t\t//Set up max bounds\n\t\t\tvar bounds={\"y\":{},\"x\":{}}; \n\t\t\tbounds.y.top    = 60;\n\t\t\tbounds.y.bottom = -90;\n\t\t\tbounds.x.left   = -120;\n\t\t\tbounds.x.right  = 90;\n\t\t\t\n\t\t\t//Apply Bounds\t\n\t\t\tif (y>bounds.y.top) y = bounds.y.top;\n\t\t\tif (y<bounds.y.bottom) y = bounds.y.bottom;\n\t\t\tif (x<bounds.x.left) x = bounds.x.left;\n\t\t\tif (x>bounds.x.right) x = bounds.x.right;\n\t\t\t\n\t\t\t//Build Move Objext\t\t\n\t\t\tvar move = {\"x\":x,\"y\":y};\n\t\t\tisvm.zoomDrag = move;\t \t       \n\t        \n\t\t\t//Alter transform origin\n\t\t\tvar pan = -x + \"% \" + -y + \"% 0\";\n\t\t\timages.css({\"transform-origin\":pan});\n\n\t\t\tisvm.dragTracker = drag;\t\n\t\t\t$scope.$apply();\n\n\t\t}\n\t\t\n\n\n\n\t\tisvm.dragPan = function(u, event) {\n\t\t\n\t\t\tconsole.log(event.direction);\n\t\t\t\n\t\t\t\n\t\t\t//Only Drag on mobile\n\t\t\tif (!isvm.isMobile()) return false;\n\t\t\t\n\t\t\t//Only run function if we're zoomed in\n\t\t\tif (!isvm.zoom) return false;\n\t\t\t\n\t\t\tvar images = angular.element(document.querySelectorAll(\"#zoom-frame img\")),\n\t\t\twindowHeight = window.innerHeight,\n\t\t\torigHeight = images[0].height,\n\t\t\tnewHeight = origHeight*1.7,\n\t\t\tframe={\n\t\t\t\t\"width\":event.target.clientWidth,\n\t\t\t\t\"height\":event.target.clientHeight\n\t\t\t};\n\t\t\t\n\n\t\t\t//Get drag length\n\t\t\tvar drag = {\n\t\t\t\t\"x\" : event.deltaX,\n\t\t\t\t\"y\" : event.deltaY\n\t\t\t}\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t//Subtract previous returns of this drag length to get the amount dragged since last return\t\n\t\t\tvar x = drag.x-isvm.dragTracker.x,\n\t\t\ty = drag.y-isvm.dragTracker.y;\n\n\t\t\tconsole.log(x,y);\n\t\t\t\n\t\t\t//Get drag % of container for Transform Origin Only \n\t\t\tvar x = Math.abs(x)/frame.width*100;      \n\t\t\tx = (drag.x<0)?-x:x;\t       \n\t\t\tvar y = Math.abs(y)/frame.height*100;\n\t\t\ty = (drag.y<0)?-y:y;\n\t\t\t\n\t\t\t//Add these values to the last drag. This essentially allows drag and drop\n\t\t\tx=x+isvm.zoomDrag.x;\n\t\t\ty=y+isvm.zoomDrag.y;\n\t\t\t\t \n\t\t\t//Set up max bounds\n\t\t\tvar bounds={\"y\":{},\"x\":{}}; \n\n\t\t\t/*//Left/Right Bounds\n\t\t\tbounds.y.top =(newHeight/2)+175;\n\t\t\tbounds.y.bottom =-(newHeight*.225);\n\t\t\tbounds.x.left = -(event.target.clientWidth-(event.target.clientWidth*.05));\n\t\t\tbounds.x.right = event.target.clientWidth-(event.target.clientWidth*.05);*/\n\t\t\t\t\n\t\t\t//Transform Origin Bounds\n\t\t\tbounds.y.top    = 60;\n\t\t\tbounds.y.bottom = -90;\n\t\t\tbounds.x.left   = -150;\n\t\t\tbounds.x.right  = 60;\n\t\t\t\t\n\t\t\tif (y>bounds.y.top) y = bounds.y.top;\n\t\t\tif (y<bounds.y.bottom) y = bounds.y.bottom;\n\t\t\tif (x<bounds.x.left) x = bounds.x.left;\n\t\t\tif (x>bounds.x.right) x = bounds.x.right;\n\t\t\t\n\t\t\t//Build Move Objext\t\t\n\t\t\tvar move = {\"x\":x,\"y\":y}\n\t\t\t\n\t\t\tconsole.log(move);\n\t\t\t//Register Drag\n\t\t\tisvm.zoomDrag = move;\t \t       \n\t        \n\t       \n\t\t\t//Alter transform origin\n\t\t\tvar pan = -x + \"% \" + -y + \"% 0\";\n\t\t\timages.css({\"transform-origin\":pan});\n\n\t\t\t/*//Alter Left/Bottom\n\t\t\timages.css('left', move.x+\"px\");\n\t\t\timages.css('bottom', -move.y+\"px\");*/\n\t\t\t\n\t\t\t//When drag is over, reset drag tracker\t \n\t\t\tisvm.dragTracker = event.isFinal ? {\"x\":0,\"y\":0} : drag;\n\t\t\t\t \n\n\t\t}\n\t\t\n\n\t\t\n\n\t\t\n\n\t\tisvm.scanImage = function(x,y){\n\n\t\t\tsetTimeout(function(){\n\t\t\t\tisvm.centerPan = false;\n\t\t\t}, 200);\n\t\t\t\n\t\t\t\n\t\t\tframe = angular.element(document.querySelector(\"#zoom-frame\"))[0];\n\t\t\tfWidth = frame.clientWidth;\n\t\t\tfHeight = frame.clientHeight;\n\t\t\trect = frame.getBoundingClientRect();\n\t\t\trootDoc = frame.ownerDocument.documentElement;\n\t\t\t\t//calculate the offset of the frame from the top and left of the document\n\t\t\toffsetT = rect.top + $window.pageYOffset - rootDoc.clientTop\n\t\t\toffsetL = rect.left + $window.pageXOffset - rootDoc.clientLeft\n\n\t\t\t//calculate current cursor position inside the frame, as a percentage\n\t\t\txPosition = ((x - offsetL) / fWidth) * 100\n\t\t\tyPosition = ((y - offsetT) / fHeight) * 100\n\t\t\t\n\t\t\t\n\t\t\t/*\n\t\t\tconsole.log(x,y);\n\t\t\tconsole.log(fWidth);\n\t\t\tconsole.log(offsetL);\n\t\t\tconsole.log(x-offsetL);\n\t\t\tconsole.log(xPosition, yPosition);\n\t\t\t*/\n\t\t\tif ($window.innerWidth < isvm.breakPoint) pan = (100-xPosition) + \"% \" + (100-yPosition) + \"% 0\";\n\t\t\telse pan = (xPosition) + \"% \" + (yPosition) + \"% 0\";\n\t\t\tisvm.pan=pan;\n\t\t\timages = angular.element(document.querySelectorAll(\"#zoom-frame img\"));\n\t\t\timages.css({\"transform-origin\":pan});\n\t\t}\n\t\t\n\t\tisvm.trackMouse = function($event){\n\t\t\t//if (isvm.isMobile()) return false;\n\t\t\tisvm.scanImage($event.pageX,$event.pageY);\n\t\t}\n\n\t\t\t\n  }\n\n})();","(function () {\n\n  angular\n    .module('bdApp')\n    .directive('imageStack', imageStack);\n\t\t\n\n\t\n  function imageStack () {\n    return {\n      restrict: 'AE',\n      templateUrl: '/directives/image-stack/image-stack.template.html',\n      controller: 'istackCtrl as isvm',\n      link: function(scope, ele, attrs, ctrl) {\n\t      \n\t      \n\t     ele.on('touchstart', function(e){\n\t\t\t \tscope.isvm.touchStart(e);\t\n\t     });\t\n\t     \n\t     ele.on('touchmove', function(e){\n\t\t\t \tscope.isvm.touchMove(e);\t\n\t     });\t\t\n\t     \n\t     ele.on('touchend', function(e){\n\t\t\t \tscope.isvm.touchEnd(e);\t\n\t     });\t\t\t\t\n\t\t\t\n       \n\t      /*\n\t      $swipe.bind(ele, {\n          'move': function(event) {\n\t\t\t\t\t\tscope.isvm.scanImage(coords.x,coords.y);\n          }\n\t      });\n\t     */\n\n\t    }\n    };\n    \n  }\n  \n    \n  \n  \n\n})();","(function () {\n\n  angular\n    .module('bdApp')\n    .directive('jeanList', [function() {\n    \t\n\t\t\treturn {\n\t    \t\n\t      restrict: 'EA',\n\t\t\t\ttemplateUrl: '/directives/jean-list/jean-list.template.html',\n\t      scope : {\n\t        jean : '='\n\t      },\n\t      \n\t      link: function($scope){\n\t\t\t\t\n\t      }\n\t      \n\t   };\n    \n    \n  }]);\n\n})();","(function () {\n\n  angular\n    .module('bdApp')\n    .controller('navigationCtrl', navigationCtrl);\n\n  navigationCtrl.$inject = ['$location','$route','popups', 'aws'];\n  function navigationCtrl($location, $route, popups, aws) {\n    var vm = this;\n\t\t\n\n\t\tvm.isLoggedIn = null;\n\t\taws.getCurrentUserFromLocalStorage().then(\n\t\t\tfunction(result){\n\t\t\t\tif (result.accessToken != \"\") vm.isLoggedIn = true;\n\t\t\t},\n\t\t\tfunction(err){\n\t\t\t\tconsole.log(err);\n\t\t\t\tvm.isLoggedIn = false;\n\t\t\t}\n\t\t);\n\t\t\n\t\t\n\t\t//vm.isAdmin = accountManagement.isAdmin();\n    //vm.currentUser = accountManagement.currentUser();\n\t\t\n\t\tvm.drops={};\n\t\tvm.drops.acct=false;\n\t\tvm.mobileMenu = false;\n\t\t\n\t\tvm.logout = function(){\n\t\t\taws.signCurrentUserOut();\n\t\t\tif ($location.path() == \"/\")\n\t\t\t\t$route.reload();\n\t\t}\n  }\n\n})();","(function () {\n\n  angular\n    .module('bdApp')\n    .directive('navigation', navigation);\n\n  function navigation () {\n    return {\n      restrict: 'EA',\n      templateUrl: '/directives/navigation/navigation.template.html',\n      controller: 'navigationCtrl as navvm'\n    };\n  }\n\n})();","(function () {\n\n  angular\n    .module('bdApp')\n    .controller('sliderCtrl', sliderCtrl)\n\t\n\t\tsliderCtrl.$inject = ['$scope', 'preloader'];\n\n\t\tfunction sliderCtrl($scope, preloader) {\n\t\t\tvar slvm = this;\n\n\t\t\t\n\t\t\t$scope.imagesLoaded = false;\n\t\t\t\n\t\t\tpreloader.preloadImages( $scope.slides )\n\t\t\t.then(function() {\n\t\t\t\t$scope.imagesLoaded = true;\n\t\t\t},\n\t\t\tfunction() {\n\t\t\t\tconsole.log(\"error loading imgaes...\");\n\t\t\t});\n\t\t \t\t\t\t\n\t\t\t\t\n\t\t\t\n\t\t\t$scope.currentIndex = 0;\n\t\t\t\n\t\t\t$scope.setCurrentSlideIndex = function (index) {\n\t\t\t  $scope.currentIndex = index;\n\t\t\t};\n\t\t\t\n\t\t\t$scope.isCurrentSlideIndex = function (index) {\n\t\t\t  return $scope.currentIndex === index;\n\t\t\t};\n\t\t\t\n\t\t\t$scope.nextSlide = function () {\n\t\t\t  $scope.currentIndex = ($scope.currentIndex < $scope.slides.length - 1) ? ++$scope.currentIndex : 0;\n\t\t\t};\n\t\t\t\n\t\t\t$scope.prevSlide = function () {\n\t\t\t  $scope.currentIndex = ($scope.currentIndex > 0) ? --$scope.currentIndex : $scope.slides.length - 1;\n\t\t\t};\n\t\t\t\t\n\t\t}\n\n})();","(function () {\n\n  angular\n    .module('bdApp')\n    .directive('slider', slider);\n\t\t\n  function slider () {\n    return {\n      restrict: 'EA',\n      templateUrl: '/directives/slider/slider.template.html',\n      controller: 'sliderCtrl as slvm',\n      scope : {\n        slides : '=',\n        imageClick : '&'\n      }\n    };\n  }\n\n})();","(function () {\n\n  angular\n    .module('bdApp')\n    .controller('registerCtrl', registerCtrl);\n\n  registerCtrl.$inject = ['$location', 'aws', '$sce'];\n  function registerCtrl($location, aws, $sce) {\n    var vm = this;\n\n    vm.credentials = {\n      name : \"\",\n      email : \"\",\n      password : \"\"\n    };\n\t\n\t\tvm.formStep = 1;\n\t    \n    vm.messages = {\n\t\t\tmessage : \"\",\n\t\t\ttype: \"\",\n\t\t\tset: function(message, type){\n\t\t\t\tvm.messages.message = message;\n\t\t\t\tvm.messages.type = type;\n\t\t\t},\n\t\t\treset: function(){\n\t\t\t\tvm.messages.message = \"\";\n\t\t\t\tvm.messages.type = \"\";\n\t\t\t}\n\t\t}\n\t\t\n\t\tvm.setMessage = function(message, type){\n\t\t\tvm.messages.message = message;\n\t\t\tvm.messages.type = type;\n\t\t}\n\t\t\n\t\tvm.resetMessage = function(){\n\t\t\tvm.messages.message = \"\";\n\t\t\tvm.messages.type = \"\";\n\t\t}\n\t\t\n\t\t\n\t\t//Register User\n    vm.registerUser = function () {\n\t    vm.messages.reset();\n      aws.signupForApplication(vm.credentials.email, vm.credentials.password).then(\n      \tfunction(){\n\t\t\t\t\tvm.formStep = 2;\t      \t\n\t      },   \n\t      function(err){\n\t\t\t    vm.messages.set(err.message, \"error\");\n\t\t    }\n\t\t  );\n    };\n    \t\t\t\t\t\n\t\t//Confirm User with Registration Code\t\t\t\t\n    vm.confirmUser = function() {\n\t\t\tvm.resetMessage();\n\t\t\taws.confirmRegisteredUnauthenticatedUser(vm.credentials.email, vm.credentials.code).then(\n      \tfunction(result){\n\t\t\t\t\tvm.setMessage($sce.trustAsHtml(\"Your Account has been confirmed. <a href='/login'>Click here to login</a>\"), \"success\");\n\t      },   \n\t      function(err){\n\t\t\t    vm.setMessage(err.message, \"error\");\n\t\t    }\n\t\t  );\n    };\n    \n    //Resend Registration code to user via email\n    vm.resendCode = function(){\n\t    //This function throws an error in the SDK and no result... cannot implement promise for now\n\t    aws.resendConfirmationCode(vm.credentials.email);\n\t    //We're going to show a success message no matter what\n\t    //TODO: Implement corrected SDK and promise structure for this functino\n\t    vm.setMessage(\"A new confirmation code has been sent to \"+vm.credentials.email+\". Enter the code above to confirm your account\", \"success\");\n    };\n\n  }\n\n})();","(function () {\n\n  angular\n  .module('bdApp')\n  .controller('loginCtrl', loginCtrl);\n\n  loginCtrl.$inject = ['$location', 'aws'];\n  function loginCtrl($location, aws) {\n    var vm = this;\n\t\t\n\t\tvm.credentials = {\n      name : \"\",\n      email : \"\",\n      password : \"\"\n    };\n\t  \n\t  vm.messages = {\n\t\t\tmessage : \"\",\n\t\t\ttype: \"\",\n\t\t\tset: function(message, type){\n\t\t\t\tvm.messages.message = message;\n\t\t\t\tvm.messages.type = type;\n\t\t\t},\n\t\t\treset:function(){\n\t\t\t\tvm.messages.message = \"\";\n\t\t\t\tvm.messages.type = \"\";\n\t\t\t}\n\t\t}\n\t\t\n\n\t\t//aws.getCurrentUserFromLocalStorage();\n\t\t\n\t\tvm.login = function(email, password){\n\t\t\taws.authenticateCognitoUser(email,password).then(\n\t\t\t\tfunction(result){\n\t\t\t\t\t$location.path('/closet');\n\t\t\t\t},\n\t\t\t\tfunction(err){\n\t\t\t\t\tvm.messages.set(err.message,\"error\");\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t\t\n\t\tvm.loginFB = function(){\n\t\t\taws.authenticateViaFB().then(\n\t\t\t\tfunction(result){\n\t\t\t\t\t$location.path('/closet');\n\t\t\t\t},\n\t\t\t\tfunction(err){\n\t\t\t\t\tvm.messages.set(err.message,\"error\");\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\n    vm.onSubmit = function () {\n\t    vm.errors.message = \"\";\n      authentication\n        .login(vm.credentials)\n        .error(function(err){\n          console.log(err);\n          vm.errors.message = err.message;\n        })\n        .then(function(){\n          $location.path('closet');\n        });\n    };\n    \n        /*\n\t    \n\t     aws.checkUserForConfirmation(vm.credentials.email);\n\t\t\t      //Check to see if user is already confirmed\n\t\t\t      \n\t\t\t      vm.setMessage(\"We already have an unconfirmed user associated with this email address. Please check your email for the confirmation code or use the link above to resend.\", \"warning\");\n\t\t\t      vm.formStep = 2;\n\t\t\t      \n\t\t\t      vm.setMessage(err.message, \"error\");\n\t\t      }else{\n\t\t\t      \n\t\t\t      */\n\n  }\n\n})();"]}