!function(){function e(e,r){e.when("/",{templateUrl:"/pages/home/home.view.html",controller:"homeCtrl",controllerAs:"vm"}).when("/register",{templateUrl:"/pages/auth/register/register.view.html",controller:"registerCtrl",controllerAs:"vm"}).when("/login",{templateUrl:"/pages/auth/login/login.view.html",controller:"loginCtrl",controllerAs:"vm"}).when("/closet",{templateUrl:"/pages/closet/closet.view.html",controller:"closetCtrl",controllerAs:"vm"}).when("/order",{templateUrl:"/pages/order/order.view.html",controller:"orderCtrl",controllerAs:"vm"}).when("/customizer/:jean_id?/:action?",{templateUrl:"/pages/customizer/customizer.view.html",controller:"customizerCtrl",controllerAs:"vm"}).when("/admin",{templateUrl:"/pages/admin/admin.view.html",controller:"adminCtrl",controllerAs:"vm"}).otherwise({redirectTo:"/"}),r.html5Mode(!0)}function r(e,r,t,o,n){e.$on("$routeChangeStart",function(e,n,l){var i=["/closet","/order"];i.indexOf(r.path())>=0&&!t.isLoggedIn()&&r.path("/login"),r.path().indexOf("/order")>=0&&!Object.keys(o.data).length&&r.path("/customizer")})}angular.module("bdApp",["ngRoute","ngAnimate","ngSanitize","ngCookies","angular-gestures"]),angular.module("bdApp").config(["$routeProvider","$locationProvider",e]).run(["$rootScope","$location","aws","jean","popups",r]).filter("spaceless",function(){return function(e){if(e)return e.replace(/\s+/g,"-")}}).filter("scoreToSpace",function(){return function(e){if(e)return e.replace(/_+/g," ")}}).filter("minMax",function(e,r,t){return function(o){return!(e&&o[t]<e)&&!(r&&o[t]>r)}}).filter("displayName",function(){return function(e){return!!e&&e.replace(/Raw Denim/g,"")}})}();

!function(){function o(o,n){console.log("init"),isLoggedIn=n.localStorage.isLoggedIn;var e=function(){console.log("somone ran setup"),o.getCurrentUserFromLocalStorage().then(function(o){if(console.log("we have one"),""!=o.accessToken);},function(o){console.log(o)})};return e(),{isLoggedIn:isLoggedIn,setUpUser:e}}angular.module("bdApp").service("account",o),o.$inject=["aws","$window"]}();
!function(){function n(n,o,e,t){var a=function(n){o.localStorage["mean-token"]=n},i=function(){return o.localStorage["mean-token"]},r=function(){var n,e=i();return!!e&&(n=e.split(".")[1],n=o.atob(n),n=JSON.parse(n),n.exp>Date.now()/1e3)},l=function(){if(r()){var n=i();console.log(n);var e=n.split(".")[1];return e=o.atob(e),e=JSON.parse(e),{email:e.email,name:e.name}}},u=function(){if(r()){var n=i(),e=n.split(".")[1];e=o.atob(e),e=JSON.parse(e),console.log(e);var t=e.permissions;return t.indexOf("admin")!==-1}},s=function(n){};return login=function(n){e.authenticateCognitoUser(n,password)},logout=function(){o.localStorage.removeItem("mean-token")},{isAdmin:u,currentUser:l,saveToken:a,getToken:i,isLoggedIn:r,register:s,login:login,logout:logout}}angular.module("bdApp").service("authentication",n),n.$inject=["$http","$window","aws","$q"]}();
!function(){function e(e,t,n,o){function r(){var e={UserPoolId:o.USER_POOL_ID,ClientId:o.CLIENT_ID},t=new AWSCognito.CognitoIdentityServiceProvider.CognitoUserPool(e);return t}function s(e,t){var n={Username:e,Password:t},o=new AWSCognito.CognitoIdentityServiceProvider.AuthenticationDetails(n);return o}function a(e,t){var n={Username:e,Pool:t},o=new AWSCognito.CognitoIdentityServiceProvider.CognitoUser(n);return o}function u(e,t){var n={Name:e,Value:t},o=new AWSCognito.CognitoIdentityServiceProvider.CognitoUserAttribute(n);return o}function c(e,t){var n,o=[];for(var r in t)n=e(r,t[r]),o.push(n);return o}function l(e){logins={};var t="cognito-idp."+o.REGION+".amazonaws.com/"+o.USER_POOL_ID;return logins[t]=e,AWS.config.update({region:o.REGION}),AWS.config.credentials=new AWS.CognitoIdentityCredentials({IdentityPoolId:o.IDENTITY_POOL_ID,Logins:logins}),AWS.config.credentials.getPromise()}return getUserFromLocalStorage=function(e){var t=a(e,r());null!=t&&t.getSession(function(e,t){return e?void alert(e):void console.log("session validity: "+t.isValid())})},deleteCognitoUser=function(){var e=r().getCurrentUser();e.deleteUser(function(e,t){return e?void alert(e):void console.log("call result: "+t)})},authenticateViaFB=function(){var e=n.defer();return FB.login(function(t){t.authResponse?(AWS.config.credentials=new AWS.CognitoIdentityCredentials({IdentityPoolId:o.IDENTITY_POOL_ID,Logins:{"graph.facebook.com":t.authResponse.accessToken}}),e.resolve()):e.reject("There was a problem logging in with Facebook.")}),e.promise},authenticateCognitoUser=function(e,o){var i=s(e,o),u=a(e,r()),c=n.defer();return u.authenticateUser(i,{onSuccess:function(e){c.resolve(e),t.localStorage.isLoggedIn=!0},onFailure:function(e){c.reject(e)},newPasswordRequired:function(e,t){console.log(e,t)}}),c.promise},signupForApplication=function(e,t){var o=n.defer(),i=c(u,{email:e});return r().signUp(e,t,i,null,function(e,t){e?o.reject(e):o.resolve(t)}),o.promise},updateAttributesOnUser=function(e,t){var n=c(u,t),o=a(e,r());o.updateAttributes(n,function(e,t){return e?void alert(e):void console.log("call result: "+t)})},deleteUserAttributes=function(e,t){e.deleteAttributes(t,function(e,t){return e?void alert(e):void console.log("call result: "+t)})},verifyUserAttribute=function(e,t){e.getAttributeVerificationCode(t,{onSuccess:function(e){console.log("call result: "+e)},onFailure:function(e){alert(e)},inputVerificationCode:function(){var n=prompt("Please input verification code: ","");e.verifyAttribute(t,n,this)}})},retrieveUserAttributes=function(e){e.getUserAttributes(function(e,t){if(e)return void alert(e);for(i=0;i<t.length;i++)console.log("attribute "+t[i].getName()+" has value "+t[i].getValue())})},resendConfirmationCode=function(e){e.resendConfirmationCode||(e=a(e,r())),e.resendConfirmationCode(function(e,t){return!e||void console.log(e)})},confirmRegistration=function(e,t){e.confirmRegistration(t,!0,function(e,t){return e?void alert(e):void alert(t)})},changePassword=function(e,t,n){e.changePassword(t,n,function(e,t){return e?void alert(e):void console.log("call result: "+t)})},forgotPasswordFlow=function(e){e.forgotPassword({onSuccess:function(e){console.log("call result: "+e)},onFailure:function(e){alert(e)},inputVerificationCode:function(){var t=prompt("Please input verification code ",""),n=prompt("Enter new password ","");e.confirmPassword(t,n,this)}})},deleteUser=function(e){e.deleteUser(function(e,t){return e?void alert(e):void console.log("call result: "+t)})},signUserOut=function(e){null!=e&&e.signOut()},signCurrentUserOut=function(){var e=r().getCurrentUser();null!=e&&(e.signOut(),t.localStorage.isLoggedIn=!1)},signUserOutGlobally=function(e){t.localStorage.isLoggedIn=!1,e.globalSignOut()},getCurrentUserFromLocalStorage=function(){var e=r().getCurrentUser();return null!=e?e.getSession(function(e,t){return e?(console.log(e),!1):t}):(console.log("You are not logged in"),!1)},isLoggedIn=function(){var e=r().getCurrentUser();return!!e},agetCurrentUserFromLocalStorage=function(){var e=r().getCurrentUser();return null!=e&&void e.getSession(function(e,t){return!e&&(AWS.config.credentials=new AWS.CognitoIdentityCredentials({IdentityPoolId:o.IDENTITY_POOL_ID}),t)})},confirmRegisteredUnauthenticatedUser=function(e,t){var o=a(e,r()),i=n.defer();return o.confirmRegistration(t,!0,function(e,t){e?i.reject(e):i.resolve(t)}),i.promise},changePassword=function(e,t,n){e.changePassword(t,n,function(e,t){return e?void alert(e):void console.log("call result: "+t)})},saveImageTos3=function(e,t){function r(e){for(var t=atob(e.split(",")[1]),n=[],o=0;o<t.length;o++)n.push(t.charCodeAt(o));return new Blob([new Uint8Array(n)],{type:"image/jpeg"})}var i=n.defer();return l(t.idToken.jwtToken).then(function(){var t=r(e),n="blue-delta-api-development-stack-userdatabucket-12z57hiicf3xy",s=new AWS.S3({region:o.REGION,params:{Bucket:n}}),a={Key:AWS.config.credentials.identityId+"/myfilename.png",Body:t};s.upload(a,function(e,t){e?i.reject(e):i.resolve(t.Location)})},function(e){i.reject(e)}),i.promise},{authenticateViaFB:authenticateViaFB,getUserFromLocalStorage:getUserFromLocalStorage,deleteCognitoUser:deleteCognitoUser,authenticateCognitoUser:authenticateCognitoUser,signupForApplication:signupForApplication,updateAttributesOnUser:updateAttributesOnUser,deleteUserAttributes:deleteUserAttributes,verifyUserAttribute:verifyUserAttribute,retrieveUserAttributes:retrieveUserAttributes,resendConfirmationCode:resendConfirmationCode,confirmRegistration:confirmRegistration,changePassword:changePassword,forgotPasswordFlow:forgotPasswordFlow,deleteUser:deleteUser,signUserOut:signUserOut,signUserOutGlobally:signUserOutGlobally,getCurrentUserFromLocalStorage:getCurrentUserFromLocalStorage,confirmRegisteredUnauthenticatedUser:confirmRegisteredUnauthenticatedUser,signCurrentUserOut:signCurrentUserOut,saveImageTos3:saveImageTos3,isLoggedIn:isLoggedIn}}angular.module("bdApp").service("aws",e),e.$inject=["$http","$window","$q","AWSConfig"]}();
!function(){function t(t,e,a,n){t._thirdParty=t._thirdParty||{},t._thirdParty.BlueDeltaApi=new API.Client.DefaultApi(angular.injector(["ng"]).get("$http"),angular.injector(["ng"]).get("$httpParamSerializer"),angular.injector(["ng"]));var r=t._thirdParty.BlueDeltaApi;for(r.jsonData={},setupJsonData=function(t){e.get("/data/"+t+".json").then(function(e){r.jsonData[t]=e.data})},jsonDataKeys=["chris-jeans","profile","styles","threads","buttons","fabrics","genders","tailors"],d=0;d<jsonDataKeys.length;d++)setupJsonData(jsonDataKeys[d]);return r.jeanKeyToDataKey=function(t){var e=!1;switch(!0){case t.indexOf("thread")>-1:e="threads";break;case"gender"==t||"style"==t||"fabric"==t:e=t+"s"}return e},r.dataLookup=function(t,e,a){if(a=a||null,"undefined"==typeof t||"undefined"==typeof e)return!1;var i=r.jsonData[t];return dataById=n("filter")(i,{id:e}),"undefined"!=typeof dataById&&(selected=dataById[0],a?selected[a]:selected)},r}angular.module("bdApp").service("bdAPI",t),t.$inject=["$window","$http","$httpParamSerializer","$filter"]}();
!function(){function e(){return{REGION:"us-east-1",PROFILE_IMAGES_S3_BUCKET:"blue-delta-api-development-stack-userdatabucket-12z57hiicf3xy",API_ENDPOINT:"https://kd6f1omjzc.execute-api.us-east-1.amazonaws.com/development",USER_POOL_ID:"us-east-1_UvVeNoe5z",CLIENT_ID:"6hdrpk1j20qmjhfdiga31uia80",IDENTITY_POOL_ID:"us-east-1:60250bd7-bc76-4ab7-8813-2369461cb881"}}angular.module("bdApp").service("AWSConfig",e)}();
!function(){function t(t,n){var e=function(){return t.get("/api/options",{headers:{Authorization:"Bearer "+n.getToken()}})},a=function(n,e){t.get("/data/chris-jeans.json").then(function(t){t.data;for(j=0;j<t.data.length;j++)if(t.data[j].id==n){console.log("jean found");var a=t.data[j]}e(a)})},r=function(n){return t.get("/data/chris-jeans.json")},o=function(){return t.get("/data/profile.json")},i=function(){return t.get("/data/styles.json")},s=function(){return t.get("/data/threads.json")},u=function(){return t.get("/data/buttons.json")},d=function(){return t.get("/data/fabrics.json")},g=function(){return t.get("/data/genders.json")};return{getJeanById:a,getJeansByUser:r,getProfile:o,getOptions:e,getStyles:i,getThreads:s,getHardware:u,getFabrics:d,getGenders:g}}angular.module("bdApp").service("meanData",t),t.$inject=["$http","authentication"]}();
!function(){function t(t,a){function e(t){switch(t){case"g":return"gender";case"s":return"style";case"f":return"fabric";case"tt":return"top_thread";case"tb":return"bottom_thread";case"ta":return"accent_thread";default:return!1}}data={},set=function(t,a){this.data[t]=a,this.saved=!1},createNew=function(t){t&&t.constructor==Object?this.data={title:"Copy of "+t.data.title,gender:t.data.gender,style:t.data.style,fabric:t.data.fabric,accent_thread:t.data.accent_thread,top_thread:t.data.top_thread,bottom_thread:t.data.bottom_thread,id:Math.floor(1e9*Math.random())}:(this.data={gender:1,style:1,fabric:"1004",accent_thread:"1",top_thread:"1",bottom_thread:"1",id:Math.floor(1e9*Math.random())},this.saved=!1)};var r=function(){if(t.jean_id&&"copy"==t.action)if(t.jean_id.indexOf(":")>0){this.createNew(),jeanData=t.jean_id.split(":");for(var r=0;r<jeanData.length;r++){var n=jeanData[r].match(/([A-Za-z]+)([0-9]+)/);if(n){var d=e(n[1]);d&&(this.data[d]=parseInt(n[2]))}}}else this.createNew(t.jean_id);else t.jean_id&&!t.action?a.jsonData.getJeanById(t.jean_id,function(t){t?this.data=t:this.createNew()}):0===Object.keys(this.data).length&&this.data.constructor===Object&&this.createNew();return this.data},n=function(){return this.data},d=function(t){console.log("saving jean...")};return{save:d,get:n,setup:r,data:data,set:set,createNew:createNew}}angular.module("bdApp").service("jean",["$routeParams","bdAPI",t])}();
!function(){function t(t,e,a){for(data={},setupJsonData=function(e){t.get("/data/"+e+".json").then(function(t){data[e]=t.data})},jsonDataKeys=["jeansList","profile","styles","threads","buttons","fabrics","genders","tailors"],d=0;d<jsonDataKeys.length;d++)setupJsonData(jsonDataKeys[d]);var n=function(t){var e=!1;switch(!0){case t.indexOf("thread")>-1:e="threads";break;case"gender"==t||"style"==t||"fabric"==t:e=t+"s"}return e},s=function(t,a,d){if(d=d||null,"undefined"==typeof t||"undefined"==typeof a)return!1;var s=n(t),o=data[s];return dataById=e("filter")(o,{id:a}),"undefined"!=typeof dataById&&(selected=dataById[0],d?selected[d]:selected)},o=function(t,e){console.log(data.jeansList),e()};return{getData:function(){return data},jeanKeyToDataKey:n,dataLookup:s,getJeanById:o}}angular.module("bdApp").service("jsonData",t),t.$inject=["$http","$filter","$timeout"]}();
!function(){function e(){var e={message:"",type:""},n=function(n,t){e.message=n,e.type=t},t=function(){e.message="",e.type=""},s=function(){return e};return{get:s,set:n,reset:t}}angular.module("bdApp").service("messages",e)}();
!function(){function n(n){var o={},r=function(){for(var n in o)o.hasOwnProperty(n)&&(o[n]=!1)},e=function(r,e){if(o[r]){var e=e||o[r];o[r]=e}else o[r]=!0,n.$broadcast("popupChange")},t=function(){return o};return{get:t,set:e,closeAll:r}}angular.module("bdApp").service("popups",["$rootScope",n])}();
function preloaderFunc(t,e){function i(e){this.imageLocations=e,this.imageCount=this.imageLocations.length,this.loadCount=0,this.errorCount=0,this.states={PENDING:1,LOADING:2,RESOLVED:3,REJECTED:4},this.state=this.states.PENDING,this.deferred=t.defer(),this.promise=this.deferred.promise}return i.preloadImages=function(t){var e=new i(t);return e.load()},i.prototype={constructor:i,isInitiated:function(){return this.state!==this.states.PENDING},isRejected:function(){return this.state===this.states.REJECTED},isResolved:function(){return this.state===this.states.RESOLVED},load:function(){if(this.isInitiated())return this.promise;this.state=this.states.LOADING;for(var t=0;t<this.imageCount;t++)this.loadImageLocation(this.imageLocations[t]);return this.promise},handleImageError:function(t){this.errorCount++,this.isRejected()||(this.state=this.states.REJECTED,this.deferred.reject(t))},handleImageLoad:function(t){this.loadCount++,this.isRejected()||(this.deferred.notify({percent:Math.ceil(this.loadCount/this.imageCount*100),imageLocation:t}),this.loadCount===this.imageCount&&(this.state=this.states.RESOLVED,this.deferred.resolve(this.imageLocations)))},loadImageLocation:function(t){var i=this,s=angular.element(new Image).bind("load",function(t){e.$apply(function(){i.handleImageLoad(t.target.src),i=s=t=null})}).bind("error",function(t){e.$apply(function(){i.handleImageError(t.target.src),i=s=t=null})}).attr("src",t)}},i}angular.module("bdApp").factory("preloader",preloaderFunc),preloaderFunc.$inject=["$q","$rootScope"];

!function(){function t(t,e,o,r){var n=this;n.jean=r,n.centerPan=!1,n.zoom=!1,n.pan={x:50,y:30},n.isMobile=function(){return t.innerWidth<800},n.toggleZoom=function(){n.zoom=!n.zoom},n.touchEnd=function(){n.dragTracker={x:0,y:0},e.$apply()},n.returnPan=function(){return!n.isMobile()&&(n.pan="50% 30% 0",n.centerPan=!0,images=angular.element(document.querySelectorAll("#zoom-frame img")),void setTimeout(function(){images.css({"transform-origin":n.pan})},200))},n.touchStart=function(t){n.swipeStart={x:t.touches[0].clientX,y:t.touches[0].clientY},n.swipe={}},n.zoomDrag={x:0,y:0},n.dragTracker={x:0,y:0},n.touchMove=function(t){var o=angular.element(document.querySelectorAll("#zoom-frame img"));if(!n.isMobile())return!1;if(!n.zoom)return!1;t.preventDefault();var r=t.touches[0],i=r.target,a={x:r.clientX-n.swipeStart.x,y:r.clientY-n.swipeStart.y},c=a.x-n.dragTracker.x,l=a.y-n.dragTracker.y,c=c/i.clientWidth*100+n.zoomDrag.x,l=l/i.clientHeight*100+n.zoomDrag.y,g={y:{},x:{}};g.y.top=60,g.y.bottom=-90,g.x.left=-120,g.x.right=90,l>g.y.top&&(l=g.y.top),l<g.y.bottom&&(l=g.y.bottom),c<g.x.left&&(c=g.x.left),c>g.x.right&&(c=g.x.right);var m={x:c,y:l};n.zoomDrag=m;var f=-c+"% "+-l+"% 0";o.css({"transform-origin":f}),n.dragTracker=a,e.$apply()},n.dragPan=function(t,e){if(console.log(e.direction),!n.isMobile())return!1;if(!n.zoom)return!1;var o=angular.element(document.querySelectorAll("#zoom-frame img")),r=(window.innerHeight,o[0].height,{width:e.target.clientWidth,height:e.target.clientHeight}),i={x:e.deltaX,y:e.deltaY},a=i.x-n.dragTracker.x,c=i.y-n.dragTracker.y;console.log(a,c);var a=Math.abs(a)/r.width*100;a=i.x<0?-a:a;var c=Math.abs(c)/r.height*100;c=i.y<0?-c:c,a+=n.zoomDrag.x,c+=n.zoomDrag.y;var l={y:{},x:{}};l.y.top=60,l.y.bottom=-90,l.x.left=-150,l.x.right=60,c>l.y.top&&(c=l.y.top),c<l.y.bottom&&(c=l.y.bottom),a<l.x.left&&(a=l.x.left),a>l.x.right&&(a=l.x.right);var g={x:a,y:c};console.log(g),n.zoomDrag=g;var m=-a+"% "+-c+"% 0";o.css({"transform-origin":m}),n.dragTracker=e.isFinal?{x:0,y:0}:i},n.scanImage=function(e,o){setTimeout(function(){n.centerPan=!1},200),frame=angular.element(document.querySelector("#zoom-frame"))[0],fWidth=frame.clientWidth,fHeight=frame.clientHeight,rect=frame.getBoundingClientRect(),rootDoc=frame.ownerDocument.documentElement,offsetT=rect.top+t.pageYOffset-rootDoc.clientTop,offsetL=rect.left+t.pageXOffset-rootDoc.clientLeft,xPosition=(e-offsetL)/fWidth*100,yPosition=(o-offsetT)/fHeight*100,t.innerWidth<n.breakPoint?pan=100-xPosition+"% "+(100-yPosition)+"% 0":pan=xPosition+"% "+yPosition+"% 0",n.pan=pan,images=angular.element(document.querySelectorAll("#zoom-frame img")),images.css({"transform-origin":pan})},n.trackMouse=function(t){n.scanImage(t.pageX,t.pageY)}}angular.module("bdApp").controller("istackCtrl",t),t.$inject=["$window","$scope","$q","jean"]}();
!function(){function t(){return{restrict:"AE",templateUrl:"/directives/image-stack/image-stack.template.html",controller:"istackCtrl as isvm",link:function(t,n,c,i){n.on("touchstart",function(n){t.isvm.touchStart(n)}),n.on("touchmove",function(n){t.isvm.touchMove(n)}),n.on("touchend",function(n){t.isvm.touchEnd(n)})}}}angular.module("bdApp").directive("imageStack",t)}();
!function(){angular.module("bdApp").directive("jeanList",["jsonData",function(t){return{restrict:"EA",templateUrl:"/directives/jean-list/jean-list.template.html",scope:{jean:"=",fields:"=?"},link:function(e){e.data=t.getData(),e.dataLookup=t.dataLookup;var a=["fabric","accent_thread","top_thread","bottom_thread","gender","style"];e.fields=e.fields||a,e.filterFields=function(t){matches={};for(var a in t)t.hasOwnProperty(a)&&e.fields.indexOf(a)>=0&&(matches[a]=t[a]);return matches}}}}])}();
!function(){function e(e,t,o,r,l,n){function a(e,t,o){e=e[0],t=t-e.offsetWidth/2+40;var r=e.scrollWidth-e.offsetWidth;t>=r&&(t=r-1),t==r&&(t=r-1);var l=Math.ceil(o/15),n=t-e.scrollLeft,a=n/l,c=e.scrollLeft<t?function(e,t){return e<=t-1}:function(e,t){return e>=t+1},s=setInterval(function(){if(c(e.scrollLeft,t)){var o=e.scrollLeft+a;o>=r&&(o=r-1),e.scrollLeft=o}else clearInterval(s)},15)}var c=this;c.popups=n.get(),c.jean=l,c.breakPoint=800,c.selectorCoords={top:0,left:0},e.$watch("active",function(l,n){1==l&&o(function(){var o=e.step.jeanKey+"_"+c.jean.data[e.step.jeanKey],l=angular.element(document.querySelector("#"+o));c.selectorCoords.top=l.prop("offsetTop"),c.selectorCoords.left=l.prop("offsetLeft");var n=angular.element(document.querySelector("#"+e.step.jeanKey+"-selector"));if(n.css({top:c.selectorCoords.top+"px",left:c.selectorCoords.left+"px"}),r.innerWidth<c.breakPoint){var a=angular.element(t[0].querySelector(".chooser-grid")),s=a[0]?c.selectorCoords.left-a[0].offsetWidth/2+40:0;a.prop("scrollLeft",s)}else{var a=angular.element(t[0]);a.prop("scrollTop",c.selectorCoords.top-15)}},200)}),c.selectAttr=function(e,t,l,n){var s=angular.element(document.querySelector("#"+l+"-chooser")),n=angular.element(document.querySelector("#"+l+"-selector")),f=angular.element(e.target).prop("offsetTop"),p=angular.element(e.target).prop("offsetLeft"),u=angular.element(document.querySelectorAll("#item-title"));u.css({right:"-400px",opacity:0}),n.css({top:f+"px",left:p+"px"}),c.selectorCoords={top:f,left:p},r.innerWidth<c.breakPoint&&a(s,p,200),o(function(){u.css({right:"15px",opacity:1}),c.jean.data[l]=t},200)},c.jeanSet=function(e,t){c.jean.data[e]=t}}angular.module("bdApp").controller("chooserCtrl",e),e.$inject=["$scope","$element","$timeout","$window","jean","popups"]}();
!function(){function e(){return{restrict:"EA",templateUrl:"/directives/choosers/chooser.template.html",controller:"chooserCtrl as chvm",scope:{step:"=",dataset:"=",active:"="}}}angular.module("bdApp").directive("chooser",e)}();
!function(){angular.module("bdApp").directive("fabricChooser",["$window",function(e){return{restrict:"EA",template:'<div class="fabric-chooser-container" ng-include="viewUrl"></div>',controller:"chooserCtrl as chvm",scope:{step:"=",dataset:"=",active:"="},link:function(i){function t(){var t=e.innerWidth;t<i.breakPoint?i.viewUrl="/directives/choosers/fabric-chooser.template-mobile.html":t>=i.breakPoint&&(i.viewUrl="/directives/choosers/fabric-chooser.template-desk.html")}i.breakPoint=800,e.onresize=function(){t(),i.$apply()},t(),i.weightFilter=function(e,i){return function(t){return!(e&&t.weight<e)&&!(i&&t.weight>i)}}}}}])}();
!function(){function e(){return{restrict:"EA",templateUrl:"/directives/choosers/gender-chooser.template.html",controller:"chooserCtrl as chvm",scope:{step:"=",dataset:"=",active:"="}}}angular.module("bdApp").directive("genderChooser",e)}();
!function(){function e(){return{restrict:"EA",templateUrl:"/directives/choosers/style-chooser.template.html",controller:"chooserCtrl as chvm",scope:{step:"=",dataset:"=",active:"="},link:function(e){e.checkGenderFilter=function(e){return function(t){return!!t["images_"+e]}}}}}angular.module("bdApp").directive("styleChooser",e)}();
!function(){const e={REGION:"us-east-1",PROFILE_IMAGES_S3_BUCKET:"blue-delta-api-development-stack-userdatabucket-12z57hiicf3xy",API_ENDPOINT:"https://kd6f1omjzc.execute-api.us-east-1.amazonaws.com/development",USER_POOL_ID:"us-east-1_UvVeNoe5z",CLIENT_ID:"6hdrpk1j20qmjhfdiga31uia80",IDENTITY_POOL_ID:"us-east-1:60250bd7-bc76-4ab7-8813-2369461cb881"};return e}();
!function(){function o(o,n,t,r,a){var e=this;e.drops={},e.drops.acct=!1,e.mobileMenu=!1,e.isLoggedIn=JSON.parse(a.localStorage.isLoggedIn),e.logout=function(){r.signCurrentUserOut(),"/"==o.path()&&n.reload()}}angular.module("bdApp").controller("navigationCtrl",o),o.$inject=["$location","$route","popups","aws","$window"]}();
!function(){function t(){return{restrict:"EA",templateUrl:"/directives/navigation/navigation.template.html",controller:"navigationCtrl as navvm"}}angular.module("bdApp").directive("navigation",t)}();
!function(){function t(t){function e(t){switch(t){case"gender":return"g";case"style":return"s";case"fabric":return"f";case"top_thread":return"tt";case"bottom_thread":return"tb";case"accent_thread":return"ta";default:return!1}}var r=this;r.jean=t,r.jeanToUrl=function(){var t=document.location.origin+"/customizer/d";for(var n in r.jean.data)if(r.jean.data.hasOwnProperty(n)){var a=e(n);a&&(t+=":"+a+r.jean.data[n])}return t+="/copy"};var n={},a="Check out my custom jeans built with Blue Delta!",o="Cras justo odio, dapibus ac facilisis in, egestas eget quam.";n.facebook=function(t,e){if(!t)return!1;var r="https://www.facebook.com/sharer/sharer.php?u="+t+"&description="+o+"&title="+a;return e&&(r+="&images="+urlencode(e)),r},n.twitter=function(t){return!!t&&"http://twitter.com/home?status="+a+"-"+t},n.email=function(t){return"mailto:?&subject="+a+"&body="+o+" - "+t},n.pinterest=function(t,e){return!t&&!e&&"https://pinterest.com/pin/create/button/?url="+t+"&media="+e+"&description="+a+"%0A"+o},r.share=function(t){var e=n[t](r.jeanToUrl());return e!==!1?"email"==t?window.open(e,"_self"):window.open(e,"","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600"):console.log("Error builiding social URL"),!1}}angular.module("bdApp").controller("socialCtrl",t),t.$inject=["jean"]}();
!function(){angular.module("bdApp").directive("socialActions",[function(){return{restrict:"EA",replace:!0,templateUrl:"/directives/social-actions/social-actions.template.html",scope:{jean:"=",display:"="},controller:"socialCtrl as sovm"}}])}();
!function(){function e(e,n){e.imagesLoaded=!1,n.preloadImages(e.slides).then(function(){e.imagesLoaded=!0},function(){console.log("error loading imgaes...")}),e.currentIndex=0,e.setCurrentSlideIndex=function(n){e.currentIndex=n},e.isCurrentSlideIndex=function(n){return e.currentIndex===n},e.nextSlide=function(){e.currentIndex=e.currentIndex<e.slides.length-1?++e.currentIndex:0},e.prevSlide=function(){e.currentIndex=e.currentIndex>0?--e.currentIndex:e.slides.length-1}}angular.module("bdApp").controller("sliderCtrl",e),e.$inject=["$scope","preloader"]}();
!function(){function e(){return{restrict:"EA",templateUrl:"/directives/slider/slider.template.html",controller:"sliderCtrl as slvm",scope:{slides:"=",imageClick:"&"}}}angular.module("bdApp").directive("slider",e)}();
!function(){function o(o,n){var l=this;l.user={},n.getOptions().success(function(o){console.log("admin.controller.jsln16:::"),console.log(o)}).error(function(o){console.log(o)})}angular.module("bdApp").controller("adminCtrl",o),o.$inject=["$location","meanData"]}();
!function(){function e(e,a,t,r,s,n,o,u){function i(e){var a=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return a.test(e)}function l(e){var a=/^\+?([0-9]{2})\)?[-. ]?([0-9]{4})[-. ]?([0-9]{4})$/;return e.match(a)}var c=this;t.closeAll(),c.popups=t.get(),c.messages=u.get(),c.jean=a,c.data=o.getData(),c.jeans=c.data.jeansList,c.onload=function(){n.vm=c},c.userForm={},c.userForm.editing={},c.userForm.feedback={type:"",message:""},c.userForm.cancel=function(e){console.log(e),c.userForm.editing[e]=!1,c.user[e]=c.userForm.data[e]},c.userForm.validate=function(e,a){return"email"==e?!!i(a)||(u.set("Please enter a valid email address","error"),!1):"phoneNumber"!=e||(!!l(a)||(u.set("Please enter a valid phone number","error"),!1))},c.userForm.save=function(e){c.userForm.validate(e,c.user[e])&&(u.reset(),s.usersUpdate(c.user.identityId,c.user).then(function(a){c.userForm.editing[e]=!1,c.userForm.data[e]=c.user[e],u.set("User updated","success")},function(e){console.log(e),u.set(e.message,"error")}))};var d=r.getCurrentUserFromLocalStorage();if(d){s.defaultHeaders_.Authorization=d.idToken.getJwtToken();var p=d.idToken.jwtToken.split(".")[1],m=JSON.parse(atob(p)).sub;s.usersGet(m).then(function(e){c.user=e.data,c.userForm.data=angular.copy(e.data),n.$apply()},function(e){console.log(e)})}else e.path("/");c.copyJean=function(){c.jean=a.createNew(c.displayJean),e.path("/customizer")},c.displayJean={},c.selectJean=function(e){c.popups.jeanProfile=!0,c.displayJean.data=e}}angular.module("bdApp").controller("closetCtrl",e),e.$inject=["$location","jean","popups","aws","bdAPI","$scope","jsonData","messages"]}();
!function(){function e(e,a,t,n,o,r,i,l,c,s,d,p,u){function h(){var e=navigator.userAgent.toLowerCase(),a=e.indexOf("android")>-1;if(a){if(0==window.orientation||180==window.orientation)return!0;if(90==window.orientation||window.orientation==-90)return!1}else{if(90==window.orientation||window.orientation==-90)return!0;if(0==window.orientation||180==window.orientation)return!1}}function g(a,t){return e(function(e,n){var o=new Image;o.src=a,o.onload=function(){t.drawImage(o,0,0,600,696),e(o)},o.onerror=function(e){n(e)}})}var v=this;u.reset(),v.messages=u.get(),s.closeAll(),v.popups=s.get(),v.landscape=h();var f="onorientationchange"in window,m=f?"orientationchange":"resize";window.addEventListener(m,function(){v.landscape=h(),c.$apply()},!1),v.jean={data:l.setup()},v.data=p.getData(),c.$watch(function(){return v.jean.data},function(e,a){v.updateActiveItem()},!0),c.$watch(function(){return v.data},function(e,a){v.updateActiveItem()},!0),v.activeItem={},v.updateActiveItem=function(){var e=v.data[v.panel[v.panelStep].dataKey],t=v.jean.data[v.panel[v.panelStep].jeanKey],n=a("filter")(e,{id:t});n&&(n=n[0]),v.activeItem=n||null},v.panel=[],v.panel.push({panelTemplate:"gender-chooser",dataKey:"genders",title:"Gender",jeanKey:"gender"}),v.panel.push({panelTemplate:"style-chooser",dataKey:"styles",title:"Style",jeanKey:"style"}),v.panel.push({panelTemplate:"fabric-chooser",dataKey:"fabrics",title:"Fabric",jeanKey:"fabric"}),v.panel.push({panelTemplate:"chooser",dataKey:"threads",title:"Top Thread",jeanKey:"top_thread"}),v.panel.push({panelTemplate:"chooser",dataKey:"threads",title:"Bottom Thread",jeanKey:"bottom_thread"}),v.panel.push({panelTemplate:"chooser",dataKey:"threads",title:"Accent Thread",jeanKey:"accent_thread"}),v.panel.push({panelTemplate:"list",title:"Overview"}),v.panelDir="next",v.panelStep=0,v.changeStep=function(e){return!(e>=v.panel.length)&&(!(e<0)&&(void 0!==e&&(v.panelStep=e,void(e+1!=v.panel.length&&v.updateActiveItem()))))},v.orderCallback=function(){v.saveCallback(function(){n.path("/order")})},v.placeOrder=function(){return d.isLoggedIn()?void v.saveCallback(function(){n.path("/order")}):(v.authCallback=v.orderCallback,s.set("loginOrRegister",!0),!1)},v.createThumb=function(){var a=document.createElement("canvas");a.width=600,a.height=600;for(var t=a.getContext("2d"),n=[],o=document.getElementsByClassName("zoomed-image"),r=0;r<o.length;r++){var i=o[r];n.push(g(i.src,t))}return e.all(n).then(function(e){var t=a.toDataURL("image/jpeg");return t})},v.saveCallback=function(e){s.closeAll(),v.savingBar=!0,v.createThumb().then(function(a){var t=d.getCurrentUserFromLocalStorage();t?(console.log("U:"+t),d.saveImageTos3(a,t).then(function(a){v.savingBar=!1,l.set("saved",!0),l.set("saved_at",new Date),l.set("image",a),l.save(),e&&e(a)},function(e){console.log(e)})):(v.savingBar=!1,v.authCallback=v.saveCallback,s.set("loginOrRegister",!0))})},v.saveJean=function(){return d.isLoggedIn()?void v.saveCallback():(v.authCallback=v.saveCallback,s.set("loginOrRegister",!0),!1)},v.authCallback=v.orderCallback}angular.module("bdApp").controller("customizerCtrl",e),e.$inject=["$q","$filter","$timeout","$location","$window","$routeParams","bdAPI","jean","$scope","popups","aws","jsonData","messages"]}();
!function(){function e(e,o,a,n){var r=this;console.log(n),r.messages=a.get(),r.credentials={loginEmail:"",loginPassword:""},r.validateLoginForm=function(){function e(e){var o=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return o.test(e)}return e(r.credentials.loginEmail)?!!r.credentials.loginPassword||(a.set("Please enter a password","error"),!1):(a.set("Please enter a valid Email address","error"),!1)},r.login=function(s,t){console.log("loggingin"),a.reset(),r.validateLoginForm()&&(console.log("valid"),o.authenticateCognitoUser(s,t).then(function(o){n.callback&&n.callback(),n.redirect&&e.path(n.redirect),!n.callback&&n.redirect&&e.path("/closet")},function(e){"Incorrect username or password."==e.message&&(e.message="Incorrect Email address or password."),a.set(e.message,"error")}))},r.loginFB=function(){o.authenticateViaFB().then(function(o){e.path("/closet")},function(e){a.set(e.message,"error")})}}angular.module("bdApp").controller("loginFormCtrl",e),e.$inject=["$location","aws","messages","$scope"]}();
!function(){function r(){return{restrict:"AE",templateUrl:"/directives/login-form/login-form.template.html",controller:"loginFormCtrl as logvm",scope:{redirect:"=?",callback:"=?"}}}angular.module("bdApp").directive("loginForm",r)}();
!function(){function e(e,a,r,t){var s=this;s.messages=t.get(),s.credentials={name:"",email:"",password:""},s.validateRegistrationForm=function(){function e(e){var a=/^(?=.*[0-9])(?=.*[!@#$%^&*])[a-zA-Z0-9!@#$%^&*]{6,50}$/;return a.test(e)}function a(e){var a=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return a.test(e)}return s.credentials.email&&s.credentials.name&&s.credentials.password&&s.credentials.passwordConfirm?(e(s.credentials.password)||t.set('A valid password must: <ul><li>Be between 6 and 50 characters</li><li>Contain at least one number</li><li>Contain at least one uppercase letter</li><li>Contain at least one lowercase letter</li><li>Contain at least one special character ("!,@,#,$,%,^,&, or *")</li>'),s.credentials.password!==s.credentials.passwordConfirm?(t.set("Password and Confirmation do not match","error"),!1):!!a(s.credentials.email)||(t.set("Please Enter a valid E-mail address","error"),!1)):(t.set("All fields are required","error"),!1)},s.registerUser=function(){t.reset(),s.validateRegistrationForm()&&a.signupForApplication(s.credentials.email,s.credentials.password).then(function(){$scope.callback&&$scope.callback(),$scope.redirect&&e.path($scope.redirect),!$scope.callback&&$scope.redirect&&e.path("/customizer")},function(e){t.set(e.message,"error")})}}angular.module("bdApp").controller("registerFormCtrl",e),e.$inject=["$location","aws","$sce","messages"]}();
!function(){function r(){return{restrict:"AE",templateUrl:"/directives/register-form/register-form.template.html",controller:"registerFormCtrl as regvm",scope:{redirect:"=?",callback:"=?"}}}angular.module("bdApp").directive("registerForm",r)}();
!function(){function o(o,r,e,t,a,n,d,i,p){var l=this;l.popups=t.get(),l.jean=e.data,console.log(e),l.orderForm={},l.orderForm.step=1,l.orderForm.data={},l.chooseFitType=function(o){l.orderForm.data.fitType=o,2!=o||l.orderForm.data.tailor||(l.popups.tailors=!0)},l.tailorLocations=[],l.data=p.getData(),console.log(l.data),l.orderForm.nextStep=function(){if(console.log("running next step..."),1==l.orderForm.step)return l.orderForm.data.fitType?2!=l.orderForm.data.fitType||l.orderForm.data.tailor?void(l.orderForm.step=2):(console.log("no tailor"),l.popups.tailors=!0,!1):(console.log("no fit type"),!1)},window.onbeforeunload=function(){return"You have unsaved changes!"},l.jeans=[]}angular.module("bdApp").controller("orderCtrl",o),o.$inject=["$window","$location","jean","popups","$filter","aws","bdAPI","$scope","jsonData"]}();
!function(){function e(e){var n=this;e.reset(),n.messages=e.get()}angular.module("bdApp").controller("loginCtrl",e),e.$inject=["messages"]}();
!function(){function e(e){var t=this;e.reset(),t.messages=e.get(),t.formStep=1}angular.module("bdApp").controller("registerCtrl",e),e.$inject=["messages"]}();
!function(){function n(n,a,e){n.jean=a.data}angular.module("bdApp").controller("homeCtrl",n),n.$inject=["$scope","jean","$animate"]}();
//# sourceMappingURL=app.min.js.map
