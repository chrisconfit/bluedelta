!function(){function e(e,t){e.when("/",{templateUrl:"home/home.view.html",controller:"homeCtrl",controllerAs:"vm"}).when("/register",{templateUrl:"/auth/register/register.view.html",controller:"registerCtrl",controllerAs:"vm"}).when("/login",{templateUrl:"/auth/login/login.view.html",controller:"loginCtrl",controllerAs:"vm"}).when("/closet",{templateUrl:"/closet/closet.view.html",controller:"closetCtrl",controllerAs:"vm"}).when("/customizer",{templateUrl:"/customizer/customizer.view.html",controller:"customizerCtrl",controllerAs:"vm"}).when("/admin",{templateUrl:"/admin/admin.view.html",controller:"adminCtrl",controllerAs:"vm"}).otherwise({redirectTo:"/"}),t.html5Mode(!0)}function t(e,t,r){e.$on("$routeChangeStart",function(e,o,n){var l=["/closet"];l.indexOf(t.path())>=0&&!r.isLoggedIn()})}angular.module("meanApp",["ngRoute","ngAnimate","ngTouch"]),angular.module("meanApp").config(["$routeProvider","$locationProvider",e]).run(["$rootScope","$location","authentication",t]).filter("spaceless",function(){return function(e){if(e)return e.replace(/\s+/g,"-")}}).filter("scoreToSpace",function(){return function(e){if(e)return e.replace(/_+/g," ")}}).filter("minMax",function(e,t,r){return function(o){return!(e&&o[r]<e)&&!(t&&o[r]>t)}})}();
!function(){function n(n,o){var l=this;l.user={},o.getOptions().success(function(n){console.log("admin.controller.jsln16:::"),console.log(n)}).error(function(n){console.log(n)})}angular.module("meanApp").controller("adminCtrl",n),n.$inject=["$location","meanData"]}();
!function(){function n(n,o){var e=this;e.user={},o.getProfile().success(function(n){e.user=n}).error(function(n){console.log(n)})}angular.module("meanApp").controller("closetCtrl",n),n.$inject=["$location","meanData"]}();
!function(){function e(e,t,a,r,n,l,d,i){var o=this;o.popups=i,o.form={},o.form.steps=[],o.form.steps[1]={template:"/customizer/form-templates/gender.html",title:"Gender"},o.form.steps[2]={template:"/customizer/form-templates/style.html",title:"Style"},o.form.steps[3]={template:"/customizer/form-templates/build.html",title:"Build"},o.jean=l,o.jean.step=l.step?l.step:1,o.jean.data.gender=1,o.jean.data.style=2,o.jean.step=3,o.form.nextStep=function(){o.jean.step=o.jean.step+1},o.form.selectStyle=function(e){o.jean.data.style=e,o.form.nextStep()},o.jean.data.fabric=o.jean.data.fabric||"1004",o.jean.data.accent_thread=o.jean.data.accent_thread||"1",o.jean.data.top_thread=o.jean.data.top_thread||"1",o.jean.data.bottom_thread=o.jean.data.bottom_thread||"1",o.jean.data.hardware=o.jean.data.hardware||"1",o.builder={},d.drag=function(e){console.log("controller func"),console.log(e),console.log("why not")},o.builder.panelDir="next",o.builder.panel=[],o.builder.panel[1]={panelTemplate:"fabric-chooser",dataKey:"fabrics",title:"Fabric",jeanKey:"fabric",thumbPrefix:"f"},o.builder.panel[2]={panelTemplate:"chooser",dataKey:"threads",title:"Top Thread",jeanKey:"top_thread",thumbPrefix:"f"},o.builder.panel[3]={panelTemplate:"chooser",dataKey:"threads",title:"Bottom Thread",jeanKey:"bottom_thread",thumbPrefix:"f"},o.builder.panel[4]={panelTemplate:"chooser",dataKey:"threads",title:"Accent Thread",jeanKey:"accent_thread",thumbPrefix:"f"},o.builder.panel[5]={panelTemplate:"chooser",dataKey:"hardware",title:"Hardware",jeanKey:"hardware",thumbPrefix:"f"},o.builder.panel[6]={panelTemplate:"list",title:"Overview",dataKey:"hardware",jeanKey:"hardware",thumbPrefix:"f"},o.builder.activeItem=function(){var t=o.builder[o.builder.panel[o.builder.step].dataKey],a=o.jean.data[o.builder.panel[o.builder.step].jeanKey];return e("filter")(t,{id:a})[0]},o.builder.styleByGender=function(e){return function(t){return t["images_"+e]}},o.dataLookup=function(t,a,r){r=r||null;var n="gender"==t||"style"==t?t+"s":e("filter")(o.builder.panel,{jeanKey:t})[0].dataKey,l=o.builder[n];return selected=e("filter")(l,{id:a})[0],r?selected[r]:selected},o.builder.getActiveItemName=function(){var e=o.builder.activeItem().name;return e=e.replace(/Raw Denim/g,"")},o.builder.step=1,o.builder.changeStep=function(e){return!(e>=o.builder.panel.length)&&(!(e<=0)&&(!!e&&void(o.builder.step=e)))},d.dir="next",n.getGenders().then(function(e){o.builder.genders=e.data}),n.getStyles().then(function(e){o.builder.styles=e.data}),n.getThreads().then(function(e){o.builder.threads=e.data}),n.getHardware().then(function(e){o.builder.hardware=e.data}),n.getFabrics().then(function(e){o.builder.fabrics=e.data})}angular.module("meanApp").controller("customizerCtrl",e),e.$inject=["$filter","$timeout","$location","$window","meanData","jean","$scope","popups"]}();
!function(){function n(n,a,e){n.jean=a.data}angular.module("meanApp").controller("homeCtrl",n),n.$inject=["$scope","jean","$animate"]}();
!function(){function e(e,n){var o=this;o.errors={message:""},o.credentials={email:"",password:""},o.onSubmit=function(){o.errors.message="",n.login(o.credentials).error(function(e){console.log(e),o.errors.message=e.message}).then(function(){e.path("closet")})}}angular.module("meanApp").controller("loginCtrl",e),e.$inject=["$location","authentication"]}();
!function(){function e(e,n){var o=this;o.credentials={name:"",email:"",password:""},o.errors={message:""},o.onSubmit=function(){console.log("Submitting registration"),n.register(o.credentials).error(function(e){console.log(e),o.errors.message=e.message}).then(function(){e.path("profile")})}}angular.module("meanApp").controller("registerCtrl",e),e.$inject=["$location","authentication"]}();
!function(){function n(n,e){var o=function(n){e.localStorage["mean-token"]=n},t=function(){return e.localStorage["mean-token"]},i=function(){var n,o=t();return!!o&&(n=o.split(".")[1],n=e.atob(n),n=JSON.parse(n),n.exp>Date.now()/1e3)},r=function(){if(i()){var n=t();console.log(n);var o=n.split(".")[1];return o=e.atob(o),o=JSON.parse(o),{email:o.email,name:o.name}}},a=function(){if(i()){var n=t(),o=n.split(".")[1];o=e.atob(o),o=JSON.parse(o),console.log(o);var r=o.permissions;return r.indexOf("admin")!==-1}};return register=function(e){return n.post("/api/register",e).success(function(n){o(n.token)})},login=function(e){return n.post("/api/login",e).success(function(n){o(n.token)})},logout=function(){e.localStorage.removeItem("mean-token")},{isAdmin:a,currentUser:r,saveToken:o,getToken:t,isLoggedIn:i,register:register,login:login,logout:logout}}angular.module("meanApp").service("authentication",n),n.$inject=["$http","$window"]}();
!function(){function t(t,e){var n=function(){return t.get("/api/profile",{headers:{Authorization:"Bearer "+e.getToken()}})},r=function(){return t.get("/api/options",{headers:{Authorization:"Bearer "+e.getToken()}})},a=function(){return t.get("/data/styles.json")},o=function(){return t.get("/data/threads.json")},i=function(){return t.get("/data/buttons.json")},u=function(){return t.get("/data/fabrics.json")},s=function(){return t.get("/data/genders.json")};return{getProfile:n,getOptions:r,getStyles:a,getThreads:o,getHardware:i,getFabrics:u,getGenders:s}}angular.module("meanApp").service("meanData",t),t.$inject=["$http","authentication"]}();
!function(){function a(){return data={},set=function(a,t){this.data[a]=t},{data:data,set:set}}angular.module("meanApp").service("jean",a)}();
!function(){function n(){return{denim:!1,hiw:!1}}angular.module("meanApp").service("popups",n)}();
function preloaderFunc(t,e){function i(e){this.imageLocations=e,this.imageCount=this.imageLocations.length,this.loadCount=0,this.errorCount=0,this.states={PENDING:1,LOADING:2,RESOLVED:3,REJECTED:4},this.state=this.states.PENDING,this.deferred=t.defer(),this.promise=this.deferred.promise}return i.preloadImages=function(t){var e=new i(t);return e.load()},i.prototype={constructor:i,isInitiated:function(){return this.state!==this.states.PENDING},isRejected:function(){return this.state===this.states.REJECTED},isResolved:function(){return this.state===this.states.RESOLVED},load:function(){if(this.isInitiated())return this.promise;this.state=this.states.LOADING;for(var t=0;t<this.imageCount;t++)this.loadImageLocation(this.imageLocations[t]);return this.promise},handleImageError:function(t){this.errorCount++,this.isRejected()||(this.state=this.states.REJECTED,this.deferred.reject(t))},handleImageLoad:function(t){this.loadCount++,this.isRejected()||(this.deferred.notify({percent:Math.ceil(this.loadCount/this.imageCount*100),imageLocation:t}),this.loadCount===this.imageCount&&(this.state=this.states.RESOLVED,this.deferred.resolve(this.imageLocations)))},loadImageLocation:function(t){var i=this,s=angular.element(new Image).bind("load",function(t){e.$apply(function(){i.handleImageLoad(t.target.src),i=s=t=null})}).bind("error",function(t){e.$apply(function(){i.handleImageError(t.target.src),i=s=t=null})}).attr("src",t)}},i}angular.module("meanApp").factory("preloader",preloaderFunc),preloaderFunc.$inject=["$q","$rootScope"];
!function(){function e(e,t,o,r,n,l){function c(e,t,o){e=e[0],t=t-e.offsetWidth/2+40;var r=e.scrollWidth-e.offsetWidth;t>=r&&(t=r-1),t==r&&(t=r-1);var n=Math.ceil(o/15),l=t-e.scrollLeft,c=l/n,a=e.scrollLeft<t?function(e,t){return e<=t-1}:function(e,t){return e>=t+1},s=setInterval(function(){if(a(e.scrollLeft,t)){var o=e.scrollLeft+c;o>=r&&(o=r-1),e.scrollLeft=o}else clearInterval(s)},15)}var a=this;a.popups=l,a.jean=n,a.breakPoint=800,a.selectorCoords={top:0,left:0},e.$watch("active",function(e,n){1==e&&o(function(){if(r.innerWidth<a.breakPoint){var e=angular.element(t[0].querySelector(".chooser-grid")),o=a.selectorCoords.left-e[0].offsetWidth/2+40;e.prop("scrollLeft",o)}else{var e=angular.element(t[0]);e.prop("scrollTop",a.selectorCoords.top-15)}},200)}),a.selectAttr=function(e,t,n,l){var s=angular.element(document.querySelector("#"+n+"-chooser")),l=angular.element(document.querySelector("#"+n+"-selector")),i=angular.element(e.target).prop("offsetTop"),f=angular.element(e.target).prop("offsetLeft"),u=angular.element(document.querySelectorAll("#item-title"));u.css({right:"-400px",opacity:0}),l.css({top:i+"px",left:f+"px"}),a.selectorCoords={top:i,left:f},r.innerWidth<a.breakPoint&&c(s,f,200),o(function(){u.css({right:"15px",opacity:1}),a.jean.data[n]=t},200)},a.jeanSet=function(e,t){a.jean.data[e]=t}}angular.module("meanApp").controller("chooserCtrl",e),e.$inject=["$scope","$element","$timeout","$window","jean","popups"]}();
!function(){function e(){return{restrict:"EA",templateUrl:"/common/directives/choosers/chooser.template.html",controller:"chooserCtrl as chvm",scope:{step:"=",dataset:"=",active:"="}}}angular.module("meanApp").directive("chooser",e)}();
!function(){angular.module("meanApp").directive("fabricChooser",["$window",function(e){return{restrict:"EA",template:'<div class="fabric-chooser-container" ng-include="viewUrl"></div>',controller:"chooserCtrl as chvm",scope:{step:"=",dataset:"=",active:"="},link:function(i){function r(){var r=e.innerWidth;r<i.breakPoint?i.viewUrl="/common/directives/choosers/fabric-chooser-mobile.html":r>=i.breakPoint&&(i.viewUrl="/common/directives/choosers/fabric-chooser-desk.html")}i.breakPoint=800,e.onresize=function(){r(),i.$apply()},r(),i.weightFilter=function(e,i){return function(r){return!(e&&r.weight<e)&&!(i&&r.weight>i)}}}}}])}();
!function(){function e(e,t,n){var o=this;o.jean=n,o.zoom=!1,o.pan="50%,50%",o.breakPoint=800,o.scanImage=function(t,n){frame=angular.element(document.querySelector("#zoom-frame"))[0],fWidth=frame.clientWidth,fHeight=frame.clientHeight,rect=frame.getBoundingClientRect(),rootDoc=frame.ownerDocument.documentElement,offsetT=rect.top+e.pageYOffset-rootDoc.clientTop,offsetL=rect.left+e.pageXOffset-rootDoc.clientLeft,xPosition=(t-offsetL)/fWidth*100,yPosition=(n-offsetT)/fHeight*100,e.innerWidth<o.breakPoint?pan=100-xPosition+"% "+(100-yPosition)+"% 0":pan=xPosition+"% "+yPosition+"% 0",o.pan=pan,images=angular.element(document.querySelectorAll("#zoom-frame img")),images.css({"transform-origin":pan})},o.trackMouse=function(t){return!(e.innerWidth<o.breakPoint)&&void o.scanImage(t.pageX,t.pageY)}}angular.module("meanApp").controller("istackCtrl",e),e.$inject=["$window","$swipe","jean"]}();
!function(){function t(t){return{restrict:"AE",templateUrl:"/common/directives/image-stack/image-stack.template.html",controller:"istackCtrl as isvm",link:function(e,i,n,a){t.bind(i,{move:function(t){e.isvm.scanImage(t.x,t.y)}})}}}angular.module("meanApp").directive("imageStack",t),t.$inject=["$swipe"]}();
!function(){function n(n,o,t,i){var e=this;e.isLoggedIn=o.isLoggedIn(),e.isAdmin=o.isAdmin(),e.currentUser=o.currentUser(),e.drops={},e.drops.acct=!1,e.mobileMenu=!1,e.logout=function(){o.logout(),"/"==n.path()&&t.reload()}}angular.module("meanApp").controller("navigationCtrl",n),n.$inject=["$location","authentication","$route","popups"]}();
!function(){function n(){return{restrict:"EA",templateUrl:"/common/directives/navigation/navigation.template.html",controller:"navigationCtrl as navvm"}}angular.module("meanApp").directive("navigation",n)}();
!function(){function e(e,n){e.imagesLoaded=!1,n.preloadImages(e.slides).then(function(){e.imagesLoaded=!0},function(){console.log("error loading imgaes...")}),e.currentIndex=0,e.setCurrentSlideIndex=function(n){e.currentIndex=n},e.isCurrentSlideIndex=function(n){return e.currentIndex===n},e.nextSlide=function(){e.currentIndex=e.currentIndex<e.slides.length-1?++e.currentIndex:0},e.prevSlide=function(){e.currentIndex=e.currentIndex>0?--e.currentIndex:e.slides.length-1}}angular.module("meanApp").controller("sliderCtrl",e),e.$inject=["$scope","preloader"]}();
!function(){function e(){return{restrict:"EA",templateUrl:"/common/directives/slider/slider.template.html",controller:"sliderCtrl as slvm",scope:{slides:"=",imageClick:"&"}}}angular.module("meanApp").directive("slider",e)}();
//# sourceMappingURL=app.min.js.map
