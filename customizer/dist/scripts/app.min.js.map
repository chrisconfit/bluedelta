{"version":3,"sources":["main.js","services/jean.service.js","services/loader.service.js","services/messages.service.js","services/popups.service.js","services/preloader.factory.js","services/user.js","directives/image-stack/image-stack.controller.js","directives/image-stack/image-stack.directive.js","directives/address-choice/address-choice.controller.js","directives/address-choice/address-choice.directive.js","directives/choosers/chooser.controller.js","directives/choosers/chooser.directive.js","directives/choosers/fabric-chooser.directive.js","directives/choosers/gender-chooser.directive.js","directives/choosers/style-chooser.directive.js","directives/login-form/login-form.controller.js","directives/login-form/login-form.directive.js","directives/navigation/navigation.controller.js","directives/navigation/navigation.directive.js","directives/register-form/register-form.controller.js","directives/register-form/register-form.directive.js","directives/jean-card/jean-card.directive.js","directives/social-actions/social-actions.controller.js","directives/social-actions/social-actions.directive.js","pages/admin/admin.controller.js","pages/closet/closet.controller.js","pages/customizer/customizer.controller.js","pages/home/home.controller.js","pages/order/order.controller.js","directives/jean-list/jean-list.directive.js","directives/slider/slider.controller.js","directives/slider/slider.directive.js","config/config-overrides-generated.js","pages/auth/login/login.controller.js","pages/auth/register/register.controller.js"],"names":["config","$routeProvider","$locationProvider","when","templateUrl","controller","controllerAs","otherwise","redirectTo","html5Mode","run","$rootScope","$location","user","isLoggedIn","setup","$on","event","nextRoute","currentRoute","locked","indexOf","path","angular","module","filter","input","replace","min","max","key","ret","gender","name","initInjector","injector","$http","get","then","result","data","lookup","value","retKey","dataSet","this","i","length","constant","body","document","getElementById","bootstrap","element","jean","$routeParams","$window","$q","apiData","api","parseURLkey","dataLookup","dataType","jeanData","set","property","saved","createNew","constructor","Object","gender_option_id","style_option_id","fabric_id","accent_thread_id","top_thread_id","bottom_thread_id","reset","buildJeanData","copy","user_id","id","prop","hasOwnProperty","action","defer","userId","parseInt","localStorage","getItem","makeCopy","console","log","resolve","undefined","isNaN","jeanObj","dataArr","split","d","call","err","reject","keys","promise","deleter","jeanId","callback","save","filename","getDataCode","image","createThumb","blob","service","loader","loaderDefaults","message","type","icon","active","show","hide","messages","popups","pops","closeAll","pop","status","$broadcast","preloaderFunc","Preloader","imageLocations","imageCount","loadCount","errorCount","states","PENDING","LOADING","RESOLVED","REJECTED","state","deferred","preloadImages","preloader","load","prototype","isInitiated","isRejected","isResolved","loadImageLocation","handleImageError","imageLocation","handleImageLoad","notify","percent","Math","ceil","Image","bind","$apply","target","src","attr","factory","$inject","Nuser","userData","obKey","userDetails","login","username","password","success","error","response","setItem","access_token","logout","removeItem","istackCtrl","$scope","isvm","centerPan","zoom","pan","x","y","isMobile","innerWidth","toggleZoom","touchEnd","dragTracker","returnPan","images","querySelectorAll","setTimeout","css","transform-origin","touchStart","e","swipeStart","touches","clientX","clientY","swipe","zoomDrag","touchMove","preventDefault","touch","drag","clientWidth","clientHeight","bounds","top","bottom","left","right","move","dragPan","u","direction","frame","window","innerHeight","height","width","deltaX","deltaY","abs","isFinal","scanImage","querySelector","fWidth","fHeight","rect","getBoundingClientRect","rootDoc","ownerDocument","documentElement","offsetT","pageYOffset","clientTop","offsetL","pageXOffset","clientLeft","xPosition","yPosition","breakPoint","trackMouse","$event","pageX","pageY","imageStack","restrict","scope","link","ele","attrs","ctrl","on","directive","addressChoiceCtrl","$filter","resetForm","close","editAdd","model","findAddressbyKey","primary","addresses","add","editing","addForm","choosePrimary","address","a","startEditing","stopEditing","open","index","clear","dataObj","remove","addressId","splice","new_primary_id","newPrimary","newAdd","push","abbreviation","addressChoice","chooserCtrl","$element","$timeout","scrollToLeft","el","scrollTo","scrollDuration","offsetWidth","maxLeft","scrollWidth","stepNum","distance","scrollLeft","scrollStep","scrollTest","b","scrollInterval","setInterval","newScroll","clearInterval","chvm","selectorCoords","$watch","newValue","oldValue","dataId","step","jeanKey","dataKey4","elementId","activeElement","selector","chooser","selectAttr","text","opacity","jeanSet","val","dataset","template","changeTemplate","screenWidth","viewUrl","onresize","weightFilter","fabric","weight","genderChooser","styleChooser","checkGenderFilter","style","g","loginFormCtrl","validateEmail","email","re","test","validatePassword","logvm","credentials","loginEmail","loginPassword","validateLoginForm","redirect","forgotPassword","forgotPassword2","customerReset","search","getResetToken","validateForgot","resetPassword","validateForgot2","token","loginVerifcation","newPassword","newPasswordConfirm","loginFB","loginForm","forgot","navigationCtrl","$route","vm","saver","drops","acct","mobileMenu","navigation","registerFormCtrl","$sce","regvm","first_name","last_name","validateRegistrationForm","passwordConfirm","registerUser","register","registerForm","jeanCard","click","slug","templatePath","socialCtrl","sovm","jeanToUrl","url","location","origin","sharingUrls","socialTitle","socialDescription","facebook","baseString","urlencode","twitter","pinterest","share","social","display","savefunc","adminCtrl","meanData","getOptions","closetCtrl","validatePhoneNumber","inputtxt","phoneno","match","findJeanbyId","j","jeans","results","orders","onload","userForm","saving","feedback","cancel","field","editField","validate","update","passForm","currentPass","newPass","newPassConfirm","validatePasswordForm","changePassword","passwordData","old_password","reOrder","orderId","copyJean","orderItem","dataCode","displayJean","selectJean","jeanProfile","selectOrder","order","orderProfile","displayOrder","order_items","deleteJean","orderJean","customizerCtrl","landscapeDetect","ua","navigator","userAgent","toLowerCase","isAndroid","orientation","current","original","updateActiveItem","landscape","supportsOrientationChange","orientationEvent","addEventListener","activeItem","panel","panelStep","dataKey","panelTemplate","title","panelDir","changeStep","savingBar","newJeanName","authCallback","saveCallback","openSaveOpts","redirectToOrder","saveAndOrder","runSave","saveAndShowOpts","keepEditing","goToCloset","startOver","placeOrder","socialAuthCheck","saveJean","registerCallback","details","homeCtrl","orderCtrl","getPrimaryAddress","tailors","orderCreateObj","newV","shipping_name","shipping_phone","phone","shipping_address_id","urlOrder","copy_order_item_id","image_url","jean_image_url","jean_name","jean_id","orderForm","orderPlaced","chooseOrderType","copyItem","order_type_id","tailor_id","measurementKeys","hasMeasurements","testCols","measurements","nextStep","editData","editText","revertField","fields","dataBank","defaultFields","findLabel","fieldLabels","dataMap","filterFields","matches","k","sliderCtrl","imagesLoaded","slides","currentIndex","setCurrentSlideIndex","isCurrentSlideIndex","nextSlide","prevSlide","slider","imageClick","configOverridesGenerated","REGION","PROFILE_IMAGES_S3_BUCKET","API_ENDPOINT","USER_POOL_ID","CLIENT_ID","IDENTITY_POOL_ID","loginCtrl","registerCtrl","formStep"],"mappings":"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","file":"app.min.js","sourcesContent":["(function () {\n\n  angular.module('bdApp', ['ngRoute', 'ngAnimate','ngSanitize', 'ngCookies', 'angular-gestures', 'user', 'api']); \n  \n\n\n  function config ($routeProvider, $locationProvider) {\n    $routeProvider\n      .when('/', {\n        templateUrl: '/pages/home/home.view.html',\n        controller: 'homeCtrl',\n        controllerAs: 'vm',\n      })\n      .when('/register', {\n        templateUrl: '/pages/auth/register/register.view.html',\n        controller: 'registerCtrl',\n        controllerAs: 'vm'\n      })\n      .when('/login', {\n        templateUrl: '/pages/auth/login/login.view.html',\n        controller: 'loginCtrl',\n        controllerAs: 'vm'\n      })\n      .when('/customer-register/:email?', {\n        templateUrl: '/pages/auth/customer-register/customer-register.view.html',\n        controller: 'loginCtrl',\n        controllerAs: 'vm'\n      })\n      .when('/closet', {\n        templateUrl: '/pages/closet/closet.view.html',\n        controller: 'closetCtrl',\n        controllerAs: 'vm'\n      })\n      .when('/order/:jeanId?/:action?', {\n        templateUrl: '/pages/order/order.view.html',\n        controller: 'orderCtrl',\n        controllerAs: 'vm'\n      })\n      .when('/customizer/:jeanId?/:action?', {\n        templateUrl: '/pages/customizer/customizer.view.html',\n        controller: 'customizerCtrl',\n        controllerAs: 'vm'\n      })\n      .when('/admin', {\n        templateUrl: '/pages/admin/admin.view.html',\n        controller: 'adminCtrl',\n        controllerAs: 'vm'\n      })\n      .otherwise({redirectTo: '/'});\n\n    // use the HTML5 History API\n    $locationProvider.html5Mode(true);\n    \n  }\n\n  function run($rootScope, $location, user) {\n\t  if (user.isLoggedIn()) user.setup();\n    $rootScope.$on('$routeChangeStart', function(event, nextRoute, currentRoute) {\n\n\t    var locked = [\n\t\t    '/closet',\n\t\t    '/order'\n\t    ];\n\t    \n\t    if (locked.indexOf($location.path()) >= 0 && !user.isLoggedIn() ){\n\t\t\t\t$location.path('/login');\n\t  \t}\n\t  \t/* TODO\n\t  \t//If there's no jean on the order screen.... redirect to the customizer page.\n\t  \tif($location.path().indexOf(\"/order\") >= 0 && !Object.keys(jean.data).length){\n\t\t  \t$location.path('/customizer');\n\t\t  };\n\t\t  */\n\t\t  \n    });\n  }\n  \n  \n \n\n\t\n\t\t\t\n\n\tangular.module('bdApp')\n    .config(['$routeProvider', '$locationProvider', config])\n    .run(['$rootScope', '$location', 'user', run])\n\t\t.filter('spaceless',function() {\n\t    return function(input) {\n\t      if (input) {\n\t      \treturn input.replace(/\\s+/g, '-');    \n\t      }\n\t    }\n\t\t})\n\t\t.filter('scoreToSpace',function() {\n\t    return function(input) {\n\t      if (input) {\n\t\t      var input = input.replace( /([A-Z])/g, \" $1\" );\n\t      \treturn input.replace(/_+/g, ' ');    \n\t      }\n\t    }\n\t\t})\n\t\t.filter('minMax',function(min, max, key) {\n\t\t\treturn function(input){\n\t\t\t\tif (min && input[key] < min) return false;\n\t\t\t\tif (max && input[key] > max) return false;\n\t\t    return true;\n\t\t  }  \n\t\t})\n\t\t.filter('displayName',function() {\n\t\t\treturn function(input){\t\n\t\t\t\tret = input.gender ? input.gender : input.name;\t\t\t\n\t\t\t\treturn ret ? ret.replace(/Raw Denim/g, \"\") : false;\n\t\t  }  \n\t\t})\n\t\t\n\t\t\n\t\t\n\t\t\n\t\t\n\t\n\t// Get Angular's $http module.\n\tvar initInjector = angular.injector(['ng']);\n\t\n\tvar $http = initInjector.get('$http');\n\tvar $q = initInjector.get('$q');\n\t\n\t/*\n\tvar awsJsonUrl = \"http://bluedelta-data.s3-website-us-east-1.amazonaws.com/data/\"\n\t\n\tvar jsonDataKeys = ['style', 'thread', 'button', 'fabric', 'gender', 'tailors'];\n\tvar promises = [];\t\t\t\t\n\tfor (d = 0; d < jsonDataKeys.length; d++){\n\t\tpromises.push(\n\t\t\t$http.get(awsJsonUrl+jsonDataKeys[d]+'.json')\n\t\t);\t\n\t}\n\t*/\n\t$http.get(\"http://ec2-54-200-231-145.us-west-2.compute.amazonaws.com/api/data\").then(function(result){\n\t\t\t\t\n\t\tresult.data.lookup = function(data, key, value, retKey){\n\t\t\tvar dataSet = this[data];\n\t\t\tretKey = retKey || false;\n\t\t\tfor (i=0; i<dataSet.length; i++){\t\t\t\t\n\t\t\t\tif(dataSet[i][key] == value)\n\t\t\t\t\treturn retKey ? dataSet[i][retKey] : dataSet[i]\n\t\t\t}\n\t\t}\n\t\tangular.module('bdApp').constant('apiData', result.data);\n\t\tvar body = document.getElementById('bdApp');\n\t\tangular.bootstrap(angular.element(body), ['bdApp']);\t\t\n\t});\n\t/*\n\t$q.all(promises).then(\n\t\tfunction(result){\n\t\t\tvar jsonData = {};\n\t\t\tfor(r=0;r<result.length;r++){\n\t\t\t\tvar key = result[r].config.url.replace(awsJsonUrl,\"\").replace(\".json\",\"\");\n\t\t\t\tjsonData[key] = result[r].data;\n\t\t\t}\n\t\t\tangular.module('bdApp').constant('jsonData', jsonData);\n\t\t\tvar body = document.getElementById('bdApp');\n\t\t\tangular.bootstrap(angular.element(body), ['bdApp']);\t\t\n\t\t}\n\t);\n\t*/\n\n\t\n\n\t\t\n\t\t\n\t\n\t\t\n})();","\n(function() {\n\n  angular\n    .module('bdApp')\n    .service('jean', ['$routeParams', '$window', '$q', 'apiData', 'api', jean]);\n\n  function jean($routeParams, $window, $q, apiData, api) {\n\n\n\t\t/*\n\t\t*   JSON Data lookup\n\t\t*/\n\t\t\n\t\tvar dataLookup = function(dataType, key){\n\n\t\t\tvar data = apiData[dataType];\n\t\t\tif (!data) return false;\n\t\t\t\n\t\t\tfor (i=0; i<data.length; i++) {\n\t\t\t\t//\tconsole.log(data[i][dataType+\"Id\"], key);\n\t\t\t\tif (data[i][dataType+\"Id\"] == key) \t\t\t\t\n\t\t\t\treturn data[i];\n  \t\t}\n\t\t}\n\t\t\n\n\t\t\n\t\t/*\n\t\t*.  Jean Data\n\t\t*/\n\t\t\n  \tvar jeanData = {};\n  \t\n\t\tset = function(property, value){\n\t\t\tjeanData[property] = value;\n\t\t\tthis.saved=false;\n\t\t};\n\t\t\n\t\tcreateNew = function(jean){\n\t\t\tif (!jean || jean.constructor != Object){\n\t\t\t\tjeanData = {\n\t\t\t\t\t\"gender_option_id\" : 1,\n\t\t\t\t\t\"style_option_id\" : 1,\n\t\t\t\t\t\"fabric_id\" : 1004,\n\t\t\t\t\t\"accent_thread_id\" :1,\n\t\t\t\t\t\"top_thread_id\" : 1,\n\t\t\t\t\t\"bottom_thread_id\" : 1\n\t\t\t\t}\n\t\t\t\tjeanData.saved = false;\n\t\t\t}else{\n\t\t\t\tjeanData = {\n\t\t\t\t\t\"gender_option_id\" : jean.gender_option_id,\n\t\t\t\t\t\"style_option_id\" : jean.style_option_id,\n\t\t\t\t\t\"fabric_id\" : jean.fabric_id,\n\t\t\t\t\t\"accent_thread_id\" : jean.accent_thread_id,\n\t\t\t\t\t\"top_thread_id\" : jean.top_thread_id,\n\t\t\t\t\t\"bottom_thread_id\" : jean.bottom_thread_id\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\t\n\t\t\t\t\n\t\tfunction parseURLkey(key){\n\t\t\tswitch(key){\n\t\t\t\tcase \"g\":\n\t      return \"gender_option_id\";\n\t      break;\n\t      \n\t      case \"s\":\n\t      return \"style_option_id\";\n\t      break;\n\t      \n\t      case \"f\":\n\t      return \"fabric_id\";\n\t      break;\n\t      \n\t      case \"tt\":\n\t      return \"top_thread_id\";\n\t      break;\n\t      \n\t      case \"tb\":\n\t      return \"bottom_thread_id\";\n\t      break;\n\t      \n\t      case \"ta\":\n\t      return \"accent_thread_id\";\n\t      \n\t      default: return false;\n\t\t\t}\n\t\t}\n\t\t\n\t\t\n\t\t\n\t\t\n\t\treset = function(){\n\t\t\tcreateNew();\n\t\t}\n\t\t\n\t\tbuildJeanData = function(data, copy){\n\n\t\t\t//Make a copy\n\t\t\tif(copy==true){\n\t\t\t\tdelete data.user_id;\n\t\t\t\tdelete data.id;\n\t\t\t\tif(data.name) data.name = \"Copy of \"+data.name;\n\t\t\t}\n\t\t\tfor(prop in data){\n\t\t\t\tif(data.hasOwnProperty(prop)){\n\t\t\t\t\tset(prop, data[prop]);\t\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\t//Set up jean data from parameter\n\t\tvar setup = function(data, action){\n\t\t\tvar defer = $q.defer();\n\t\t\t\n\t\t\t//Get our user Id and detrmine whether or not we want to make a copy\t\t\n\t\t\tvar userId = parseInt($window.localStorage.getItem(\"bdUserId\"));\n\t\t\tvar makeCopy = userId ? false : true;\n\t\t\tmakeCopy = action == \"copy\" ? true : makeCopy;\n\t\t\t\n\t\t\t\n\t\t\t//Set up jean from object data\n\t\t\tif (data !== null && typeof data === 'object'){ \n\t\t\t\t\n\t\t\t\tconsole.log(\"working from object data!\");\n\t\t\t\t\n\t\t\t\tif (data.user_id && data.user_id !== userId) delete data.id;\n\t\t\t\tbuildJeanData(data, makeCopy);\n\t\t\t\tdefer.resolve(jeanData);\n\t\t\t}\n\t\t\t\n\t\t\t//Copy jean from data URL\n\t\t\telse if (data !== null && data !== undefined && isNaN(data)){\n\t\t\t\tconsole.log(\"THIS IS A DATACODE\");\n\t\t\t\tconsole.log(data);\n\t\t\t\tvar jeanObj = {};\n\t\t\t\tdataArr = data.split('-');\n\t\t\t\tfor(var i=0; i<dataArr.length; i++){\n\t\t\t\t\tvar d = dataArr[i].split(\":\");\n\t\t\t\t\tvar key = parseURLkey(d[0]);\n\t\t\t\t\tjeanObj[key]=d[1];\n\t\t\t\t}\n\t\t\t\tconsole.log('jeanObj');\n\t\t\t\tconsole.log(jeanObj);\n\t\t\t\tbuildJeanData(jeanObj, true);\n\t\t\t\tdefer.resolve(jeanData);\n\t\t\t}\n\n\t\t\t//Copy or Edit Jean from Id\n\t\t\telse if (data !== null && data !== undefined){\n\t\t\t\t\n\t\t\t\t//First get Jean\n\t\t\t\tapi.call('getJean', data, function(result){\n\t\t\t\t\t\n\t\t\t\t\tif (result.user_id !== userId) makeCopy = true;\n\n\t\t\t\t\tbuildJeanData(result, makeCopy);\n\t\t\t\t\tdefer.resolve(jeanData);\n\t\t\t\t}, function(err){\n\t\t\t\t\t\tdefer.reject(err)\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t//Jean Data already exists\n\t\t\telse if (Object.keys(jeanData).length > 0){\n\t\t\t\tdefer.resolve(jeanData);\n\t\t\t}\n\t\t\t\n\t\t\telse{\n\t\t\t\tcreateNew();\t\t\t\n\t\t\t\tdefer.resolve(jeanData);\n\t\t\t}\n\t\t\t\n\t\t\t//Data URL\n\t\t\t/*\n\t\t\telse if ($routeParams.jeanId && !$routeParams.userId){\n\t\t\t\tcreateNew();\n\t\t\t\tif ($routeParams.jeanId.indexOf(\":\")>0){\n\t\t\t\t\tjeanData = $routeParams.jeanId.split(\":\");\n\t\t\t\t\tfor(var d=0; d<jeanData.length; d++){\n\t\t\t\t\t\tvar parts= jeanData[d].match(/([A-Za-z]+)([0-9]+)/);\n\t\t\t\t\t\tif (!parts) continue;\n\t\t\t\t\t\tvar jeanKey = parseURLkey(parts[1]);\n\t\t\t\t\t\tif (jeanKey) jeanData[jeanKey] = parseInt(parts[2]);\t\t\t\t\t\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tdefer.resolve(jeanData);\n\t\t\t}\n\t\t\t*/\n\t\t\t\n\t\t\t\n\t\t\t\t\t\n\t\t\t\t\t\t\t\n\t\t\t\t/*bdAPI.jeansGet($routeParams.userId, $routeParams.jeanId).then(\t\t\t\t\t\n\t\t\t\t\tfunction(result){\n\n\t\t\t\t\t\tvar newJean = result.data;\n\n\t\t\t\t\t\tvar userData = aws.getCurrentUserFromLocalStorage();\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(userData){\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tvar identityId = bdAPI.setupHeaders(userData);\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t//Edit Jean\n\t\t\t\t\t\t\tif (identityId == $routeParams.userId){\n\t\t\t\t\t\t\t\tfor(prop in newJean){\n\t\t\t\t\t\t\t\t\tif(newJean.hasOwnProperty(prop)){\n\t\t\t\t\t\t\t\t\t\tset(prop, newJean[prop]);\t\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t//Copy Jean\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tcreateNew(newJean);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t//Not logged in.. create new.\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tcreateNew(newJean);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tdefer.resolve(jeanData);\n\t\t\t\t\t}, \n\t\t\t\t\tfunction(err){\n\t\t\t\t\t\t//Jean or user not found.. just create a blank jean...\n\t\t\t\t\t\tconsole.log(err);\n\t\t\t\t\t\tcreateNew();\n\t\t\t\t\t\tdefer.resolve(jeanData);\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t\t*/\n\t\t\n\t\t\t\t\t\n\t\t\t\n\n\t\t\t\n\t\t\treturn defer.promise;\n\t\t}\n\t\t\n\t\t\n\t\tvar get=function(){\n\t\t\treturn jeanData;\n\t\t}\n\t\t\n\t\t\n\t\t\n\t\tvar deleter = function (jeanId, callback){\n\t\t\tapi.call('deleteMyJean', jeanId, function(result){\n\t\t\t\tif (callback) callback(result);\n\t\t\t});\n\t\t};\n\t\t\n\t\tvar save = function(){\n\t\t\t\n\t\t\tvar defer = $q.defer();\n\t\t\tvar jean = this;\n\t\t\tvar jeanData = jean.get();\n\t\t\tvar filename = api.getDataCode(jeanData);\n\t\t\tfilename += \".jpg\";\n\t\t\tjeanData.image = {filename:filename};\n\t\t\tapi.createThumb(jeanData).then(function(blob){\n\t\t\t\tjeanData.image.data = blob;\n\t\t\t\tapi.call('createMyJeans', jeanData, function(result){\n\t\t\t\t\tdefer.resolve(result);\n\t\t\t\t}, function(err){\n\t\t\t\t\tdefer.reject(err);\n\t\t\t\t});\n\t\t\t}, function(err){\n\t\t\t\tdefer.reject(err);\n\t\t\t});\n\t\t\t\n\t\t\treturn defer.promise;\n\n\t\t}\n\t\t\n\t\t\t\n\t\treturn {\n\t    dataLookup: dataLookup,\n\t    deleter : deleter,\n\t    save : save,\n\t    get : get,\n\t    set: set,\n\t    setup : setup,\n\t    reset : reset,\n      set : set,\n      createNew :createNew,\n      getDataCode: getDataCode\n     }\n\t\t\t\n\t\t\n  }\n\n})();","\n(function() {\n\n  angular\n    .module('bdApp')\n    .service('loader', ['$rootScope', loader]);\n\n  function loader() {\n\t\t\n\t\tvar loader = {}\n    \n    var loaderDefaults = {\n\t    \"message\":\"\",\n\t    \"type\":\"loading\",\n\t    \"icon\":\"fa-circle-o-notch fa-spin\",\n\t    \"active\":false\n    };\n    \n  \n\t        \n\t\tvar closeAll = function(){\n\t\t\tfor (var pop in pops) {\n\t\t\t  if (pops.hasOwnProperty(pop)) {\n\t\t\t    pops[pop]=false;\n\t\t\t  }\n\t\t\t}\n\t\t}\n    \n    var  show = function(message, type, icon){\n\t    loader.active = true;\n\t    loader.message=message || loaderDefaults.message;\n\t    loader.type = type || loaderDefaults.type;\n\t    loader.icon = icon || loaderDefaults.icon;\n    }\n    \n    var hide = function(){\n\t    loader.active=false;\n    }\n    \n    var get = function(){\n\t    return loader;\n    }\n    \n    return {\n\t    get:get,\n\t    show:show,\n\t    hide:hide\n    }\n  }\n\n})();","(function() {\n\n  angular\n    .module('bdApp')\n    .service('messages', messages);\n\n\t//meanData.$inject = [];\n  function messages() {\n\t\n\t\tvar data = {\n\t\t\tmessage : \"\",\n\t\t\ttype: \"\"\n\t\t};\n\t\t\n\t\tvar set = function(message, type){\n\t\t\tdata.message = message;\n\t\t\tdata.type = type;\n\t\t}\n\t\t\t\n\t\tvar reset = function(){\n\t\t\tdata.message = \"\";\n\t\t\tdata.type = \"\";\t\n\t\t}\n\t\t\n\t\tvar get = function(){\n\t\t\treturn data;\n\t\t}\n\t\t\n    return {\n\t    get:get,\n\t    set:set,\n\t    reset:reset\n    };\n  }\n\n})();","\n(function() {\n\n  angular\n    .module('bdApp')\n    .service('popups', ['$rootScope', popups]);\n\n  function popups($rootScope) {\n\t\t\n    var pops = {};\n        \n\t\tvar closeAll = function(){\n\t\t\tfor (var pop in pops) {\n\t\t\t  if (pops.hasOwnProperty(pop)) {\n\t\t\t    pops[pop]=false;\n\t\t\t  }\n\t\t\t}\n\t\t}\n    \n    var set = function(pop, status){\n\t    if (!pops[pop]){\n\t\t    pops[pop] = true;\n\t\t    $rootScope.$broadcast('popupChange');\n\t    }\n\t    else{\n\t\t  \tvar status = status || pops[pop];\n\t\t\t\tpops[pop] = status;\n\t\t\t}\n    }\n    \n    var get = function(){\n\t    return pops;\n    }\n    \n    return {\n\t    get:get,\n\t    set:set,\n\t    closeAll:closeAll\n    }\n  }\n\n})();","angular.module('bdApp')\n.factory('preloader', preloaderFunc);\n\npreloaderFunc.$inject = ['$q', '$rootScope'];\nfunction preloaderFunc( $q, $rootScope ) {\n  // I manage the preloading of image objects. Accepts an array of image URLs.\n  function Preloader( imageLocations ) {\n      // I am the image SRC values to preload.\n      this.imageLocations = imageLocations;\n      // As the images load, we'll need to keep track of the load/error\n      // counts when announing the progress on the loading.\n      this.imageCount = this.imageLocations.length;\n      this.loadCount = 0;\n      this.errorCount = 0;\n      // I am the possible states that the preloader can be in.\n      this.states = {\n          PENDING: 1,\n          LOADING: 2,\n          RESOLVED: 3,\n          REJECTED: 4\n      };\n      // I keep track of the current state of the preloader.\n      this.state = this.states.PENDING;\n      // When loading the images, a promise will be returned to indicate\n      // when the loading has completed (and / or progressed).\n      this.deferred = $q.defer();\n      this.promise = this.deferred.promise;\n  }\n  // ---\n  // STATIC METHODS.\n  // ---\n  // I reload the given images [Array] and return a promise. The promise\n  // will be resolved with the array of image locations.\n  Preloader.preloadImages = function( imageLocations ) {\n      var preloader = new Preloader( imageLocations );\n      return( preloader.load() );\n  };\n  // ---\n  // INSTANCE METHODS.\n  // ---\n  Preloader.prototype = {\n      // Best practice for \"instnceof\" operator.\n      constructor: Preloader,\n      // ---\n      // PUBLIC METHODS.\n      // ---\n      // I determine if the preloader has started loading images yet.\n      isInitiated: function isInitiated() {\n          return( this.state !== this.states.PENDING );\n      },\n      // I determine if the preloader has failed to load all of the images.\n      isRejected: function isRejected() {\n          return( this.state === this.states.REJECTED );\n      },\n      // I determine if the preloader has successfully loaded all of the images.\n      isResolved: function isResolved() {\n          return( this.state === this.states.RESOLVED );\n      },\n      // I initiate the preload of the images. Returns a promise.\n      load: function load() {\n          // If the images are already loading, return the existing promise.\n          if ( this.isInitiated() ) {\n              return( this.promise );\n          }\n          this.state = this.states.LOADING;\n          for ( var i = 0 ; i < this.imageCount ; i++ ) {\n              this.loadImageLocation( this.imageLocations[ i ] );\n          }\n          // Return the deferred promise for the load event.\n          return( this.promise );\n      },\n      // ---\n      // PRIVATE METHODS.\n      // ---\n      // I handle the load-failure of the given image location.\n      handleImageError: function handleImageError( imageLocation ) {\n          this.errorCount++;\n          // If the preload action has already failed, ignore further action.\n          if ( this.isRejected() ) {\n              return;\n          }\n          this.state = this.states.REJECTED;\n          this.deferred.reject( imageLocation );\n      },\n      // I handle the load-success of the given image location.\n      handleImageLoad: function handleImageLoad( imageLocation ) {\n          this.loadCount++;\n          // If the preload action has already failed, ignore further action.\n          if ( this.isRejected() ) {\n              return;\n          }\n          // Notify the progress of the overall deferred. This is different\n          // than Resolving the deferred - you can call notify many times\n          // before the ultimate resolution (or rejection) of the deferred.\n          this.deferred.notify({\n              percent: Math.ceil( this.loadCount / this.imageCount * 100 ),\n              imageLocation: imageLocation\n          });\n          // If all of the images have loaded, we can resolve the deferred\n          // value that we returned to the calling context.\n          if ( this.loadCount === this.imageCount ) {\n              this.state = this.states.RESOLVED;\n              this.deferred.resolve( this.imageLocations );\n          }\n      },\n      // I load the given image location and then wire the load / error\n      // events back into the preloader instance.\n      // --\n      // NOTE: The load/error events trigger a $digest.\n      loadImageLocation: function loadImageLocation( imageLocation ) {\n          var preloader = this;\n          // When it comes to creating the image object, it is critical that\n          // we bind the event handlers BEFORE we actually set the image\n          // source. Failure to do so will prevent the events from proper\n          // triggering in some browsers.\n          // --\n          // The below removes a dependency on jQuery, based on a comment\n          // on Ben Nadel's original blog by user Adriaan:\n          // http://www.bennadel.com/members/11887-adriaan.htm\n          var image = angular.element( new Image() )\n              .bind('load', function( event ) {\n                  // Since the load event is asynchronous, we have to\n                  // tell AngularJS that something changed.\n                  $rootScope.$apply(\n                      function() {\n                          preloader.handleImageLoad( event.target.src );\n                          // Clean up object reference to help with the\n                          // garbage collection in the closure.\n                          preloader = image = event = null;\n                      }\n                  );\n              })\n              .bind('error', function( event ) {\n                  // Since the load event is asynchronous, we have to\n                  // tell AngularJS that something changed.\n                  $rootScope.$apply(\n                      function() {\n                          preloader.handleImageError( event.target.src );\n                          // Clean up object reference to help with the\n                          // garbage collection in the closure.\n                          preloader = image = event = null;\n                      }\n                  );\n              })\n              .attr( 'src', imageLocation )\n          ;\n      }\n  };\n  // Return the factory instance.\n  return( Preloader );\n};","\n(function() {\n\n  angular\n    .module('bdApp')\n    .service('Nuser', Nuser);\n\t\t\n\tNuser.$inject = ['$location', '$window', 'api'];\n  function Nuser($location, $window, api) {\n\t  \n\t  var user = {};\n\t  \n\t\tvar isLoggedIn = function(){\n\t\t\tconsole.log(\"Here\");\n\t\t\treturn $window.localStorage.getItem(\"bdAccessToken\") ? true : false;\n\t\t}\n\t  \n\t\tvar set = function(key, data){\n\t\t\t\n\t\t\tif (key == null) return false;\n\t\t\t\n\t\t\tif (typeof key === 'object'){\n\t\t\t\t\n\t\t\t\tconsole.log('setting whole user');\n\t\t\t\tvar userData = key;\n\t\t\t\tfor (obKey in userData){\n        if(!userData.hasOwnProperty(obKey)) continue;\n\t\t\t\t\tuser[obKey] = key[obKey]\n    \t\t}\t\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t\telse user[key] = data; \n      return user;\n    };\n\t\t\n\t\tvar setup = function(){\n\t\t\tapi.call('getCurrentUser', {}, function(userDetails){\n\t\t\t\tconsole.log(userDetails);\n\t\t\t\tset(userDetails);\n\t\t\t\tconsole.log(user);\n\t\t\t});\n\t\t}\n\t\t\n\t\tvar login = function(username, password, success, error){\n\t\t\tapi.login(username, password)\n\t\t\t.success(function(response){\n\t\t\t\tconsole.log(response);\n\t\t\t\t$window.localStorage.setItem(\"bdAccessToken\", response.access_token);\n\t\t\t\tif (success) success(response);\n\t\t\t})\n\t\t\t.error(function(err){\n\t\t\t\tconsole.log(err);\n\t\t\t\tif(error) error(err);\n\t\t\t})\n\t\t}\n\t\t\n\t\tvar logout = function(){\n\t\t\t$window.localStorage.removeItem(\"bdAccessToken\");\n\t\t\tuser = {};\n\t\t\tconsole.log(\"logged out\");\n\t\t\t$location.path(\"/login\");\n\t\t}\n\t  \n\t  return {\n      get:function(){ return user;},\n      isLoggedIn : isLoggedIn,\n      set: set,\n      login:login,\n      logout:logout,\n      setup: setup\n    };\n    \n  }\n\n})();","(function () {\n\n  angular\n    .module('bdApp')\n    .controller('istackCtrl', istackCtrl);\n\n  istackCtrl.$inject = ['$window', '$scope', '$q', 'jean'];\n  \n  \n  \n  function istackCtrl($window, $scope, $q, jean) {\n\t  var isvm = this;\n\n\t\tisvm.centerPan = false;\t\t\n\t\tisvm.zoom = false;\n\t\tisvm.pan = {\"x\":50, \"y\":30};\n\t\tisvm.isMobile = function(){ return $window.innerWidth<800 };\n\t\t\n\t\t\n\t\tisvm.toggleZoom = function(){\n\t\t\tisvm.zoom = !isvm.zoom\n\t\t}\n\t\t\n\t\tisvm.touchEnd = function(){\n\t\t\tisvm.dragTracker = {\"x\":0,\"y\":0};\n\t\t\t$scope.$apply();\n\t\t}\n\t\t\n\t\tisvm.returnPan = function(){\n\t\t\tif (isvm.isMobile()) return false;\n\t\t\tisvm.pan = \"50% 30% 0\";\t\n\t\t\tisvm.centerPan = true;\n\t\t\timages = angular.element(document.querySelectorAll(\"#zoom-frame img\"));\n\t\t\tsetTimeout(function(){\n\t\t\t\timages.css({\"transform-origin\":isvm.pan});\n\t\t\t}, 200);\n\t\t}\n\t\t\t\t\n\t\tisvm.touchStart= function(e){\t\n\t\t\t//Setup Swipe starting point\n\t\t\tisvm.swipeStart={\"x\":e.touches[0].clientX,\"y\":e.touches[0].clientY};\n\t\t\t//Clear out Swipe Object\n\t\t\tisvm.swipe={};\n\t\t}\n\t\t\n\t\tisvm.zoomDrag = {\"x\":0,\"y\":0};\n\t  isvm.dragTracker = {\"x\":0,\"y\":0};\n\t\t\n\t\tisvm.touchMove= function(e){\n\t\t\t\n\t\t\tvar images = angular.element(document.querySelectorAll(\"#zoom-frame img\"));\n\t\t\t//Only Drag on mobile\n\t\t\tif (!isvm.isMobile()) return false;\n\t\t\t//Only run function if we're zoomed in\n\t\t\tif (!isvm.zoom) return false;\n\t\t\t//Prevent Scrolling?\n\t\t\te.preventDefault();\n\t\t\t\n\n\t\t\tvar touch = e.touches[0],\n\t\t\ttarget = touch.target,\n\t\t\tdrag = {\n\t\t\t\t\"x\" : touch.clientX-isvm.swipeStart.x,\n\t\t\t\t\"y\" : touch.clientY-isvm.swipeStart.y\n\t\t\t};\n\t\t\t\n\t\t\t//Subtract previous returns of this drag length to get the amount dragged since last return\t\n\t\t\tvar x = drag.x-isvm.dragTracker.x,\n\t\t\ty = drag.y-isvm.dragTracker.y;\n\t\t\n\t\t\t//Get drag % of container for Transform Origin Only \n\t\t\tvar x = (x/target.clientWidth*100)+isvm.zoomDrag.x,      \n\t\t\ty = (y/target.clientHeight*100)+isvm.zoomDrag.y;\n\n\t\t\t//Set up max bounds\n\t\t\tvar bounds={\"y\":{},\"x\":{}}; \n\t\t\tbounds.y.top    = 60;\n\t\t\tbounds.y.bottom = -90;\n\t\t\tbounds.x.left   = -120;\n\t\t\tbounds.x.right  = 90;\n\t\t\t\n\t\t\t//Apply Bounds\t\n\t\t\tif (y>bounds.y.top) y = bounds.y.top;\n\t\t\tif (y<bounds.y.bottom) y = bounds.y.bottom;\n\t\t\tif (x<bounds.x.left) x = bounds.x.left;\n\t\t\tif (x>bounds.x.right) x = bounds.x.right;\n\t\t\t\n\t\t\t//Build Move Objext\t\t\n\t\t\tvar move = {\"x\":x,\"y\":y};\n\t\t\tisvm.zoomDrag = move;\t \t       \n\t        \n\t\t\t//Alter transform origin\n\t\t\tvar pan = -x + \"% \" + -y + \"% 0\";\n\t\t\timages.css({\"transform-origin\":pan});\n\n\t\t\tisvm.dragTracker = drag;\t\n\t\t\t$scope.$apply();\n\n\t\t}\n\t\t\n\n\n\n\t\tisvm.dragPan = function(u, event) {\n\t\t\n\t\t\tconsole.log(event.direction);\n\t\t\t\n\t\t\t\n\t\t\t//Only Drag on mobile\n\t\t\tif (!isvm.isMobile()) return false;\n\t\t\t\n\t\t\t//Only run function if we're zoomed in\n\t\t\tif (!isvm.zoom) return false;\n\t\t\t\n\t\t\tvar images = angular.element(document.querySelectorAll(\"#zoom-frame img\")),\n\t\t\twindowHeight = window.innerHeight,\n\t\t\torigHeight = images[0].height,\n\t\t\tnewHeight = origHeight*1.7,\n\t\t\tframe={\n\t\t\t\t\"width\":event.target.clientWidth,\n\t\t\t\t\"height\":event.target.clientHeight\n\t\t\t};\n\t\t\t\n\n\t\t\t//Get drag length\n\t\t\tvar drag = {\n\t\t\t\t\"x\" : event.deltaX,\n\t\t\t\t\"y\" : event.deltaY\n\t\t\t}\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t//Subtract previous returns of this drag length to get the amount dragged since last return\t\n\t\t\tvar x = drag.x-isvm.dragTracker.x,\n\t\t\ty = drag.y-isvm.dragTracker.y;\n\n\t\t\tconsole.log(x,y);\n\t\t\t\n\t\t\t//Get drag % of container for Transform Origin Only \n\t\t\tvar x = Math.abs(x)/frame.width*100;      \n\t\t\tx = (drag.x<0)?-x:x;\t       \n\t\t\tvar y = Math.abs(y)/frame.height*100;\n\t\t\ty = (drag.y<0)?-y:y;\n\t\t\t\n\t\t\t//Add these values to the last drag. This essentially allows drag and drop\n\t\t\tx=x+isvm.zoomDrag.x;\n\t\t\ty=y+isvm.zoomDrag.y;\n\t\t\t\t \n\t\t\t//Set up max bounds\n\t\t\tvar bounds={\"y\":{},\"x\":{}}; \n\n\t\t\t/*//Left/Right Bounds\n\t\t\tbounds.y.top =(newHeight/2)+175;\n\t\t\tbounds.y.bottom =-(newHeight*.225);\n\t\t\tbounds.x.left = -(event.target.clientWidth-(event.target.clientWidth*.05));\n\t\t\tbounds.x.right = event.target.clientWidth-(event.target.clientWidth*.05);*/\n\t\t\t\t\n\t\t\t//Transform Origin Bounds\n\t\t\tbounds.y.top    = 60;\n\t\t\tbounds.y.bottom = -90;\n\t\t\tbounds.x.left   = -150;\n\t\t\tbounds.x.right  = 60;\n\t\t\t\t\n\t\t\tif (y>bounds.y.top) y = bounds.y.top;\n\t\t\tif (y<bounds.y.bottom) y = bounds.y.bottom;\n\t\t\tif (x<bounds.x.left) x = bounds.x.left;\n\t\t\tif (x>bounds.x.right) x = bounds.x.right;\n\t\t\t\n\t\t\t//Build Move Objext\t\t\n\t\t\tvar move = {\"x\":x,\"y\":y}\n\t\t\t\n\t\t\tconsole.log(move);\n\t\t\t//Register Drag\n\t\t\tisvm.zoomDrag = move;\t \t       \n\t        \n\t       \n\t\t\t//Alter transform origin\n\t\t\tvar pan = -x + \"% \" + -y + \"% 0\";\n\t\t\timages.css({\"transform-origin\":pan});\n\n\t\t\t/*//Alter Left/Bottom\n\t\t\timages.css('left', move.x+\"px\");\n\t\t\timages.css('bottom', -move.y+\"px\");*/\n\t\t\t\n\t\t\t//When drag is over, reset drag tracker\t \n\t\t\tisvm.dragTracker = event.isFinal ? {\"x\":0,\"y\":0} : drag;\n\t\t\t\t \n\n\t\t}\n\t\t\n\n\t\t\n\n\t\t\n\n\t\tisvm.scanImage = function(x,y){\n\n\t\t\tsetTimeout(function(){\n\t\t\t\tisvm.centerPan = false;\n\t\t\t}, 200);\n\t\t\t\n\t\t\t\n\t\t\tframe = angular.element(document.querySelector(\"#zoom-frame\"))[0];\n\t\t\tfWidth = frame.clientWidth;\n\t\t\tfHeight = frame.clientHeight;\n\t\t\trect = frame.getBoundingClientRect();\n\t\t\trootDoc = frame.ownerDocument.documentElement;\n\t\t\t\t//calculate the offset of the frame from the top and left of the document\n\t\t\toffsetT = rect.top + $window.pageYOffset - rootDoc.clientTop\n\t\t\toffsetL = rect.left + $window.pageXOffset - rootDoc.clientLeft\n\n\t\t\t//calculate current cursor position inside the frame, as a percentage\n\t\t\txPosition = ((x - offsetL) / fWidth) * 100\n\t\t\tyPosition = ((y - offsetT) / fHeight) * 100\n\t\t\t\n\t\t\t\n\t\t\t/*\n\t\t\tconsole.log(x,y);\n\t\t\tconsole.log(fWidth);\n\t\t\tconsole.log(offsetL);\n\t\t\tconsole.log(x-offsetL);\n\t\t\tconsole.log(xPosition, yPosition);\n\t\t\t*/\n\t\t\tif ($window.innerWidth < isvm.breakPoint) pan = (100-xPosition) + \"% \" + (100-yPosition) + \"% 0\";\n\t\t\telse pan = (xPosition) + \"% \" + (yPosition) + \"% 0\";\n\t\t\tisvm.pan=pan;\n\t\t\timages = angular.element(document.querySelectorAll(\"#zoom-frame img\"));\n\t\t\timages.css({\"transform-origin\":pan});\n\t\t}\n\t\t\n\t\tisvm.trackMouse = function($event){\n\t\t\t//if (isvm.isMobile()) return false;\n\t\t\tisvm.scanImage($event.pageX,$event.pageY);\n\t\t}\n\n\t\t\t\n  }\n\n})();","(function () {\n\n  angular\n    .module('bdApp')\n    .directive('imageStack', imageStack);\n\t\t\n\n\t\n  function imageStack () {\n    return {\n      restrict: 'AE',\n      templateUrl: '/directives/image-stack/image-stack.template.html',\n      controller: 'istackCtrl as isvm',\n      scope : {\n        jeanData : '='\n      },\n      link: function(scope, ele, attrs, ctrl) {\n\t      \n\t     \n\t     ele.on('touchstart', function(e){\n\t\t\t \tscope.isvm.touchStart(e);\t\n\t     });\t\n\t     \n\t     ele.on('touchmove', function(e){\n\t\t\t \tscope.isvm.touchMove(e);\t\n\t     });\t\t\n\t     \n\t     ele.on('touchend', function(e){\n\t\t\t \tscope.isvm.touchEnd(e);\t\n\t     });\t\t\t\t\n\t\t\t\n       \n\t      /*\n\t      $swipe.bind(ele, {\n          'move': function(event) {\n\t\t\t\t\t\tscope.isvm.scanImage(coords.x,coords.y);\n          }\n\t      });\n\t     */\n\n\t    }\n    };\n    \n  }\n  \n    \n  \n  \n\n})();","(function () {\n\n  angular\n    .module('bdApp')\n    .controller('addressChoiceCtrl', addressChoiceCtrl);\n\n  addressChoiceCtrl.$inject = ['$scope', '$filter', 'messages', 'api', 'user'];\n  \n  function addressChoiceCtrl($scope, $filter, messages, api, user) {\n\t  \n\t  $scope.editing=false;\n\t  $scope.active=false;\n\t\t$scope.addForm = {};\n\t\t$scope.model = {};\n\t\t$scope.user = user.get();\n\n\t\tvar addFormFields = ['address_line_1','address_line_2','city','state','zip'];\n\t\t\n\t\t\n\t\t//Choose Primary Address\n\t\t$scope.choosePrimary = function(address){\n\t\t\tfor (a = 0; a< $scope.user.addresses.length; a++){\n\t\t\t\tvar add = $scope.user.addresses[a];\n\t\t\t\tadd.primary = (add.id == address.id ? 1:0);\n\t\t\t}\n\t\t\tapi.call('postMyAddress', address);\n\t\t}\n\t\t\t\t\n\t\t$scope.startEditing = function(){\n\t\t\t//Bring Primary address to the top\n\t\t\t$scope.user.addresses = $filter('orderBy')($scope.user.addresses, '-primary');\n\t\t\t$scope.editing = true;\n\t\t}\n\t\t\n\t\t$scope.stopEditing = function(){\n\t\t\t$scope.editing = false;\n\t\t}\n\n\t\t$scope.editAdd = {};\n\t\t\n\t\t//Open Address Form\n\t\t$scope.open = function(index){\n\n\t\t\t$scope.active = true;\n\t\t\tif (!$scope.user.addresses) $scope.user.addresses = [];\n\t\t\t\n\t\t\t//New Address\n\t\t\tif (typeof index === 'undefined'){\n\t\t\t\t$scope.model = {};\n\t\t\t\t$scope.editAdd.data = null;\t\n\t\t\t}\n\t\t\t\n\t\t\t//Editing Existing...\n\t\t\telse{\n\t\t\t\t$scope.model = $scope.user.addresses[index];\n\t\t\t\t$scope.editAdd.index = index;\n\t\t\t\t$scope.editAdd.data =  angular.copy($scope.model);\n\t\t\t}\n\t\t\t\t\t\t\n\t\t}\n\t\t\n\n\t\tfunction resetForm(close){\n\t\t\tclose = close || true;\n\t\t\t$scope.editAdd = {};\n\t\t\t$scope.model = {};\n\t\t\tif (close) $scope.active = false;\n\t\t}\n\n\t\t//Clear Address Form\n\t\t$scope.clear = function(){\n\t\t\tvar dataObj = $scope.editAdd.data;\n\t\t\tif (dataObj !== null) $scope.user.addresses[$scope.editAdd.index] = $scope.editAdd.data;//Reset Address\n\t\t\tresetForm();\t\t\t\n\t\t}\n\t\t\n\t\tfunction findAddressbyKey(key, value){\n\t\t\tvar primary = $scope.user.addresses.filter(function (add) {\n\t\t\t   return (add[key] == value);\n\t\t\t});\n\t\t\treturn primary[0];\n\t\t}\n\t\t\n\t\t\n\t\t//Remove Address and save user\n\t\t$scope.remove = function(addressId){\n\t\t\t//Don't allow user to delete their last address..\n\t\t\tif ($scope.user.addresses.length < 2){\n\t\t\t\tmessages.set(\"You can't remove your last address\", \"error\");\n\t\t\t\treturn false;\t\n\t\t\t}\n\t\t\tapi.call('deleteMyAddress', addressId, function(result){\n\t\t\t\t//Remove deleted address...\n\t\t\t\tfor(i=0; i<$scope.user.addresses.length; i++){\n\t\t\t\t\tvar add = $scope.user.addresses[i];\n\t\t\t\t\tif (add.id == addressId) $scope.user.addresses.splice(i,1);\n\t\t\t\t}\n\t\t\t\t//Change to new primary if primary was delted...\n\t\t\t\tif(result.new_primary_id){\t\t\t\t\n\t\t\t\t\tvar newPrimary = result.new_primary_id;\n\t\t\t\t\taddress = findAddressbyKey(\"id\", newPrimary);\n\t\t\t\t\taddress.primary=1;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\t\n\t\t//Save Form\n\t\t$scope.save = function(){\n\t\t\tvar newAdd = $scope.model.id ? false : true;\n\t\t\tapi.call('postMyAddress', $scope.model, function(result){\t\n\t\t\t\tif (newAdd)\t$scope.user.addresses.push(result);\n\t\t\t\t$scope.active = false;\n\t\t\t\t$scope.model = {};\t\n\t\t\t});\n\t\t}\n\t\t\n\t\t\n\t\t//US States\n\t\t$scope.states = [\n\t\t\t{\n\t\t\t  \"name\": \"Alabama\",\n\t\t\t  \"abbreviation\": \"AL\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Alaska\",\n\t\t\t  \"abbreviation\": \"AK\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Arizona\",\n\t\t\t  \"abbreviation\": \"AZ\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Arkansas\",\n\t\t\t  \"abbreviation\": \"AR\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"California\",\n\t\t\t  \"abbreviation\": \"CA\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Colorado\",\n\t\t\t  \"abbreviation\": \"CO\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Connecticut\",\n\t\t\t  \"abbreviation\": \"CT\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Delaware\",\n\t\t\t  \"abbreviation\": \"DE\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"District Of Columbia\",\n\t\t\t  \"abbreviation\": \"DC\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Florida\",\n\t\t\t  \"abbreviation\": \"FL\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Georgia\",\n\t\t\t  \"abbreviation\": \"GA\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Hawaii\",\n\t\t\t  \"abbreviation\": \"HI\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Idaho\",\n\t\t\t  \"abbreviation\": \"ID\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Illinois\",\n\t\t\t  \"abbreviation\": \"IL\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Indiana\",\n\t\t\t  \"abbreviation\": \"IN\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Iowa\",\n\t\t\t  \"abbreviation\": \"IA\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Kansas\",\n\t\t\t  \"abbreviation\": \"KS\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Kentucky\",\n\t\t\t  \"abbreviation\": \"KY\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Louisiana\",\n\t\t\t  \"abbreviation\": \"LA\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Maine\",\n\t\t\t  \"abbreviation\": \"ME\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Maryland\",\n\t\t\t  \"abbreviation\": \"MD\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Massachusetts\",\n\t\t\t  \"abbreviation\": \"MA\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Michigan\",\n\t\t\t  \"abbreviation\": \"MI\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Minnesota\",\n\t\t\t  \"abbreviation\": \"MN\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Mississippi\",\n\t\t\t  \"abbreviation\": \"MS\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Missouri\",\n\t\t\t  \"abbreviation\": \"MO\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Montana\",\n\t\t\t  \"abbreviation\": \"MT\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Nebraska\",\n\t\t\t  \"abbreviation\": \"NE\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Nevada\",\n\t\t\t  \"abbreviation\": \"NV\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"New Hampshire\",\n\t\t\t  \"abbreviation\": \"NH\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"New Jersey\",\n\t\t\t  \"abbreviation\": \"NJ\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"New Mexico\",\n\t\t\t  \"abbreviation\": \"NM\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"New York\",\n\t\t\t  \"abbreviation\": \"NY\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"North Carolina\",\n\t\t\t  \"abbreviation\": \"NC\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"North Dakota\",\n\t\t\t  \"abbreviation\": \"ND\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Ohio\",\n\t\t\t  \"abbreviation\": \"OH\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Oklahoma\",\n\t\t\t  \"abbreviation\": \"OK\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Oregon\",\n\t\t\t  \"abbreviation\": \"OR\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Pennsylvania\",\n\t\t\t  \"abbreviation\": \"PA\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Rhode Island\",\n\t\t\t  \"abbreviation\": \"RI\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"South Carolina\",\n\t\t\t  \"abbreviation\": \"SC\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"South Dakota\",\n\t\t\t  \"abbreviation\": \"SD\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Tennessee\",\n\t\t\t  \"abbreviation\": \"TN\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Texas\",\n\t\t\t  \"abbreviation\": \"TX\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Utah\",\n\t\t\t  \"abbreviation\": \"UT\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Vermont\",\n\t\t\t  \"abbreviation\": \"VT\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Virginia\",\n\t\t\t  \"abbreviation\": \"VA\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Washington\",\n\t\t\t  \"abbreviation\": \"WA\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"West Virginia\",\n\t\t\t  \"abbreviation\": \"WV\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Wisconsin\",\n\t\t\t  \"abbreviation\": \"WI\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Wyoming\",\n\t\t\t  \"abbreviation\": \"WY\"\n\t\t\t}\n\t\t];\n    \n\t\t\n\t\t\t  \n\t}\n\t\n})();\n\t\t","(function () {\n\n  angular\n    .module('bdApp')\n    .directive('addressChoice', addressChoice);\n\t\t\n\n\t\n  function addressChoice () {\n    return {\n      restrict: 'AE',\n      templateUrl: '/directives/address-choice/address-choice.template.html',\n      controller: 'addressChoiceCtrl as adcvm',\n      scope : {\n\t\t\t\tuser : '='\n      }\n    };\n    \n  }\n  \n    \n  \n  \n\n})();","(function () {\n\n  angular\n    .module('bdApp')\n    .controller('chooserCtrl', chooserCtrl)\n\t\n\t\tchooserCtrl.$inject = ['$scope', '$element','$timeout', '$window', 'jean', 'popups'];\n\n\t\t\n\t\tfunction chooserCtrl($scope, $element, $timeout, $window, jean, popups) {\n\t\n\t\t\tvar chvm = this;\n\t\t\t\n\t\t\t//popups\n\t\t\tchvm.popups = popups.get();\n\t\t\tchvm.jeanData = jean.get();\n\t\t\tchvm.breakPoint = 800;\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\tfunction scrollToLeft(el, scrollTo, scrollDuration) {\n\t\t\t\tconsole.log(\"STL\");\n\t\t\t\tconsole.log(el);\n\t\t\t\t//Select First Element\n\t\t\t\tel = el[0];\n\t\t\t\t//Center Scroll To\n\t\t\t\tscrollTo = scrollTo-(el.offsetWidth/2)+40;\n\t\t\t\t\n\t\t\t\tvar maxLeft = el.scrollWidth - el.offsetWidth;\n\t\t\t\t\n\t\t\t\tif (scrollTo >= maxLeft) scrollTo = maxLeft-1;\n\t\t\t\tif (scrollTo == maxLeft) scrollTo = maxLeft-1;\n\t\t\t\tvar stepNum = Math.ceil(scrollDuration / 15),\n\t\t\t\t\t\tdistance = scrollTo - el.scrollLeft,\n\t\t\t\t\t\tscrollStep = (distance / stepNum),\n\t\t\t\t\t\tscrollTest = (el.scrollLeft < scrollTo ? function(a,b){return a<=b-1;} : function(a,b){return a>=b+1;} );\t\t\n\t\t\t\t/*\n\t\t\t\tconsole.log(\"current Scoll pos: \"+el.scrollLeft);\n\t\t\t\tconsole.log(\"Scroll to \"+scrollTo);\n\t\t\t\tconsole.log(\"distance to go \"+distance);\n\t\t\t\tconsole.log(scrollStep);\n\t\t\t\tconsole.log(\"func: \"+scrollTest)\n\t\t\t\tconsole.log(\"eval\");\n\t\t\t\tconsole.log(scrollTest(el.scrollLeft, scrollTo ));\n\t\t\t\tconsole.log(\"done\");\n\t\t\t\t*/\n\t\t\t\t\t\t\n\t\t\t\tvar scrollInterval = setInterval(function(){    \n\t\t\t\t\n\t\t\t\t\tif(scrollTest(el.scrollLeft, scrollTo )){\n\t\t\t\t\t\tvar newScroll = el.scrollLeft+scrollStep;\n\t\t\t\t\t\tif (newScroll >= maxLeft) newScroll = maxLeft-1;\n\t\t\t\t\t\tel.scrollLeft = newScroll;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\telse clearInterval(scrollInterval); \n\t\t      \n\t  \t\t},15);\n\t\t\t  \n\t\t\t}\n\n\t\t\tchvm.selectorCoords = {\"top\":0, \"left\":0};\n\t\t\t\n\t\t\t\n\t\t\t//Center Selector on chooser change... Center on selected attr if edting preexisting jean...\n\t\t\t$scope.$watch('active', function(newValue,oldValue) {\t\n\t\t\t\t\n\t\t\t\t//Only on active choosers...\n\t\t\t\tif (newValue == true){\n\n\t\t\t\t\t$timeout(function(){\n\t\t\t\t\t\t\n\t\t\t\t\t\t//Get the data id \n\t\t\t\t\t\tvar dataId = chvm.jeanData[$scope.step.jeanKey];\n\t\t\t\t\t\n\t\t\t\t\t\t//Make sure this isn't an embedded model\n\t\t\t\t\t\tif (typeof(dataId)== 'object') dataId = dataId[$scope.step.dataKey4];\n\t\t\t\t\t\t\n\t\t\t\t\t\tvar elementId = $scope.step.jeanKey+\"_\"+dataId;\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t\t\tvar activeElement = angular.element(document.querySelector('#'+elementId));\n\t\t\t\t\t\t\n\t\t\t\t\t\tchvm.selectorCoords.top = activeElement.prop('offsetTop');\n\t\t\t\t\t\tchvm.selectorCoords.left = activeElement.prop('offsetLeft');\n\t\t\t\t\t\t\t\n\t\t\t\t\t\tvar selector = angular.element(document.querySelector(\"#\"+$scope.step.jeanKey+\"-selector\"));\n\t\t\t\t\t\tselector.css({'top':chvm.selectorCoords.top+'px', 'left':chvm.selectorCoords.left+'px'});\n\t\t\t\t\t\t\n\t\t\t\t\t\t//Mobile Choosers\n\t\t\t\t\t\tif ($window.innerWidth < chvm.breakPoint){\n\t\t\t\t\t\t\tvar chooser = angular.element($element[0].querySelector('.chooser-grid'));\t\n\t\t\t\t\t\t\tvar left = (chooser[0] ? chvm.selectorCoords.left-(chooser[0].offsetWidth/2)+40 : 0);\n\t\t\t\t\t\t\tchooser.prop('scrollLeft', left);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t//Desktop Choosers\n\t\t\t\t\t\telse{\t\t\t\t\t\t\n\t\t\t\t\t\t\tvar chooser = angular.element($element[0]);\t\n\t\t\t\t\t\t\tchooser.prop('scrollTop', chvm.selectorCoords.top - 15);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t}, 200);\n\t\t\t\t\t\n\t\t\t\t}\t\t\n\t\t\t\t\n    \t});\n\n\n\t\t\tchvm.selectAttr = function($event, id, attr, selector){\n\t\t\t\t\n\t\t\t\tvar chooser = angular.element(document.querySelector(\"#\"+attr+\"-chooser\"));\n\t\t\t\tvar selector = angular.element(document.querySelector(\"#\"+attr+\"-selector\"));\n\t\t\t\tvar top = angular.element($event.target).prop('offsetTop');\n\t\t\t\tvar left = angular.element($event.target).prop('offsetLeft');\n\t\t\t\tvar text = angular.element(document.querySelectorAll('#item-title'));\n\t\t\t\t\n\t\t\t\ttext.css({'right':'-400px', 'opacity':0});\n\t\t\t\tselector.css({'top':top+'px', 'left':left+'px'});\n\t\t\t\t\n\t\t\t\tchvm.selectorCoords = {\"top\":top,\"left\":left};\n\t\t\t\tif ($window.innerWidth < chvm.breakPoint) scrollToLeft(chooser, left, 200);\n\t\t\t\t\n\t\t\t\t$timeout(function(){\n\t\t\t\t\ttext.css({'right':'15px', 'opacity':1});\t\t\t\t\n\t\t\t\t\tjean.set(attr,id);\t\n\t\t\t\t}, 200);\n\t\t\t\n\t\t\t}\n\t\t\t\n\t\t\tchvm.jeanSet = function(attr, val){\n\t\t\t\tchvm.jeanData[attr] =\tval;\n\t\t\t}\n\t\t\n\t\t}\t\n\t\t\t\n})();","(function () {\n\n  angular\n    .module('bdApp')\n    .directive('chooser', chooser);\n\t\t\n  function chooser () {\n    return {\n      restrict: 'EA',\n      templateUrl: '/directives/choosers/chooser.template.html',\n      controller: 'chooserCtrl as chvm',\n      scope : {\n        step : '=',\n        dataset: '=',\n        active: '='\n      }\n    };\n  }\n\n})();","(function () {\n\n  angular\n    .module('bdApp')\n    .directive('fabricChooser', ['$window', function($window) {\n    \t\n\t\t\treturn {\n\t    \t\n\t      restrict: 'EA',\n\t      template: '<div class=\"fabric-chooser-container\" ng-include=\"viewUrl\"></div>',\n\t      controller: 'chooserCtrl as chvm',\n\t      scope : {\n\t        step : '=',\n\t        dataset: '=',\n\t\t\t\t\tactive: '='\n\t      },\n\t      \n\t      link: function($scope){\n\t\t      \n\t\t      $scope.breakPoint = 800;\n\t\t      \n\t\t      //Template on window resize\n\t\t      $window.onresize = function() {\n\t          changeTemplate();\n\t          $scope.$apply();\n\t        };\n\t        \n\t        changeTemplate();\n\t            \n\t        function changeTemplate() {\n\t          var screenWidth = $window.innerWidth;\n\t          if (screenWidth < $scope.breakPoint) {\n\t            $scope.viewUrl = \"/directives/choosers/fabric-chooser.template-mobile.html\";\n\t          } else if (screenWidth >= $scope.breakPoint) {\n\t            $scope.viewUrl = \"/directives/choosers/fabric-chooser.template-desk.html\";\n\t          }\n\t        }\n\t\t      \n\t\t      \n\t\t      function positionChooser(){\n\t\t\t    \t//element.animate({scrollLeft: element.offset().left - 50}, \"slow\");\n\t\t\t    \t//var selector = angular.element(document.querySelector(\"#\"+attr+\"-selector\"));  \n\t\t      }\n\t\t      \n\t\t      \n\t\t      //Weight Filter\n\t\t      $scope.weightFilter = function(min, max){\n\t\t\t\t\t\treturn function(fabric){\n\t\t\t\t\t\t\tif (fabric.weight == 0) return false;\n\t\t\t\t\t\t\tif (min && fabric.weight < min) return false;\n\t\t\t\t\t\t\tif (max && fabric.weight > max) return false;\n\t\t\t\t\t    return true;\n\t\t\t\t\t  }\n\t\t\t\t\t};\n\t      }\n\t      \n\t   };\n    \n    \n  }]);\n\n})();","(function () {\n\n  angular\n    .module('bdApp')\n    .directive('genderChooser', genderChooser);\n\t\t\n  function genderChooser () {\n    return {\n      restrict: 'EA',\n      templateUrl: '/directives/choosers/gender-chooser.template.html',\n      controller: 'chooserCtrl as chvm',\n      scope : {\n        step : '=',\n        dataset: '=',\n        active: '='\n      }\n    };\n  }\n\n})();","(function () {\n\n  angular\n    .module('bdApp')\n    .directive('styleChooser', styleChooser);\n\t\t\n  function styleChooser () {\n    return {\n      restrict: 'EA',\n      templateUrl: '/directives/choosers/style-chooser.template.html',\n      controller: 'chooserCtrl as chvm',\n      scope : {\n        step : '=',\n        dataset: '=',\n        active: '='\n      },\n      link: function($scope){\n\t      $scope.checkGenderFilter = function(gender){\n\t\t\t\t\treturn function(style){\n\t\t\t\t\t\tg = gender == 1 ? \"male\":\"female\";\n\t\t\t\t\t\treturn style[g];\n\t\t\t\t  }\n\t\t\t\t};\n\t    }\n     \n\n    };\n  }\n\n})();","(function () {\n\n  angular\n    .module('bdApp')\n    .controller('loginFormCtrl', loginFormCtrl);\n\n  loginFormCtrl.$inject = ['$location', 'user', 'messages', '$scope','api'];\n  \n  function loginFormCtrl($location, user, messages, $scope, api) {\n    var logvm = this;\n    \n\t\tlogvm.messages=messages.get();\n\t\t\n\t\tlogvm.credentials = {\n      loginEmail : \"\",\n      loginPassword : \"\"\n    };\n    \n    \n  \tfunction validateEmail(email) {\n\t    var re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n\t    return re.test(email);\n\t\t}\n\t\n\t\n\t\t\n    /*\n    *\n    * LOGGING IN\n    *\n    */\n   \n    //Log user in and send errors to \"messages\"\n\t\tlogvm.login = function(email, password){\n\t\t\tmessages.reset();\n\t    if (logvm.validateLoginForm()){\n\t\t    console.log('valid');\n\t      user.login(email, password, function(){\n\t\t\t\t\tif ($scope.callback) $scope.callback();\n\t\t\t\t\tif ($scope.redirect) $location.path($scope.redirect);\n\t\t\t\t\tif (!$scope.callback && !$scope.redirect)\t$location.path('/closet');\n\t\t\t\t},\n\t\t\t\tfunction(err){\n\t\t\t\t\tif (err.message == \"Incorrect username or password.\") err.message = \"Incorrect Email address or password.\"\n\t\t\t\t\tmessages.set(err.message,\"error\");\n\t\t\t\t});\n\t\t  }\n\t\t}\n\t\t\n\t\t//Login form validation\n\t\tlogvm.validateLoginForm = function(){\t\t\t\t\n\t\t\tif(!validateEmail(logvm.credentials.loginEmail)){\n\t\t\t\tmessages.set(\"Please enter a valid Email address\", \"error\");\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif (!logvm.credentials.loginPassword){\n\t\t\t\tmessages.set(\"Please enter a password\", \"error\");\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn true;\t\n\t\t}\n\t\t\n\t\t\n\t\t\n\t\t/*\n\t\t*\n\t\t*  Forgot Password\n\t\t*\n\t\t*/\n\t\t\n\t\tfunction validatePassword(password){\n\t\t\tvar re = /^(?=.*[0-9])(?=.*[!@#$%^&*])[a-zA-Z0-9!@#$%^&*]{6,50}$/;\n\t\t\treturn re.test(password);\n\t\t}\t\t\t\t\n\n\t\tlogvm.forgotPassword = false;\n\t\tlogvm.forgotPassword2 = false;\t\t\n\t\tif($location.path()==\"/customer-register/\"){\n\t\t\tlogvm.forgotPassword = true;\t\t\t\n\t\t\tlogvm.customerReset = true;\n\t\t\tif($location.search().email){\n\t\t\t\tlogvm.credentials.loginEmail = $location.search().email;\n\t\t\t}\n\t\t}\n\t\t\n\n\t\t\n\t\t/* STEP 1 */\n\t\tlogvm.getResetToken = function(){\t\n\t\t\tmessages.reset();\n\t    if (logvm.validateForgot()){\t\n\t\t    console.log(\"running func from user\");\t    \n\t\t\t\tuser.getResetToken(logvm.credentials.loginEmail, \n\t\t\t\t\tfunction(result){ logvm.forgotPassword2 = true; },\n\t\t\t\t\tfunction(err){\n\t\t\t\t\t\terr.message = err.message == \"Username/client id combination not found\" ? \"We don't have an account registered for that emial\" : err.message;\n\t\t\t\t\t\tmessages.set(err.message,\"error\");\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t  }\n\t\t}\n\t\t\n\t\t//Forgot password set 1 validation\n\t\tlogvm.validateForgot = function(){\t\t\t\t\n\t\t\tif(!validateEmail(logvm.credentials.loginEmail)){\n\t\t\t\tmessages.set(\"Please enter a valid Email address\", \"error\");\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn true;\t\n\t\t}\n\t\t\n\t\t/* STEP 2 */\t\n\t\tlogvm.resetPassword = function(){\n\t\t\tmessages.reset();\n\t    if (logvm.validateForgot2()){\n\t\t\t\tdata={\n\t\t\t\t\t\"email\":logvm.credentials.loginEmail, \n\t\t\t\t\t\"token\":logvm.credentials.loginVerifcation, \n\t\t\t\t\t\"password\":logvm.credentials.newPassword\n\t\t\t\t}\t\t    \n\t\t    user.getResetToken(data, \n\t\t\t\t\tfunction(result){ \n\t\t\t\t\t\tmessages.set(\"Password reset successfully. Try logging in.\", \"success\");\n\t\t\t\t\t\tlogvm.forgotPassword = false;\n\t\t\t\t\t\tlogvm.forgotPassword2 = false;\n\t\t\t\t\t},\n\t\t\t\t\tfunction(err){\n\t\t\t\t\t\tmessages.set(err.message,\"error\");\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t  }\n\t\t}\n\t\t\n\t\t//Forgot password set 1 validation\n\t\tlogvm.validateForgot2 = function(){\t\t\t\t\n\t\t\tif(!validateEmail(logvm.credentials.loginEmail)){\n\t\t\t\tmessages.set(\"Please enter a valid Email address\", \"error\");\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\t\n\t\t\tif (!logvm.credentials.loginVerifcation){\n\t\t\t\tmessages.set(\"Please enter your verifcation code\", \"error\");\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif (!validatePassword(logvm.credentials.newPassword)){\n\t\t\t\tmessages.set(\"A valid password must: <ul><li>Be between 6 and 50 characters</li><li>Contain at least one number</li><li>Contain at least one uppercase letter</li><li>Contain at least one lowercase letter</li><li>Contain at least one special character (\\\"!,@,#,$,%,^,&, or *\\\")</li>\");\t\n\t\t\t}\n\n\t\t\tif (logvm.credentials.newPassword !== logvm.credentials.newPasswordConfirm){\n\t\t\t\tmessages.set(\"Password and Confirmation do not match\", \"error\");\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\t\n\t\t\treturn true;\t\n\t\t}\n\t\n\t\t//Log in via Facebook\n\t\tlogvm.loginFB = function(){\n\t\t\t\n\t\t}\n\n\t\t\t\n  }\n\n})();","(function () {\n\n  angular\n    .module('bdApp')\n    .directive('loginForm', loginForm);\n\t\t\n\n\t\n  function loginForm () {\n    return {\n      restrict: 'AE',\n      templateUrl: '/directives/login-form/login-form.template.html',\n      controller: 'loginFormCtrl as logvm',\n      scope : {\n\t\t\t\tredirect : \"=?\",\n\t      callback : \"=?\",\n\t      forgot : \"=?\"\n      }\n    };\n    \n  }\n  \n    \n  \n  \n\n})();","(function () {\n\n  angular\n    .module('bdApp')\n    .controller('navigationCtrl', navigationCtrl);\n\n  navigationCtrl.$inject = ['$location','$route','popups', 'user', '$window', 'loader'];\n  function navigationCtrl($location, $route, popups, user, $window, loader) {\n    var vm = this;\n\n\t\tvm.loader = loader.get('loader');\n\t\tvm.saver = loader.get('saver');\n\t\tvm.drops={};\n\t\tvm.drops.acct=false;\n\t\tvm.mobileMenu = false;\n\t\t\t\t\n\t\tvm.isLoggedIn = user.isLoggedIn();\n\n\t\tvm.logout = function(){\t\t\t\n\t\t\tuser.logout();\n\t\t}\n  }\n\n})();","(function () {\n\n  angular\n    .module('bdApp')\n    .directive('navigation', navigation);\n\n  function navigation () {\n    return {\n      restrict: 'EA',\n      templateUrl: '/directives/navigation/navigation.template.html',\n      controller: 'navigationCtrl as navvm'\n    };\n  }\n\n})();","(function () {\n\n  angular\n    .module('bdApp')\n    .controller('registerFormCtrl', registerFormCtrl);\n\n  registerFormCtrl.$inject = ['$scope', '$location', 'user', '$sce', 'messages'];\n  \n  function registerFormCtrl($scope, $location, user, $sce, messages) {\n    var regvm = this;\n    \n\t\tregvm.messages=messages.get();\n\t\t\n\t\tregvm.credentials = {\n      first_name : \"\",\n      last_name:\"\",\n      email : \"\",\n      password : \"\"\n    };\n\t\n\t\t//Validate Registration Form\n\t\tregvm.validateRegistrationForm = function () {\n\t\t\t\t\t\t\n\t\t\tfunction validatePassword(password){\n\t\t\t\t//console.log(regvm.credentials.password.length > 5);\n\t\t\t\t//contains numbers\n\t\t\t\t//console.log(regvm.credentials.password.search(/\\d/)>-1);\n\t\t\t\t//contains lowercase letters\n\t\t\t\t//console.log(regvm.credentials.password.search(/[a-z]/) > -1);\n\t\t\t\t//contains uppercase letters\n\t\t\t\t//console.log(regvm.credentials.password.search(/[A-Z]/) > -1);\n\t\t\t\t\n\t\t\t\t//RE to test all\n\t\t\t\tvar re = /^(?=.*[0-9])(?=.*[!@#$%^&*])[a-zA-Z0-9!@#$%^&*]{6,50}$/;\n\t\t\t\treturn re.test(password);\n\t\t\t}\t\t\t\n\t\t\t\t\t\t\t\t\n\t\t\tfunction validateEmail(email) {\n\t\t    var re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n\t\t    return re.test(email);\n\t\t\t}\n\n\t\t\t\n\t\t\tif (!regvm.credentials.email || !regvm.credentials.first_name || !regvm.credentials.last_name || !regvm.credentials.password || !regvm.credentials.passwordConfirm){\n\t\t\t\tmessages.set(\"All fields are required\", \"error\");\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\t\n\t\t\tif (!validatePassword(regvm.credentials.password)){\n\t\t\t\tmessages.set(\"A valid password must: <ul><li>Be between 6 and 50 characters</li><li>Contain at least one number</li><li>Contain at least one uppercase letter</li><li>Contain at least one lowercase letter</li><li>Contain at least one special character (\\\"!,@,#,$,%,^,&, or *\\\")</li>\");\t\n\t\t\t}\n\t\t\t\n\t\t\tif (regvm.credentials.password !== regvm.credentials.passwordConfirm){\n\t\t\t\tmessages.set(\"Password and Confirmation do not match\", \"error\");\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\t\n\t\t\tif(!validateEmail(regvm.credentials.email)){\n\t\t\t\tmessages.set(\"Please Enter a valid E-mail address\", \"error\");\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\t\n\t\t\treturn true;\n\t\t\t\n\t\t}\n\t\t\n\t\t\n\t\t\n\t\t//Register User\n    regvm.registerUser = function () {\n\t    messages.reset();\n\t    if (regvm.validateRegistrationForm()){\n\t\t    user.register(regvm.credentials.email, regvm.credentials.password, regvm.credentials.first_name, regvm.credentials.last_name, function(result){\n\t\t\t\t\tif ($scope.callback) $scope.callback(regvm.credentials);\n\t\t\t\t\tif ($scope.redirect) $location.path($scope.redirect);\n\t\t\t\t\tif (!$scope.callback && !$scope.redirect)\t$location.path('/closet');    \n\t\t    },   \n\t\t    function(err){\n\t\t\t    if (err.message = \"Duplicate email address\") err.message = \"This user is already registered.\";\n\t\t\t\t  messages.set(err.message, \"error\");\n\t\t\t  });\t\t\t  \n\t\t  }\n    };\t\n    \n    \n    \t\t\n  }\n\n})();","(function () {\n\n  angular\n    .module('bdApp')\n    .directive('registerForm', registerForm);\n\t\t\n\n\t\n  function registerForm () {\n    return {\n      restrict: 'AE',\n      templateUrl: '/directives/register-form/register-form.template.html',\n      controller: 'registerFormCtrl as regvm',\n      scope : {\n\t\t\t\tredirect : \"=?\",\n\t      callback : \"=?\"\n      }\n    };\n    \n  }\n  \n    \n  \n  \n\n})();","(function () {\n\n  angular\n    .module('bdApp')\n    .directive('jeanCard', jeanCard);\n    \n\t  function jeanCard () {\n\t\t\treturn {\n\t    \t\n\t      restrict: 'EA',\n\t      replace:true,\n\t\t\t\ttemplate: '<ng-include src=\"templatePath\"/>',\n\t      scope : {\n\t        click : '=?',\n\t        data: '=',\n\t      },\n\t      link: function link(scope, element, attrs) {\n\t\t      console.log(attrs);\n\t\t\t\t\tvar slug = attrs.template ? attrs.template : \"jean-card\";\n\t\t      scope.templatePath=\"/directives/jean-card/\"+slug+\".template.html\";\n\t\t\t\t}\n\t  \t} \n\t  }\n  \n    \n\n})();\n/*\n\t      function($scope) {\n\t\t      $scope.getTemplateUrl = function() {\n\t\t\t      return '';\n\t\t      }\n\t\t    }\n\t\t    */","(function () {\n\n  angular\n    .module('bdApp')\n    .controller('socialCtrl', socialCtrl)\n\t\n\t\tsocialCtrl.$inject = ['$scope', 'popups', 'api'];\n\n\t\t\n\t\tfunction socialCtrl($scope, popups, api) {\n\t\n\t\t\tvar sovm = this;\n\t\t\tsovm.jean = $scope.jean;\n\t\t\t\n\t\t\tsovm.jeanToUrl = function(){\n\t\t\t\tvar url = document.location.origin+\"/customizer/\";\n\t\t\t\turl += sovm.jean.id ? sovm.jean.id : api.getDataCode(sovm.jean);\n\t\t\t\turl += \"/copy\";\n\t\t\t\treturn url;\n\t\t\t}\n\t\t\t\n\t\t\tvar sharingUrls = {};\n\t\t\t\n\t\t\tvar socialTitle = \"Check out my custom jeans built with Blue Delta!\";\n\t\t\tvar socialDescription = \"Cras justo odio, dapibus ac facilisis in, egestas eget quam.\";\n\n\t\t\t//Facebook sharing URL\n\t\t\tsharingUrls.facebook = function(url, image){\n\t\t\t\tif (!url) return false;\n\t\t\t\tvar baseString = 'https://www.facebook.com/sharer/sharer.php?u='+url+'&description='+socialDescription+'&title='+socialTitle;\n\t\t\t\tif (image) baseString += '&images='+urlencode(image);\n\t\t\t\treturn baseString;\n\t\t\t}\n\t\t\t\n\t\t\t//Twitter sharing URL\n\t\t\tsharingUrls.twitter = function(url){\n\t\t\t\tif (!url) return false;\n\t\t\t\treturn 'http://twitter.com/home?status='+socialTitle+'-'+url;\n\t\t\t}\n\t\t\t\n\t\t\t//Email sharing URL\n\t\t\tsharingUrls.email = function(url){\n\t\t\t\treturn \"mailto:?&subject=\"+socialTitle+\"&body=\"+socialDescription+\" - \"+url;\n\t\t\t}\n\t\t\t\n\t\t\t//Pinterest sharing URL\n\t\t\tsharingUrls.pinterest = function (url, image){\n\t\t\t\tif(url || image) return false;\n\t\t\t\treturn 'https://pinterest.com/pin/create/button/?url='+url+'&media='+image+'&description='+socialTitle+'%0A'+socialDescription;\t\n\t\t\t}\n\n\t\t\tsovm.share = function(social){\n\t\t\t\tvar url = sharingUrls[social](sovm.jeanToUrl());\n\t\t\t\tif (url !== false){\n\t\t\t\t\tif (social=='email') window.open(url, '_self');\n\t\t\t\t\telse window.open(url, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600');\n\t\t\t\t}\n\t\t\t\telse console.log(\"Error builiding social URL\");\n\t\t\t\treturn false;\n\t\t\t};\n\t\t\n\t\t}\t\n\t\t\t\n})();","(function () {\n\n  angular\n    .module('bdApp')\n    .directive('socialActions', [function() {\n    \t\n\t\t\treturn {\n\t    \t\n\t      restrict: 'EA',\n\t      replace:true,\n\t\t\t\ttemplateUrl: '/directives/social-actions/social-actions.template.html',\n\t      scope : {\n\t        jean : '=',\n\t        display: '=',\n\t        savefunc:'='\n\t      },\n\t      controller: 'socialCtrl as sovm',\n\n\t      \n\t   };\n    \n    \n  }]);\n\n})();","(function() {\n  \n  angular\n    .module('bdApp')\n    .controller('adminCtrl', adminCtrl);\n\n  adminCtrl.$inject = ['$location', 'meanData'];\n  function adminCtrl($location, meanData) {\n\t  \n\t  \n    var vm = this;\n\n    vm.user = {};\n    meanData.getOptions()\n      .success(function(data) {\n\t      console.log(\"admin.controller.jsln16:::\");\n        console.log(data);\n      })\n      .error(function (e) {\n        console.log(e);\n      });\n  }\n\n})();","(function() {\n  \n  angular\n    .module('bdApp')\n    .controller('closetCtrl', closetCtrl);\n\n  closetCtrl.$inject = ['$location', '$window', 'jean','popups', '$scope', 'messages', 'loader', 'user', 'api', 'apiData', '$routeParams'];\n  function closetCtrl($location, $window, jean, popups, $scope, messages, loader, user, api, apiData, $routeParams) {\n\t    \n    var vm = this;   \n\t\t\n\t\tpopups.closeAll();\n\t\tvm.popups=popups.get();\n\n\t\tvm.messages=messages.get();\n\t\tvm.data = apiData;\n\t\t//Set up Jean\n\t\tvm.jeans;\n\t\tapi.call('getMyJeans', null, function(results){\n\t\t\tvm.jeans = results;\n\t\t});\n\t\t\n\t\t//Set up orders\n\t\tvm.orders = [];\t\t\n    api.call('getMyOrders', {}, function(result){\n\t    vm.orders = result;\n    });\n    \n\t\tvm.onload=function(){\n\t\t\t$scope.vm = vm;\t\n\t\t}\n\t\t\n\t\t//Edit User\n\t\tvm.userForm = {};\n\t\tvm.userForm.editing={};\n\t\tvm.userForm.saving={};\n\t\tvm.userForm.data = {};\n\t\tvm.userForm.feedback={\n\t\t\t\"type\":\"\",\n\t\t\t\"message\":\"\",\n\t\t}\n\t\t\n\n\t\tvm.userForm.cancel = function(field){\n\t\t\tvm.userForm.editing[field] = false;\n\t\t\tvm.user[field] = vm.userForm.data[field];\n\t\t};\n\t\t\n\t\tvm.userForm.editField = function(field){\n\t\t\tvm.userForm.data[field] = angular.copy(vm.user[field]);\n\t\t\tvm.userForm.editing[field]=true;\n\t\t\t\n\t\t}\n\t\t\n\t\t//Validation functions\n\t\tfunction validateEmail(email) {\n\t    var re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n\t    return re.test(email);\n\t\t}\n\t\t\n\t\tfunction validatePhoneNumber(inputtxt) {\n\t\t  var phoneno = /^\\+?([0-9]{2})\\)?[-. ]?([0-9]{4})[-. ]?([0-9]{4})$/;\n\t\t  return inputtxt.match(phoneno);\n\t\t}\n\t\t\n\t\tvm.userForm.validate = function(field, data){\n\t\t\t\n\t\t\tif (field == 'email'){\n\t\t\t\tif (validateEmail(data)) return true;\n\t\t\t\telse {\n\t\t\t\t\tmessages.set(\"Please enter a valid email address\", \"error\");\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\telse if (field == 'phoneNumber'){\n\t\t\t\tif (validatePhoneNumber(data)) return true;\n\t\t\t\telse {\n\t\t\t\t\tmessages.set(\"Please enter a valid phone number\", \"error\");\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\telse return true;\n\t\t}\n\n\t\t\n\t\tvm.userForm.save = function(field){\n\t\t\t//if (vm.user[field] == \"\") vm.user[field] = null;\n\t\t\tif (vm.userForm.validate(field, vm.user[field])){\n\t\t\t\tconsole.log(vm.user);\n\t\t\t\tuser.update(vm.user, function(result){\n\t\t\t\t\tvm.userForm.saving[field] = false;\n\t\t\t\t\tvm.userForm.editing[field] = false;\n\t\t\t\t\t//vm.userForm.data[field] = vm.user[field];\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\t\n\n    \n   \t\n    \n    //Get user details and orders...\n //     var identityID = aws.getCurrentIdentityId();\n /*\n    if (!identityID){ $location.path('/'); }\n\t  else{\n\t\t\t\n\t  \t//Todo: Just get orders for user...\n\t\t\tbdAPI.call('ordersList', 100, function(result){\n\t\t\t\tvm.orders=result.data.items;\n\t\t\t});\t\n\t\t\t\t\n\t\t\tbdAPI.call('usersGet', identityID, function(result){\n\t\t\t\tloader.hide();\n\t\t\t\t//vm.user = result.data;\t\t\t\t\t\t\t\n\t\t\t\tvm.userForm.data = angular.copy(result.data);\t\n\t\t\t});\n\t\t\t\n\t\t\tvm.user = user.get();\n\t\t\t\n    }\n\t    \t*/\n\t    vm.user = user.get();\t\n\n\t    \t\n\t\t\t\t\n\t\t/*\n\t\t* Password Form\n\t\t*/\n\t\tvm.passForm = {\n\t\t\t\"editing\" : false,\n\t\t\t\"currentPass\" : \"\",\n\t\t\t\"newPass\": \"\",\n\t\t\t\"newPassConfirm\" : \"\",\n\t\t\t\"clear\": function(){\n\t\t\t\tvm.passForm.editing = false;\n\t\t\t\tvm.passForm.currentPass = \"\";\n\t\t\t\tvm.passForm.newPass = \"\";\n\t\t\t\tvm.passForm.newPassConfirm = \"\";\n\t\t\t\tmessages.reset();\n\t\t\t}\n\t\t};\n\t\t\n\t\t\n\t\tfunction validatePassword(password){\n\t\t\tvar re = /^(?=.*[0-9])(?=.*[!@#$%^&*])[a-zA-Z0-9!@#$%^&*]{6,50}$/;\n\t\t\treturn re.test(password);\n\t\t}\n\t\t\n\t\tvm.validatePasswordForm = function(){\n\t\t\n\t\t\tif (!validatePassword(vm.passForm.newPass)){\n\t\t\t\tmessages.set(\"A valid password must: <ul><li>Be between 6 and 50 characters</li><li>Contain at least one number</li><li>Contain at least one uppercase letter</li><li>Contain at least one lowercase letter</li><li>Contain at least one special character (\\\"!,@,#,$,%,^,&, or *\\\")</li>\");\t\n\t\t\t}\n\t\t\t\n\t\t\tif (vm.passForm.newPass !== vm.passForm.newPassConfirm){\n\t\t\t\tmessages.set(\"New Password and Confirmation do not match\", \"error\");\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\t\n\t\t\treturn true;\t\n\t\t}\n\t\t\n\t\t\n    vm.changePassword = function () {\n\t    messages.reset();\n\t    if (vm.validatePasswordForm()){\n\t\t    var passwordData ={\n\t\t\t    id:vm.user.id,\n\t\t\t    password:vm.passForm.newPass,\n\t\t\t    old_password:vm.passForm.currentPass\n\t\t\t  }\n\t\t\t\tuser.update(passwordData, function(result){\n\t\t\t\t\tvm.passForm.clear();\n\t\t\t\t\tmessages.set(\"Password successfully changed.\", \"success\");\n\t\t\t\t},\n\t\t\t\tfunction(err){\t\n\t\t\t\t\tmessages.set(err.message, \"error\");\n\t\t\t\t});\n\t\t  }\n    };\t\n\t\t\n\n\n\n\t\tvm.reOrder = function(orderId){\n\t\t\tconsole.log(orderId);\n\t\t\t$location.path('/order/'+orderId+'/copy');\n\t\t}\n\t\t\n\n\t\tvm.copyJean = function(orderItem){\n\t\t\tdataCode = api.getDataCode(orderItem);\n\t\t\tjean.setup(dataCode, true);\n\t\t\t$location.path('/customizer');\n\t\t}\n\t\t\n\t\tvm.displayJean={};\n\t\tvm.selectJean = function(jean){\n\t\t\tvm.popups.jeanProfile = true; \n\t\t\tvm.displayJean=jean\n\t\t}\n\t\t\n\t\tvm.selectOrder = function(order){\n\t\t\tconsole.log(\"selecting Order\");\n\t\t\tconsole.log(order);\n\t\t\tvm.popups.orderProfile = true; \n\t\t\tvm.displayOrder=order;\n\t\t\tvm.displayJean = order.order_items[0];\n\t\t\tconsole.log(vm.displayOrder);\t\n\t\t}\n\t\t\n\t\n\t\tfunction findJeanbyId(jeanId){\n\t\t\tfor (var j=0; j < vm.jeans.length; j++) {\n\t      if (vm.jeans[j].id === jeanId) return j;\n      }\n  \t}\n\n\t\tvm.deleteJean = function(jeanId){\n\t\t\tapi.call('deleteMyJean', jeanId, function(result){\n\t\t\t\tconsole.log(result);\n\t\t\t\tvar index = findJeanbyId(jeanId);\n\t\t\t\tvm.jeans.splice(index, 1);\n\t\t\t});\n\t\t}\n\t\t\n\t\tvm.orderJean = function(jeanId){\n\t\t\tconsole.log(\"going to order\");\n\t\t\t$location.path('/order/'+jeanId);\n\t\t}\n\t\n\t\t\t\n\n\n\t\n\t\t\n\t\t//Get User\n  }\n  \n\n\n\n})();","(function() {\n  \n  angular\n    .module('bdApp')\n    .controller('customizerCtrl', customizerCtrl);\n\n  customizerCtrl.$inject = ['api', 'user', '$q','$filter','$timeout','$location', '$window', '$routeParams', 'jean', '$scope', 'popups', 'messages', 'loader', 'apiData'];\n  function customizerCtrl(api, user, $q, $filter, $timeout, $location, $window, $routeParams, jean, $scope, popups, messages, loader, apiData) {\n\t\t\n    var vm = this\n\t\t\n\t\t//Setup Loader\t\t\n\t\tvm.loader = loader.get();\n\t\t\n\t\t//Set up shared messages service\n\t\tmessages.reset();\n\t\tvm.messages=messages.get();\n\t\n\t\t//Set up shared popups service\n\t\tpopups.closeAll();\n\t\tvm.popups = popups.get();\n\n\t\t//Set up Jean\n\t\tvar jeanId;\n\t\tif ($routeParams.jeanId) jeanId = $routeParams.jeanId;\n\t\tvar action = false;\n\t\tif ($routeParams.action) action = $routeParams.action;\n\t\t\n\t\tjean.setup(jeanId, action).then(function(result){\n\t\t\tvm.jeanData=jean.get();\t\t\t\n\t\t\t$scope.$watch(function() {\n\t\t\t\treturn vm.jeanData;\n\t\t\t}, function(current, original) {\n\t\t\t\tvm.updateActiveItem();\n\t\t\t}, true);\n\t\t\t\n\t\t\t$scope.$watch(function() {\n\t\t\t\treturn vm.data;\n\t\t\t}, function(current, original) {\n\t\t\t\tvm.updateActiveItem();\n\t\t\t}, true);\n\n\t\t}, \n\t\t\n\t\t\n\t\tfunction(err){\n\t\t\t//Test for jean not found...\n\t\t\tif(err.message = \"Invalid Jean ID\"){\n\t\t\t\tpopups.set('noJean',true);\n\t\t\t}\n\n\t\t});\n\n\t\t\t\n\t\t\n\t\t\n\t\t\n\t\n\n\t\t//Detect Orientation\t\t\t\n\t\tfunction landscapeDetect() {\n\t\t  var ua = navigator.userAgent.toLowerCase();\n\t\t  var isAndroid = ua.indexOf(\"android\") > -1; // Detect Android devices\n\t\t  if (isAndroid) {\n\t\t    //window.orientation is different for iOS and Android\n\t\t    if (window.orientation == 0 || window.orientation == 180) { //Landscape Mode\n\t\t      return true;\n\t\t    }\n\t\t    else if (window.orientation == 90 || window.orientation == -90) { //Portrait Mode\n\t\t\t\t\treturn false;\n\t\t    }\n\t\t  }\n\t\t  else {\n\t\t    if (window.orientation == 90 || window.orientation == -90) { //Landscape Mode\n\t\t      return true;\n\t\t    }\n\t\t    else if (window.orientation == 0 || window.orientation == 180) { //Portrait Mode\n\t\t      return false;\n\t\t    }\n\t\t  }\n\t\t}\n    \n    vm.landscape=landscapeDetect();\n  \tvar supportsOrientationChange = \"onorientationchange\" in window,\n    orientationEvent = supportsOrientationChange ? \"orientationchange\" : \"resize\";\n\t\t\n\t\twindow.addEventListener(orientationEvent, function() {\t\n\t\t\t//Set a scope variable on orientation change. This will display a popup on the front end warning users that the customizer works best in protrait mode\n\t\t  vm.landscape=landscapeDetect();\n\t\t  $scope.$apply();\n\t\t}, false);\n\t\t\n\t\t\n\t\t\n\t\t\n    /*\n\t\t*\n\t\t* GET CUSTOMIZER DATA \n\t\t*\n\t\t*/\t\n\t\tvm.data = apiData;\n\t\tvm.activeItem={};\n\t\t\n\t\tvm.updateActiveItem = function(){\n\t\t\tif (!vm.jeanData) return false;\n\t\t\tvar data = vm.data[vm.panel[vm.panelStep].dataKey];\n\t\t\tvar id = vm.jeanData[vm.panel[vm.panelStep].jeanKey];\n\t\t\tvar ret = $filter('filter')(data, {id: id});\n\t\t\tif (ret) ret = ret[0];\n\t\t\tvm.activeItem = ret||null;\n\t\t}\n\n\t\t//Build Control Panel Steps\n\t\tvm.panel = [];\n\t\t\n\t\t//Gender\n\t\tvm.panel.push({\n\t\t\t\"panelTemplate\":\"gender-chooser\",\n\t\t\t\"dataKey\":\"gender_options\",\n\t\t\t\"title\":\"Gender\",\n\t\t\t\"jeanKey\":\"gender_option_id\"\n\t\t});\n\t\t\n\t\t//Style\n\t\tvm.panel.push({\n\t\t\t\"panelTemplate\":\"style-chooser\",\n\t\t\t\"dataKey\":\"style_options\",\n\t\t\t\"title\":\"Style\",\n\t\t\t\"jeanKey\":\"style_option_id\"\n\t\t});\n\t\t\n\t\t//Fabric\n\t\tvm.panel.push({\n\t\t\t\"panelTemplate\":\"fabric-chooser\",\n\t\t\t\"dataKey\":\"fabrics\",\n\t\t\t\"title\":\"Fabric\",\n\t\t\t\"jeanKey\":\"fabric_id\"\n\t\t});\n\t\t\n\t\t//Top Thread\n\t\tvm.panel.push({\n\t\t\t\"panelTemplate\":\"chooser\",\n\t\t\t\"dataKey\":\"threads\",\n\t\t\t\"title\":\"Top Thread\",\n\t\t\t\"jeanKey\":\"top_thread_id\"\n\t\t});\n\t\t\n\t\t//Bottom Thread\n\t\tvm.panel.push({\n\t\t\t\"panelTemplate\":\"chooser\",\n\t\t\t\"dataKey\":\"threads\",\n\t\t\t\"title\":\"Bottom Thread\",\n\t\t\t\"jeanKey\":\"bottom_thread_id\"\n\t\t});\n\t\t\n\t\t//Accent Thread\n\t\tvm.panel.push({\n\t\t\t\"panelTemplate\":\"chooser\",\n\t\t\t\"dataKey\":\"threads\",\n\t\t\t\"title\":\"Accent Thread\",\n\t\t\t\"jeanKey\":\"accent_thread_id\"\n\t\t});\n\t\t\n\t\t//Overview\n\t\tvm.panel.push({\n\t\t\t\"panelTemplate\":\"list\",\n\t\t\t\"title\":\"Overview\"\n\t\t});\n\t\t\n\t\tvm.panelDir=\"next\";\t\t\n\t\tvm.panelStep = 0;\n\t\tvm.changeStep = function(step){\n\t\t\tif (step >= vm.panel.length) return false;\n\t\t\tif (step < 0) return false;\n\t\t\tif (step===undefined) return false;\n\t\t\telse vm.panelStep = step; \n\t\t\t\n\t\t\t//As long as we're not on the \"Overview\" Step, update active item...\n\t\t\tif (step+1 != vm.panel.length) vm.updateActiveItem();\n\t\t}\n\t\t\n\n\t\t\n\t\t/*\n\t\t*\n\t\t* Control Panel actions\n\t\t*\n\t\t*/\n\t\n\t\t\n\n\t\tvm.savingBar = false;\n\t\tvm.newJeanName = \"My New Jeans\";\n\t\tvm.authCallback;\n\t\tvm.saveCallback;\n\t\t\n\t\tvar openSaveOpts = function(){\n\t\t\tpopups.set('saveOpts',true);\n\t\t\t\n\t\t}\t\n\t\t\n\t\tvar redirectToOrder = function(jean){\n\t\t\t$location.path('/order/'+jean.id);\n\t\t}\t\n\t\t\n\t\tvm.saveAndOrder = function(){\n\t\t\tvm.saveCallback = redirectToOrder;\n\t\t\tvm.runSave();\n\t\t}\t\n\t\t\n\t\tvm.saveAndShowOpts = function(){\n\t\t\tvm.saveCallback = openSaveOpts;\n\t\t\tvm.runSave();\n\t\t}\t\n\t\t\n    vm.keepEditing = function(){\n\t\t\t$location.path('/customizer/'+vm.jeanData.id);\n    }\n    \n    vm.goToCloset = function(){\n\t    $location.path('/closet');\n    }\n    \n    vm.startOver = function(){\n\t    jean.reset();\n\t    vm.jeanData=jean.get();\n\t    popups.closeAll();\n    }\n    \n    //Check for jean name, run save, and ex callback\n\t\tvm.runSave = function(){\n\t\t\tpopups.closeAll();\n\t\t\t\n\t\t\tif(!vm.jeanData.name) popups.set('namer', true);\n\t\t\t\n\t\t\telse{\n\t\t\t\tvm.savingBar = true;\n\t\t\t\tjean.save().then(\n\t\t\t\t\tfunction(result){\n\t\t\t\t\t\tvm.jeanData = result;\n\t\t\t\t\t\tvm.savingBar = false;\n\t\t\t\t\t\tif (vm.saveCallback){ \n\t\t\t\t\t\t\tvm.saveCallback(result);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t} \n\t\t}\n    \n    //When Order is clicked...\n    vm.placeOrder=function(){\n\t\t\tif(!user.isLoggedIn()){\n\t\t\t\tvm.authCallback = vm.saveAndOrder;\n\t\t\t\tpopups.set('loginOrRegister',true);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tvm.saveAndOrder();\n\t\t\t}\n\t\t}\n\n\t\tvm.socialAuthCheck = function(callback){\n\t\t\tif(!user.isLoggedIn()){\n\t\t\t\tvm.authCallback = callback;\n\t\t\t\tpopups.set('loginOrRegister',true);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tcallback();\n\t\t\t}\n\t\t}\n\t\t\n    //When Save is clicked....\n    vm.saveJean = function(){\n\t\t\tif(!user.isLoggedIn()){\n\t\t\t\tvm.authCallback = vm.saveAndShowOpts;\n\t\t\t\tpopups.set('loginOrRegister',true);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\telse vm.saveAndShowOpts();\n  \t}\n    \n    //Set default auth callback\n\t\t\n    \n    vm.registerCallback = function(details){\n\t    /*\n\t    aws.authenticateCognitoUser(details.email, details.password).then(\n\t\t    function(result){\n\t\t\t\t\tvm.authCallback();\t\n\t\t  \t}\n\t    )\n\t    */\n    }\n    \n    \n\n\n\t\t\n  }\n\n})();3","(function() {\n  \n  angular\n    .module('bdApp')\n    .controller('homeCtrl', homeCtrl);\n\t\t\t\n\t\thomeCtrl.$inject = ['$window', 'user', 'api'];\n\t\t\n\t\t\n    function homeCtrl ($window, user, api) { \t    \n\t\t\tvar vm = this;\t\n\t\t\tvm.user = user.get();\n\t\t\tconsole.log($window.localStorage.getItem(\"bdAccessToken\"));\n    }\n\n})();","(function() {\n  \n  angular\n    .module('bdApp')\n    .controller('orderCtrl', orderCtrl);\n\n  orderCtrl.$inject = ['$window', '$location', 'jean','popups', '$filter', '$routeParams', 'user', 'api', '$scope', 'apiData', '$http'];\n  function orderCtrl($window, $location, jean, popups, $filter, $routeParams, user, api, $scope, apiData, $http) {\n\t  \n    var vm = this;\n    vm.popups=popups.get();\n    vm.tailors = apiData.tailors;\n\n\t\tfunction getPrimaryAddress(addresses){\n\t\t\tif(!addresses || !addresses.length) return false;\n\t\t\tfor (var i=0; i<addresses.length; i++) {\n\t\t\t\tif (addresses[i].primary == true) return addresses[i].id;\n\t\t\t}\n\t\t\treturn addresses[0].id;\n\t\t}\n\n\t\tvm.orderCreateObj = {}\n\t\tvm.user = {};\n\t\tvm.user = user.get();\t\t\n\t\t$scope.$watch('vm.user', function(newV) {\n\t\t\tvm.orderCreateObj.shipping_name = newV.first_name+\" \"+newV.last_name;\n\t\t\tvm.orderCreateObj.shipping_phone = newV.phone;\n\t\t\tvm.orderCreateObj.shipping_address_id = getPrimaryAddress(newV.addresses);\n    }, true);\n\n\t\t//Get user's orders\n\t\tvm.orders = [];\n\t\tapi.call('getMyOrders', null, function(result){\n\t\t\tvm.orders = result;\n\t\t});\n\t\t\n\t\tvar jeanId;\n\t\t\n\t\tif ($routeParams.jeanId && $routeParams.action == 'copy'){\n\t\t\t\n\t\t\t$scope.$watch('vm.orders', function(orders) {\n\t\t\t\tif (orders.length);\n\t\t\t\tfor(i=0; i<orders.length; i++){\n\t\t\t\t\tif(orders[i].id == $routeParams.jeanId){\n\t\t\t\t\t\tvar urlOrder = orders[i];\n\t\t\t\t\t\tvm.orderCreateObj.copy_order_item_id = urlOrder.order_items[0].id;\n\t\t\t\t\t\tvm.jeanData = urlOrder.order_items[0];\n\t\t\t\t\t\tvm.jeanData.image_url =\tvm.jeanData.jean_image_url;\n\t\t\t\t\t\tvm.jeanData.name =\tvm.jeanData.jean_name;\n\t\t\t\t\t}\t\t\t\t\t\n\t\t\t\t}\n\t    }, true);\n\n\t\t\t\n\t\t}\n\t\t\n\t\telse if ($routeParams.jeanId && !$routeParams.action){\t\n\t\t\tjean.setup($routeParams.jeanId, false).then(function(result){\n\t\t\t\tvm.jeanData=jean.get();\t\n\t\t\t\tvm.orderCreateObj.jean_id = vm.jeanData.id;\n\t\t\t});\n\t\t}\n\t\tvm.lookup = apiData.lookup;\n\n\t\tvm.orderForm={};\n\t\tvm.orderForm.step=1;\n\n\n\t\tvm.goToCloset = function(){ $location.path('/closet'); }\n\t\tvm.startOver = function(){ \n\t\t\tjean.reset();\n\t\t\t$location.path('/customizer'); \n\t\t}\t\t\n\t\tvm.placeOrder = function(){\n\t\t\tapi.call('placeMyOrder', vm.orderCreateObj, function(result){\n\t\t\t\tvm.popups.orderPlaced=true;\n\t\t\t});\n\t\t}\n\n\t\tvm.chooseOrderType = function(type, copyItem){\n\t\t\t\n\t\t\tvm.orderCreateObj.order_type_id = type;\n\t\t\tif (type == 2 && !vm.orderCreateObj.tailor_id){\n\t\t\t\tvm.popups.tailors=true;\n\t\t\t}\n\t\t\t\n\t\t\t//Set order_item_copy\n\t\t\tif(type == 4){\n\t\t\t\tvm.orderCreateObj.copy_order_item_id = copyItem.id;\n\t\t\t\tvm.copyItem = copyItem;\n\t\t\t}\n\t\t\telse{\n\t\t\t\tif($routeParams.action != 'copy') delete vm.orderCreateObj.copy_order_item_id;\t\n\t\t\t\tvm.copyItem = {};\n\t\t\t}\n\t\t}\n\t\t\n\t\tvm.measurementKeys = [\n\t\t\t\"waist\",\n\t\t\t\"seat_down\",\n\t\t\t\"seat_right\",\n\t\t\t\"rise\",\n\t\t\t\"full_rise\",\n\t\t\t\"thigh_upper_down\",\n\t\t\t\"thigh_upper_right\",\n\t\t\t\"thigh_middle_down\",\n\t\t\t\"thigh_middle_right\",\n\t\t\t\"thigh_lower_down\",\n\t\t\t\"thigh_lower_right\",\n\t\t\t\"outseam\",\n\t\t\t\"knee_up\",\n\t\t\t\"knee_right\", \n\t\t\t\"calf_up\",\n\t\t\t\"calf_right\",\n\t\t\t\"leg_opening\"\n\t\t];\n\t\t\n\t\tvm.hasMeasurements = function(order) {\n\n\t\t\tif (!order || !order.order_items.length ) return false;\n\t\t\t\n\t\t\tvar orderItem = order.order_items[0];\n\t\t\tvar testCols = [\n\t\t\t\t'outseam',\n\t\t\t\t'waist',\n\t\t\t\t'rise'\n\t\t\t];\n\t\t\tvar measurements = true;\n\t\t\tfor (i=0;i<testCols.length; i++){\n\t\t\t\tif (orderItem[testCols[i]] == \"\" || orderItem[testCols[i]] == null){\n\t\t\t\t\tmeasurements = false;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\treturn measurements;\n\n\t\t};\n\t\t\n\t\tvm.orderForm.nextStep = function(){\n\t\t\t//Step 1 to Step 2\n\t\t\tif (vm.orderForm.step==1){\n\t\t\t\t//Make sure we've got a fit type\n\t\t\t\tif (!vm.orderCreateObj.order_type_id){ return false; }\n\t\t\t\t//If we're using a tailor, make sure we've got a tailor\n\t\t\t\tif (vm.orderCreateObj.order_type_id ==2 && !vm.orderCreateObj.tailor_id){\n\t\t\t\t\tvm.popups.tailors=true;\n\t\t\t\t\treturn false;\n\t\t\t\t}\t\n\t\t\t\tvm.orderForm.step=2;\n\t\t\t\treturn;\n\t\t\t}\t\n\t\t}\n\n\t\tvm.editData = {};\n\t\t\n\t\tvm.editField = function(field){\n\t\t\tvar editText = vm.orderCreateObj[field] || \" \";\n\t\t\tvm.editData[field] = angular.copy(editText);\n\t\t}\n\t\t\n\t\tvm.revertField = function(field){\n\t\t\tvm.orderCreateObj[field] = angular.copy(vm.editData[field]);\n\t\t\tvm.editData[field] = false;\t\n\t\t}\n\t\t\n\t\t\n\n  }\n  \n\n\n\n})();","(function () {\n\n  angular\n    .module('bdApp')\n    .directive('jeanList', ['jean', 'apiData', function(jean, apiData) {\n    \t\n\t\t\treturn {\n\t    \t\n\t      restrict: 'EA',\n\t\t\t\ttemplateUrl: '/directives/jean-list/jean-list.template.html',\n\t      scope : {\n\t        fields : '=?',\n\t        jean: '=?'\n\t      },\n\t      \n\t      link: function($scope){\n\t\t\t\t\t\n\t\t\t\t\t$scope.dataBank = apiData;\n\t\t\t\t\t$scope.jean = $scope.jean || jean.get();\n\t\t\t\t\n\t\t\t\t\tvar defaultFields = [\n\t\t\t\t\t\t'fabric_id',\n\t\t\t\t\t\t'accent_thread_id',\n\t\t\t\t\t\t'top_thread_id',\n\t\t\t\t\t\t'bottom_thread_id',\n\t\t\t\t\t\t'gender',\n\t\t\t\t\t\t'style_option_id'\n\t\t\t\t\t];\n\n\t\t\t\t\t$scope.findLabel = function(field){\n\t\t\t\t\t\tvar fieldLabels = {\n\t\t\t\t\t\t\t'fabric_id' : 'Fabric',\n\t\t\t\t\t\t\t'accent_thread_id' : 'Accent Thread',\n\t\t\t\t\t\t\t'top_thread_id' : 'Top Thread',\n\t\t\t\t\t\t\t'bottom_thread_id' : 'Bottom Thread',\n\t\t\t\t\t\t\t'gender' : 'Gender',\n\t\t\t\t\t\t\t'style_option_id' : 'Style'\n\t\t\t\t\t\t}\n\t\t\t\t\t  return fieldLabels[field]; // otherwise it won't be within the results\n\t\t\t\t\t};\n\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t\t$scope.fields = $scope.fields || defaultFields;\n\t\t\t\t\t\n\t\t\t\t\t$scope.dataLookup = function(key, value){\n\t\t\t\t\t\t\t\n\t\t\t\t\t\tvar dataMap = {\n\t\t\t\t\t\t\t'fabric_id' : 'fabrics',\n\t\t\t\t\t\t\t'accent_thread_id' : 'threads',\n\t\t\t\t\t\t\t'top_thread_id' : 'threads',\n\t\t\t\t\t\t\t'bottom_thread_id' : 'threads',\n\t\t\t\t\t\t\t'gender' : 'gender_options',\n\t\t\t\t\t\t\t'style_option_id' : 'style_options'\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar key = dataMap[key];\n\t\t\t\t\t\tvar data = apiData[key];\n\t\t\t\t\t\tfor (d=0;d<data.length;d++){\n\t\t\t\t\t\t\tif (data[d].id == value) return data[d].name;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t};\n\t\t\t\t\t\n\t\t\t\t\t$scope.filterFields = function(data){\n\t\t\t\t\t\tmatches = {};\n\t\t\t\t\t\tfor (var k in data) {\n\t\t        \tif (data.hasOwnProperty(k) && $scope.fields.indexOf(k)>=0) {\n\t\t\t\t\t  \t  matches[k]=data[k];\n\t\t\t\t\t    }\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn matches;\n\t\t\t\t\t}\n\n\t\t   \n\t      }\n\t      \n\t   };\n    \n    \n  }]);\n\n})();","(function () {\n\n  angular\n    .module('bdApp')\n    .controller('sliderCtrl', sliderCtrl)\n\t\n\t\tsliderCtrl.$inject = ['$scope', 'preloader'];\n\n\t\tfunction sliderCtrl($scope, preloader) {\n\t\t\tvar slvm = this;\n\n\t\t\t\n\t\t\t$scope.imagesLoaded = false;\n\t\t\t\n\t\t\tpreloader.preloadImages( $scope.slides )\n\t\t\t.then(function() {\n\t\t\t\t$scope.imagesLoaded = true;\n\t\t\t},\n\t\t\tfunction() {\n\t\t\t\tconsole.log(\"error loading imgaes...\");\n\t\t\t});\n\t\t \t\t\t\t\n\t\t\t\t\n\t\t\t\n\t\t\t$scope.currentIndex = 0;\n\t\t\t\n\t\t\t$scope.setCurrentSlideIndex = function (index) {\n\t\t\t  $scope.currentIndex = index;\n\t\t\t};\n\t\t\t\n\t\t\t$scope.isCurrentSlideIndex = function (index) {\n\t\t\t  return $scope.currentIndex === index;\n\t\t\t};\n\t\t\t\n\t\t\t$scope.nextSlide = function () {\n\t\t\t  $scope.currentIndex = ($scope.currentIndex < $scope.slides.length - 1) ? ++$scope.currentIndex : 0;\n\t\t\t};\n\t\t\t\n\t\t\t$scope.prevSlide = function () {\n\t\t\t  $scope.currentIndex = ($scope.currentIndex > 0) ? --$scope.currentIndex : $scope.slides.length - 1;\n\t\t\t};\n\t\t\t\t\n\t\t}\n\n})();","(function () {\n\n  angular\n    .module('bdApp')\n    .directive('slider', slider);\n\t\t\n  function slider () {\n    return {\n      restrict: 'EA',\n      templateUrl: '/directives/slider/slider.template.html',\n      controller: 'sliderCtrl as slvm',\n      scope : {\n        slides : '=',\n        imageClick : '&'\n      }\n    };\n  }\n\n})();","// Autogenerated file, do not modify directly\n\n(function() {\n\nconst configOverridesGenerated = {\n  \"REGION\": \"us-east-1\",\n  \"PROFILE_IMAGES_S3_BUCKET\": \"blue-delta-api-development-stack-userdatabucket-12z57hiicf3xy\",\n  \"API_ENDPOINT\": \"https://kd6f1omjzc.execute-api.us-east-1.amazonaws.com/development\",\n  \"USER_POOL_ID\": \"us-east-1_UvVeNoe5z\",\n  \"CLIENT_ID\": \"6hdrpk1j20qmjhfdiga31uia80\",\n  \"IDENTITY_POOL_ID\": \"us-east-1:60250bd7-bc76-4ab7-8813-2369461cb881\"\n};\n\nreturn configOverridesGenerated;\n})();","(function () {\n\n  angular\n  .module('bdApp')\n  .controller('loginCtrl', loginCtrl);\n\n\tloginCtrl.$inject = ['messages'];\n  function loginCtrl(messages) {\n    var vm = this;\n    \n    messages.reset();\n    vm.messages = messages.get();\n    \n  }\n\n})();","(function () {\n\n  angular\n    .module('bdApp')\n    .controller('registerCtrl', registerCtrl);\n\n  registerCtrl.$inject = ['messages'];\n  function registerCtrl(messages) {\n    var vm = this;\n\n\t\tmessages.reset();\n    vm.messages = messages.get();\n    vm.formStep=1;\n    \t\t\n/*    \t\t\t\t\t\n\t\t//Confirm User with Registration Code\t\t\t\t\n    vm.confirmUser = function() {\n\t\t\tvm.resetMessage();\n\t\t\taws.confirmRegisteredUnauthenticatedUser(vm.credentials.email, vm.credentials.code).then(\n      \tfunction(result){\n\t\t\t\t\tvm.setMessage($sce.trustAsHtml(\"Your Account has been confirmed. <a href='/login'>Click here to login</a>\"), \"success\");\n\t      },   \n\t      function(err){\n\t\t      if (err.message == \"Missing required key 'ConfirmationCode' in params\") err.message = \"Please enter confirmation code\";\n\t\t\t    vm.setMessage(err.message, \"error\");\n\t\t    }\n\t\t  );\n    };\n    \n    //Resend Registration code to user via email\n    vm.resendCode = function(){\n\t    //This function throws an error in the SDK and no result... cannot implement promise for now\n\t    aws.resendConfirmationCode(vm.credentials.email);\n\t    //We're going to show a success message no matter what\n\t    //TODO: Implement corrected SDK and promise structure for this functino\n\t    vm.setMessage(\"A new confirmation code has been sent to \"+vm.credentials.email+\". Enter the code above to confirm your account\", \"success\");\n    };\n\n*/\n  }\n\n})();"]}