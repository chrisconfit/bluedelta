{"version":3,"sources":["main.js","config/config-overrides-generated.js","services/api.service.js","services/authentication.service.js","services/aws.service.js","services/bdapi.service.js","services/config.service.js","services/data.service.js","services/jean.service.js","services/jsonData.service.js","services/loader.service.js","services/messages.service.js","services/popups.service.js","services/preloader.factory.js","services/user.js","services/user.service.js","directives/address-choice/address-choice.controller.js","directives/address-choice/address-choice.directive.js","directives/choosers/chooser.controller.js","directives/choosers/chooser.directive.js","directives/choosers/fabric-chooser.directive.js","directives/choosers/gender-chooser.directive.js","directives/choosers/style-chooser.directive.js","directives/image-stack/image-stack.controller.js","directives/image-stack/image-stack.directive.js","directives/jean-card/jean-card.directive.js","directives/jean-list/jean-list.directive.js","directives/login-form/login-form.controller.js","directives/login-form/login-form.directive.js","directives/navigation/navigation.controller.js","directives/navigation/navigation.directive.js","directives/register-form/register-form.controller.js","directives/register-form/register-form.directive.js","directives/slider/slider.controller.js","directives/slider/slider.directive.js","directives/social-actions/social-actions.controller.js","directives/social-actions/social-actions.directive.js","pages/admin/admin.controller.js","pages/closet/addForm.controller.js","pages/closet/closet.controller.js","pages/customizer/customizer.controller.js","pages/home/home.controller.js","pages/order/order.controller.js","pages/auth/login/login.controller.js","pages/auth/register/register.controller.js"],"names":["config","$routeProvider","$locationProvider","when","templateUrl","controller","controllerAs","otherwise","redirectTo","html5Mode","run","$rootScope","$location","aws","$on","event","nextRoute","currentRoute","locked","indexOf","path","isLoggedIn","angular","module","filter","input","replace","min","max","key","initInjector","injector","$http","get","$q","awsJsonUrl","jsonDataKeys","promises","d","length","push","all","then","result","jsonData","r","url","data","constant","body","document","getElementById","bootstrap","element","configOverridesGenerated","REGION","PROFILE_IMAGES_S3_BUCKET","API_ENDPOINT","USER_POOL_ID","CLIENT_ID","IDENTITY_POOL_ID","api","login","args","console","log","call","func","success","error","this","$$phase","$apply","err","message","service","$inject","authentication","$window","saveToken","token","localStorage","getToken","payload","split","atob","JSON","parse","exp","Date","now","currentUser","email","name","isAdmin","roles","permissions","register","userDetails","user","authenticateCognitoUser","password","logout","removeItem","AWSConfig","_setUserInLocalStorage","stringify","username","identityId","sub","_clearUserInLocalStorage","clear","_getUserPool","poolData","UserPoolId","ClientId","userPool","AWSCognito","CognitoIdentityServiceProvider","CognitoUserPool","_getAuthenticationDetails","uname","pword","authenticationData","Username","Password","authenticationDetails","AuthenticationDetails","_getCognitoUser","upool","userData","Pool","cognitoUser","CognitoUser","_buildAttribute","keyName","value","attribute","Name","Value","CognitoUserAttribute","_buildAttributeList","attributeBuilder","obj","attrToAdd","attrList","_getAWSCredentials","idToken","logins","authenticator","AWS","update","region","credentials","CognitoIdentityCredentials","IdentityPoolId","Logins","getPromise","getCurrentIdentityId","jwt","getCurrentUserFromLocalStorage","getJwtToken","idTokenPayload","getUserFromLocalStorage","getSession","session","alert","isValid","deleteCognitoUser","getCurrentUser","deleteUser","authenticateViaFB","defer","FB","response","authResponse","graph.facebook.com","accessToken","resolve","reject","promise","authenticateUser","onSuccess","jwtToken","onFailure","newPasswordRequired","userAttributes","requiredAttributes","signupForApplication","emailAddress","attributeList","signUp","updateAttributesOnUser","updateAttributes","deleteUserAttributes","deleteAttributes","verifyUserAttribute","attributeName","getAttributeVerificationCode","inputVerificationCode","verificationCode","prompt","verifyAttribute","retrieveUserAttributes","getUserAttributes","i","getName","getValue","resendConfirmationCode","confirmRegistration","confirmationCode","changePassword","oldPassword","newPassword","forgotPassword","userName","setNewPassword","confirmPassword","signUserOut","signOut","signCurrentUserOut","signUserOutGlobally","globalSignOut","callback","confirmRegisteredUnauthenticatedUser","saveImageTos3","imageURL","userTokens","filename","dataURItoBlob","dataURI","binary","array","charCodeAt","Blob","Uint8Array","type","blobData","bucketName","s3bucket","S3","params","Bucket","Key","Body","upload","Location","bdAPI","$httpParamSerializer","$filter","_thirdParty","BlueDeltaApi","API","Client","DefaultApi","setupJsonData","getJsonData","jeanKeyToDataKey","jeanKey","dataKey","dataLookup","id","attr","dataSet","dataById","selected","cleanUser","temp","setupHeaders","defaultHeaders_","identityID","bdapi","Array","isArray","apply","saveUser","usersUpdate","meanData","getOptions","headers","Authorization","getJeanById","j","ret","getJeansByUser","userId","getProfile","getStyles","getThreads","getHardware","getFabrics","getGenders","jean","$routeParams","parseURLkey","jeanKeytoURL","loadImage","src","image","Image","crossOrigin","onload","onerror","e","searchAndDraw","cntxt","images","drawImage","dataType","jeanData","set","property","saved","createNew","constructor","Object","gender","style","fabric","fabricId","accent_thread","threadId","top_thread","bottom_thread","reset","setup","prop","hasOwnProperty","jeanId","parts","match","parseInt","jeansGet","newJean","keys","createThumb","canvas","createElement","width","height","getContext","results","dataUrl","toDataURL","getDataCode","idKey","urlKey","deleter","jeansDelete","save","saveFunc","jeans","loader","loaderDefaults","icon","active","show","hide","messages","popups","pops","closeAll","pop","status","$broadcast","preloaderFunc","Preloader","imageLocations","imageCount","loadCount","errorCount","states","PENDING","LOADING","RESOLVED","REJECTED","state","deferred","preloadImages","preloader","load","prototype","isInitiated","isRejected","isResolved","loadImageLocation","handleImageError","imageLocation","handleImageLoad","notify","percent","Math","ceil","bind","target","factory","addressChoiceCtrl","$scope","resetForm","close","editAdd","model","removeAddress","index","address","splice","editing","addForm","choosePrimary","a","primary","startEditing","stopEditing","open","copy","dataObj","remove","wasPrimary","add","newAdd","abbreviation","addressChoice","restrict","scope","directive","chooserCtrl","$element","$timeout","scrollToLeft","el","scrollTo","scrollDuration","offsetWidth","maxLeft","scrollWidth","stepNum","distance","scrollLeft","scrollStep","scrollTest","b","scrollInterval","setInterval","newScroll","clearInterval","chvm","breakPoint","selectorCoords","top","left","$watch","newValue","oldValue","dataId","step","elementId","activeElement","querySelector","selector","css","innerWidth","chooser","selectAttr","$event","text","querySelectorAll","right","opacity","jeanSet","val","dataset","template","link","changeTemplate","screenWidth","viewUrl","onresize","weightFilter","weight","genderChooser","styleChooser","checkGenderFilter","istackCtrl","isvm","centerPan","zoom","pan","x","y","isMobile","toggleZoom","touchEnd","dragTracker","returnPan","setTimeout","transform-origin","touchStart","swipeStart","touches","clientX","clientY","swipe","zoomDrag","touchMove","preventDefault","touch","drag","clientWidth","clientHeight","bounds","bottom","move","dragPan","u","direction","frame","window","innerHeight","deltaX","deltaY","abs","isFinal","scanImage","fWidth","fHeight","rect","getBoundingClientRect","rootDoc","ownerDocument","documentElement","offsetT","pageYOffset","clientTop","offsetL","pageXOffset","clientLeft","xPosition","yPosition","trackMouse","pageX","pageY","imageStack","ele","attrs","ctrl","on","jeanCard","click","slug","templatePath","fields","dataBank","defaultFields","field","filterFields","matches","k","loginFormCtrl","validateEmail","re","test","validatePassword","logvm","loginEmail","loginPassword","validateLoginForm","redirect","forgotPassword2","forgot","validateForgot","forgot2","validateForgot2","loginVerifcation","newPasswordConfirm","loginFB","loginForm","navigationCtrl","$route","vm","saver","drops","acct","mobileMenu","reload","navigation","registerFormCtrl","$sce","regvm","validateRegistrationForm","passwordConfirm","registerUser","registerForm","sliderCtrl","imagesLoaded","slides","currentIndex","setCurrentSlideIndex","isCurrentSlideIndex","nextSlide","prevSlide","slider","imageClick","socialCtrl","sovm","jeanToUrl","location","origin","sharingUrls","socialTitle","socialDescription","facebook","baseString","urlencode","twitter","pinterest","share","social","display","adminCtrl","addFormCtrl","closetCtrl","validatePhoneNumber","inputtxt","phoneno","findJeanbyId","jeansList","userForm","saving","feedback","cancel","validate","orders","items","passForm","currentPass","newPass","newPassConfirm","validatePasswordForm","copyJean","displayJean","selectJean","jeanProfile","selectOrder","order","orderProfile","displayOrder","orderItems","deleteJean","orderJean","customizerCtrl","landscapeDetect","ua","navigator","userAgent","toLowerCase","isAndroid","orientation","current","original","updateActiveItem","landscape","supportsOrientationChange","orientationEvent","addEventListener","activeItem","panel","panelStep","panelTemplate","title","panelDir","changeStep","undefined","orderCallback","saveCallback","placeOrder","authCallback","savingBar","newJeanName","runSave","keepEditing","goToCloset","startOver","saveJean","registerCallback","details","homeCtrl","orderCtrl","getPrimaryAddress","addresses","hasMeasurements","measurements","measurement","waist","orderForm","price","shippingAddress","vendor","rep","tracking","notes","timeline","tailor","item","ordered","orderId","comment","orderPlaced","chooseFitType","orderType","tailors","nextStep","usersGet","loginCtrl","registerCtrl","formStep"],"mappings":"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","file":"app.min.js","sourcesContent":["(function () {\n\n  angular.module('bdApp', ['ngRoute', 'ngAnimate','ngSanitize', 'ngCookies', 'angular-gestures']); \n  \n\n\n  function config ($routeProvider, $locationProvider) {\n    $routeProvider\n      .when('/', {\n        templateUrl: '/pages/home/home.view.html',\n        controller: 'homeCtrl',\n        controllerAs: 'vm',\n      })\n      .when('/register', {\n        templateUrl: '/pages/auth/register/register.view.html',\n        controller: 'registerCtrl',\n        controllerAs: 'vm'\n      })\n      .when('/login', {\n        templateUrl: '/pages/auth/login/login.view.html',\n        controller: 'loginCtrl',\n        controllerAs: 'vm'\n      })\n      .when('/closet', {\n        templateUrl: '/pages/closet/closet.view.html',\n        controller: 'closetCtrl',\n        controllerAs: 'vm'\n      })\n      .when('/order/:jeanId?/:userId?', {\n        templateUrl: '/pages/order/order.view.html',\n        controller: 'orderCtrl',\n        controllerAs: 'vm'\n      })\n      .when('/customizer/:jeanId?/:userId?', {\n        templateUrl: '/pages/customizer/customizer.view.html',\n        controller: 'customizerCtrl',\n        controllerAs: 'vm'\n      })\n      .when('/admin', {\n        templateUrl: '/pages/admin/admin.view.html',\n        controller: 'adminCtrl',\n        controllerAs: 'vm'\n      })\n      .otherwise({redirectTo: '/'});\n\n    // use the HTML5 History API\n    $locationProvider.html5Mode(true);\n    \n  }\n\n  function run($rootScope, $location, aws) {\n\t    \n    $rootScope.$on('$routeChangeStart', function(event, nextRoute, currentRoute) {\n\t    var locked = [\n\t\t    '/closet',\n\t\t    '/order'\n\t    ];\n\t    \n\t    if (locked.indexOf($location.path()) >= 0 && !aws.isLoggedIn() ){\n\t\t\t\t$location.path('/login');\n\t  \t}\n\t  \t/*\n\t  \t//If there's no jean on the order screen.... redirect to the customizer page.\n\t  \tif($location.path().indexOf(\"/order\") >= 0 && !Object.keys(jean.data).length){\n\t\t  \t$location.path('/customizer');\n\t\t  };\n\t\t  */\n\t\t  \n    });\n  }\n  \n  \n \n\n\t\n\t\t\t\n\n\tangular.module('bdApp')\n    .config(['$routeProvider', '$locationProvider', config])\n    .run(['$rootScope', '$location', 'aws', run])\n\t\t.filter('spaceless',function() {\n\t    return function(input) {\n\t      if (input) {\n\t      \treturn input.replace(/\\s+/g, '-');    \n\t      }\n\t    }\n\t\t})\n\t\t.filter('scoreToSpace',function() {\n\t    return function(input) {\n\t      if (input) {\n\t\t      var input = input.replace( /([A-Z])/g, \" $1\" );\n\t      \treturn input.replace(/_+/g, ' ');    \n\t      }\n\t    }\n\t\t})\n\t\t.filter('minMax',function(min, max, key) {\n\t\t\treturn function(input){\n\t\t\t\tif (min && input[key] < min) return false;\n\t\t\t\tif (max && input[key] > max) return false;\n\t\t    return true;\n\t\t  }  \n\t\t})\n\t\t.filter('displayName',function() {\n\t\t\treturn function(input){\t\t\t\t\n\t\t\t\treturn input ? input.replace(/Raw Denim/g, \"\") : false;\n\t\t  }  \n\t\t})\n\t\t\n\t\t\n\t\t\n\t\t\n\t\t\n\t\n\t// Get Angular's $http module.\n\tvar initInjector = angular.injector(['ng']);\n\tvar $http = initInjector.get('$http');\n\tvar $q = initInjector.get('$q');\n\tvar awsJsonUrl = \"http://bluedelta-data.s3-website-us-east-1.amazonaws.com/data/\"\n\t\n\tvar jsonDataKeys = ['style', 'thread', 'button', 'fabric', 'gender', 'tailors'];\n\tvar promises = [];\t\t\t\t\n\tfor (d = 0; d < jsonDataKeys.length; d++){\n\t\tpromises.push(\n\t\t\t$http.get(awsJsonUrl+jsonDataKeys[d]+'.json')\n\t\t);\t\n\t}\n\n\t$q.all(promises).then(\n\t\tfunction(result){\n\t\t\tvar jsonData = {};\n\t\t\tfor(r=0;r<result.length;r++){\n\t\t\t\tvar key = result[r].config.url.replace(awsJsonUrl,\"\").replace(\".json\",\"\");\n\t\t\t\tjsonData[key] = result[r].data;\n\t\t\t}\n\t\t\tangular.module('bdApp').constant('jsonData', jsonData);\n\t\t\tvar body = document.getElementById('bdApp');\n\t\t\tangular.bootstrap(angular.element(body), ['bdApp']);\t\t\n\t\t}\n\t);\n\n\t\n\n\t\t\n\t\t\n\t\n\t\t\n})();","// Autogenerated file, do not modify directly\n\n(function() {\n\nconst configOverridesGenerated = {\n  \"REGION\": \"us-east-1\",\n  \"PROFILE_IMAGES_S3_BUCKET\": \"blue-delta-api-development-stack-userdatabucket-12z57hiicf3xy\",\n  \"API_ENDPOINT\": \"https://kd6f1omjzc.execute-api.us-east-1.amazonaws.com/development\",\n  \"USER_POOL_ID\": \"us-east-1_UvVeNoe5z\",\n  \"CLIENT_ID\": \"6hdrpk1j20qmjhfdiga31uia80\",\n  \"IDENTITY_POOL_ID\": \"us-east-1:60250bd7-bc76-4ab7-8813-2369461cb881\"\n};\n\nreturn configOverridesGenerated;\n})();","\n(function() {\n\n  angular\n    .module('bdApp')\n    .service('api', api);\n\t\t\n\tapi.$inject = ['$http', '$q', '$rootScope'];\n  function api($http, $q, $rootScope) {\n\n\t  var login = function(args){\n\t\t  console.log(args[0], args[1]);\n\t\t  return $http.get(\"/\");\n\t\t}\n\t  \n\t\tvar call = function(func, args, success, error){\n\t\t\tconsole.log(func);\n\t\t\tconsole.log(this);\n\t\t\tthis[func](args)\n\t\t\t.success(function(result){\n\t\t\t\t$rootScope.$$phase || $rootScope.$apply();\n\t\t\t\tif (success) success(result.data);\n\t\t\t})\n\t\t\t.error(function(err){\n\t\t\t\tconsole.log(err.message);\n\t\t\t\tif (error) error(err);\n\t\t\t});\n\t\t}\n\t\t\n\t\t\n    return {\n      call : call,\n      login: login,\n    };\n    \n  }\n\n})();","(function () {\n\n  angular\n    .module('bdApp')\n    .service('authentication', authentication);\n\n  authentication.$inject = ['$http', '$window', 'aws', '$q'];\n  function authentication ($http, $window, aws, $q) {\n\n    var saveToken = function (token) {\n      $window.localStorage['mean-token'] = token;\n    };\n\n    var getToken = function () {\n      return $window.localStorage['mean-token'];\n    };\n\n    var isLoggedIn = function() {\n      var token = getToken();\n      var payload;\n\n      if(token){\n        payload = token.split('.')[1];\n        payload = $window.atob(payload);\n        payload = JSON.parse(payload);\n\n        return payload.exp > Date.now() / 1000;\n      } else {\n        return false;\n      }\n    };\n\n    var currentUser = function() {\n      if(isLoggedIn()){\n        var token = getToken();\n        console.log(token);\n        var payload = token.split('.')[1];\n        payload = $window.atob(payload);\n        payload = JSON.parse(payload);\n        return {\n          email : payload.email,\n          name : payload.name\n        };\n      }\n    };\n\n\t\t\n\t\tvar isAdmin = function(){\n\t\t\tif(isLoggedIn()){\n        var token = getToken();\n\n        var payload = token.split('.')[1];\n        payload = $window.atob(payload);\n        payload = JSON.parse(payload);\n        console.log(payload);\n        var roles = payload.permissions;\n\t\t\t\treturn roles.indexOf('admin') !== -1;\n      }\n\t\t}\n\n    \n\n    \n\n\n//\t\tconsole.log(aws.authenticateCognitoUser('cplefevre', 'ConfitConfit@123'));\n\n\t\tvar register = function(userDetails){\n\t\t\t//console.log(userDetails);\n\t\t//\tconsole.log(aws.signupForApplication('hello@confitdesign.com', 'ConfitConfit@123'));\t\n\t\t}\n    \n\n\t\t\n    \n\n    login = function(user) {\n\t    \n\t    aws.authenticateCognitoUser(user, password);\n\t\t};\n\n    logout = function() {\n      $window.localStorage.removeItem('mean-token');\n    };\n\n    return {\n      //userAttrList: userAttrList,\n      //createUserAttributeList: createUserAttributeList,\n      //userPool: userPool,\n\t    isAdmin : isAdmin,\n      currentUser : currentUser,\n      saveToken : saveToken,\n      getToken : getToken,\n      isLoggedIn : isLoggedIn,\n      register : register,\n      login : login,\n      logout : logout\n    };\n  }\n\n\n})();","(function () {\n\n  angular\n    .module('bdApp')\n    .service('aws', aws);\n\n  aws.$inject = ['$http', '$window', '$q', 'AWSConfig'];\n  function aws ($http, $window, $q, AWSConfig) {\n\t\t\n\t\tfunction _setUserInLocalStorage(userDetails){\n\t\t\t$window.localStorage.user = JSON.stringify({\n\t\t\t\t\"name\":userDetails.name,\n\t\t\t\t\"email\":userDetails.email,\n\t\t\t\t\"username\":userDetails[\"cognito:username\"],\n\t\t\t\t\"identityId\":userDetails.sub\n\t\t\t});\n\t\t\t$window.localStorage.isLoggedIn = true;\n\t\t}\n\t\t\n\t\tfunction _clearUserInLocalStorage(){\n\t\t\t$window.localStorage.clear();\n\t\t\t$window.localStorage.isLoggedIn = false;\n\t\t}\n\t\t\n    function _getUserPool() {\n      var poolData = { UserPoolId : AWSConfig.USER_POOL_ID, ClientId : AWSConfig.CLIENT_ID };\n      var userPool = new AWSCognito.CognitoIdentityServiceProvider.CognitoUserPool(poolData);\n      return userPool;\n    }\n\n    function _getAuthenticationDetails(uname, pword) {\n      var authenticationData = {\n        Username : uname,\n        Password : pword,\n      };\n      var authenticationDetails = new AWSCognito.CognitoIdentityServiceProvider.AuthenticationDetails(authenticationData);\n      return authenticationDetails;\n    }\n      \n    function _getCognitoUser(uname, upool) {\n      var userData = { Username : uname, Pool : upool };\n      var cognitoUser = new AWSCognito.CognitoIdentityServiceProvider.CognitoUser(userData);\n      return cognitoUser;\n    }\n\n    function _buildAttribute(keyName, value) {\n      var attribute = {\n        Name: keyName,\n        Value: value\n      }\n      var result = new AWSCognito.CognitoIdentityServiceProvider.CognitoUserAttribute(attribute);\n      return result;\n    }\n\n    function _buildAttributeList(attributeBuilder, obj) {\n      var attrList = [];\n      var attrToAdd;\n      for (var key in obj) {\n        attrToAdd = attributeBuilder(key, obj[key]);\n        attrList.push(attrToAdd);\n      }\n      return attrList;\n    }\n      \n\n    \n\t\tfunction _getAWSCredentials(idToken){\n\n\t\t\tlogins = {}\n\t\t\tvar authenticator = 'cognito-idp.'+AWSConfig.REGION+'.amazonaws.com/'+AWSConfig.USER_POOL_ID;\n\t\t\tlogins[authenticator] = idToken;\n\n\t\t\tAWS.config.update({ region: AWSConfig.REGION });\n\n      AWS.config.credentials = new AWS.CognitoIdentityCredentials({\n        IdentityPoolId: AWSConfig.IDENTITY_POOL_ID,\n        Logins : logins\n\t\t\t});\n\n\t\t\treturn AWS.config.credentials.getPromise();\n\n\t    // if (AWS.config.credentials.needsRefresh()){\n\t    //   AWS.config.credentials.clearCachedId();\n\t    //   AWS.config.credentials.get(function(err){\n\t    //     if (err) {\n\t    //       defer.reject(err);\n\t    //     }\n\t    //     defer.resolve();\n\t    //   });\n\t    // } else {\n\t    //   AWS.config.credentials.get(function(err){\n\t    //     if (err) {\n\t    //       defer.reject(err);\n\t    //     }\n\t    //     defer.resolve();\n\t    //   });\n\t    // }\n\t\t\t//\n\t\t\t// return defer.promise;\n\t\t\t\n\t\t}\n\t\t\n\t\tgetCurrentIdentityId = function(jwt){\n\t    if (!jwt){\n\t\t  \tvar userData = getCurrentUserFromLocalStorage();\n\t\t\t\tjwt = userData.idToken.getJwtToken();\n\t    }\n\t    var idTokenPayload = jwt.split('.')[1];\n\t\t\treturn JSON.parse(atob(idTokenPayload)).sub;\t\t\t\t\n    }\n\t\t\t\n    getUserFromLocalStorage = function(username) {\n      var cognitoUser = _getCognitoUser(username, _getUserPool());\n      if (cognitoUser != null) {\n          cognitoUser.getSession(function(err, session) {\n              if (err) {\n                  alert(err);\n                  return;\n              }\n              console.log('session validity: ' + session.isValid());\n          });\n      }\n    }\n\n    deleteCognitoUser = function() {\n      var cognitoUser = _getUserPool().getCurrentUser();\n      cognitoUser.deleteUser(function(err, result) {\n        if (err) {\n            alert(err);\n            return;\n        }\n        console.log('call result: ' + result);\n      });\n    }\n\t\t\n\n\t\tauthenticateViaFB = function(){\n\t\t\t\n\t\t\tvar defer = $q.defer();\n\t\t\t\n\t\t\tFB.login(function (response) {\n\t\t\t  if (response.authResponse) { // logged in\n\t\t\t    AWS.config.credentials = new AWS.CognitoIdentityCredentials({\n\t\t\t      IdentityPoolId: AWSConfig.IDENTITY_POOL_ID,\n\t\t\t      Logins: {\n\t\t\t        'graph.facebook.com': response.authResponse.accessToken\n\t\t\t      }\n\t\t\t    });\n\t\t\t\n\t\t\t    defer.resolve();\n\t\t\t  } else {\n\t\t\t    defer.reject('There was a problem logging in with Facebook.');\n\t\t\t  }\n\t\t\t});\n\t\t\t\n\t\t\treturn defer.promise;\t\t\n\t\t}\n\t\t\n\t\t\n    authenticateCognitoUser = function(username, password) {\n      var authenticationDetails = _getAuthenticationDetails(username, password);\n      var cognitoUser = _getCognitoUser(username, _getUserPool());\n      \n      var defer = $q.defer();\n      \n      \n      cognitoUser.authenticateUser(authenticationDetails, {\n        onSuccess: function (result) {\n\t        var userDetails = JSON.parse(atob(result.idToken.jwtToken.split('.')[1]));\t\t\n\t\t\t\t\t_setUserInLocalStorage(userDetails);\n\t\t\t\t\tconsole.log(userDetails);\n\t\t\t\t\tdefer.resolve(result);\n        },\n        onFailure: function(err) {\n          defer.reject(err);\n        }, \n        newPasswordRequired: function(userAttributes, requiredAttributes) {\n          // User was signed up by an admin and must provide new\n          // password and required attributes, if any, to complete\n          // authentication.\n\t\t\t\t\tconsole.log(userAttributes, requiredAttributes);\n\n          // the api doesn't accept this field back\n          //delete userAttributes.email_verified;\n\n          // Get these details and call\n\t        // cognitoUser.completeNewPasswordChallenge(\"ConfitConfit@123\", userAttributes, this);\n\t      }\n      });\n      \n      return defer.promise;\n    }\n\t\t\n\n    signupForApplication = function(emailAddress, name, password) {\n\t    console.log(emailAddress, name, password);\n\t    var defer = $q.defer();\n\t    \n      var attributeList = _buildAttributeList(_buildAttribute, {email: emailAddress, name: name});\n      console.log(attributeList);\n      //return false;\n      var cognitoUser;\n      _getUserPool().signUp(emailAddress, password, attributeList, null, function(err, result) {\n        if (err) defer.reject(err);\n        else defer.resolve(result);\n      });\n      \n      return defer.promise;\n    }\n\n    updateAttributesOnUser = function(username, obj) {      \n      var attributeList = _buildAttributeList(_buildAttribute, obj);\n      var cognitoUser   = _getCognitoUser(username, _getUserPool());\n      cognitoUser.updateAttributes(attributeList, function(err, result) {\n          if (err) {\n              alert(err);\n              return;\n          }\n          console.log('call result: ' + result);\n      });\n    }\n\n    deleteUserAttributes = function(cognitoUser, attributeList) {\n      cognitoUser.deleteAttributes(attributeList, function(err, result) {\n          if (err) {\n              alert(err);\n              return;\n          }\n          console.log('call result: ' + result);\n      });\n    }\n\n    verifyUserAttribute = function(cognitoUser, attributeName) {\n        cognitoUser.getAttributeVerificationCode(attributeName, {\n          onSuccess: function (result) {\n              console.log('call result: ' + result);\n          },\n          onFailure: function(err) {\n              alert(err);\n          },\n          inputVerificationCode: function() {\n              var verificationCode = prompt('Please input verification code: ' ,'');\n              cognitoUser.verifyAttribute(attributeName, verificationCode, this);\n          }\n      });\n    }\n\n    retrieveUserAttributes = function(cognitoUser) {\n      cognitoUser.getUserAttributes(function(err, result) {\n          if (err) {\n              alert(err);\n              return;\n          }\n          for (i = 0; i < result.length; i++) {\n              console.log('attribute ' + result[i].getName() + ' has value ' + result[i].getValue());\n          }\n      });\n    }\n\n    resendConfirmationCode = function(cognitoUser) {\n\t    if(!cognitoUser.resendConfirmationCode){\n\t\t  \t//We've just got an email address...\n\t\t  \tcognitoUser = _getCognitoUser(cognitoUser, _getUserPool());\n\t    }\n\t    \n      cognitoUser.resendConfirmationCode(function(err, result) {\n\t      \n\t      //TODO: This function throws an error on success that obscures a promise. Once the SDK has been fixed, we need to implement a promise structure to properly display results on the front end.\n        if (err) {\n          console.log(err);\n          return;\n        }\n        \n        //code has been sent\n        return true;\n      });\n    }\n    \n   confirmRegistration = function(cognitoUser, confirmationCode) {\n      cognitoUser.confirmRegistration(confirmationCode, true, function(err, result) {\n          if (err) {\n              alert(err);\n              return;\n          }\n          alert(result);\n      });\n    }\n\n    changePassword = function(username, oldPassword, newPassword) {\n\t    var defer = $q.defer();\n\t    var cognitoUser = _getCognitoUser(username, _getUserPool());\n\t\t\tif (cognitoUser != null) {\n\t\t\t\tcognitoUser.getSession(function(err, session) {\n\t\t\t    if (err) {\n\t\t\t\t\t\tdefer.reject(err);\n\t\t\t    }else{\n\t\t\t\t  \tcognitoUser.changePassword(oldPassword, newPassword, function(err, result) {\n\t\t\t        if (err) defer.reject(err);\n\t\t\t        else defer.resolve(result);\n\t\t\t    \t});  \n\t\t\t    }\n\t\t\t\t});\n\t\t\t} else defer.reject(\"You are not logged in.\");\n\t\t\treturn defer.promise;\t\t   \n\t\t}\n\t    \n\t\t\n    forgotPassword = function(userName) {\n\t    var defer = $q.defer();\n\t    var cognitoUser = _getCognitoUser(userName, _getUserPool());\n\t    \n\t    \n\t    cognitoUser.forgotPassword({\n        onSuccess: function (result) {\n\t        console.log(\"forgotPassword success... for some reason the email didn't send...\");\n\t        console.log(result);\n\t\t      defer.reject(result);\n        },\n        onFailure: function(err) {\n          console.log(err);\n          defer.reject(err);\n        },\n        \n        inputVerificationCode: function(data) {\n\t        console.log('Code sent to:'); console.log(data);\n\t\t\t\t\tdefer.resolve(\"email sent\");\n        }\n      });\n      \n      return defer.promise;\n    }\n    \n    setNewPassword = function(userName, verificationCode, newPassword){\n\t\t\tvar cognitoUser = _getCognitoUser(userName, _getUserPool());\n\t\t\tvar defer = $q.defer();\n\t\t\t\n      cognitoUser.confirmPassword(verificationCode, newPassword, {\n\t      onSuccess: function (result) {\n\t\t      defer.resolve();\n        },\n        onFailure: function(err) {\n          console.log(err);\n          defer.reject(err);\n        },\n      });\n      return defer.promise;\n    }\n\n    deleteUser = function(cognitoUser) {\n      cognitoUser.deleteUser(function(err, result) {\n        if (err) {\n            alert(err);\n            return;\n        }\n        console.log('call result: ' + result);\n      });\n    }\n\n    signUserOut = function(cognitoUser) {\n      if (cognitoUser != null) {\n\t      \t_clearUserInLocalStorage();\n          cognitoUser.signOut();\n      }\n    }\n    \n    signCurrentUserOut = function() {\n\t  \tvar cognitoUser = _getUserPool().getCurrentUser();\n      if (cognitoUser != null) {\n        cognitoUser.signOut();\n\t\t\t\t_clearUserInLocalStorage();\n      }\n    }\n\n\n    signUserOutGlobally = function(cognitoUser) {\n\t    _clearUserInLocalStorage();\n      cognitoUser.globalSignOut();\n    }\n\t\t\n\t\t\n\n    getCurrentUserFromLocalStorage = function(callback) {\n      var cognitoUser = _getUserPool().getCurrentUser();\n      if (cognitoUser != null) {\n      \treturn cognitoUser.getSession(function(err, session) {\n          if (err) {\n\t          console.log(err);\n\t          return false;\n          }\n          if (callback) callback(session);\n          return session;\n        });\n      }else{\n\t      console.log(\"You are not logged in\");\n\t      return false;\n      }\n    }\n   \n\t\t\n\t\tisLoggedIn = function() {\n\t\t\treturn $window.localStorage.isLoggedIn==\"true\";\t\t\n\t\t}\n\t\t\n\t\n    confirmRegisteredUnauthenticatedUser = function(userName, confirmationCode) {\n\t    \n      var cognitoUser = _getCognitoUser(userName, _getUserPool());\n\t    var defer = $q.defer();\n      \n      cognitoUser.confirmRegistration(confirmationCode, true, function(err, result) {\n        if (err) defer.reject(err);\n        else defer.resolve(result);\n      });\n      \n      return defer.promise;\n    }\n    \n\t\t\n    \n    \n    \n    \n    //Save an image to s3 Bucket\n    saveImageTos3 = function (imageURL, userTokens, filename){\n\t\t\t\n\t\tfunction dataURItoBlob(dataURI) {\n\t\t\tvar binary = atob(dataURI.split(',')[1]);\n\t\t\tvar array = [];\n\t\t\tfor(var i = 0; i < binary.length; i++) {\n\t\t\t  array.push(binary.charCodeAt(i));\n\t\t\t}\n\t\t\treturn new Blob([new Uint8Array(array)], {type: 'image/jpeg'});\n\t\t}\n\t\t\t\n\t\t\t\n\t\t\tvar defer = $q.defer();\n\t\t\t\n\n\t\t\t_getAWSCredentials(userTokens.idToken.jwtToken).then(\n\n\t\t\t\t//Got credentials.. now save image\n\t\t\t\tfunction(){\n\t\t\t\t\tvar blobData = dataURItoBlob(imageURL);\n\t\t\t\t\tvar bucketName = 'blue-delta-api-development-stack-userdatabucket-12z57hiicf3xy';\n\t\t\t\t\tvar s3bucket = new AWS.S3({region: AWSConfig.REGION, params: {Bucket: bucketName}});\n\t\t\t\t\tvar params = {Key: AWS.config.credentials.identityId + \"/\" + filename, Body: blobData};\n\n\t\t\t\t\ts3bucket.upload(params, function(err, data){\t      \n\t\t\t\t\t\tif (err) defer.reject(err);\n\t\t\t\t\t\telse  defer.resolve(data.Location);\t\t\t\t\t\t\n    \t\t\t});\n    \t\t\t\n\t\t\t\t},\n\t\t\t\t\n\t\t\t\t//Can't get AWS Credentials\n\t\t\t\tfunction(err){\n\t\t\t\t\tdefer.reject(err);\n\t\t\t\t}\n\t\t\t);\n\t\t\t\n\t\t\treturn defer.promise;\n\n    }\n \n     \n      \n    \n    return {\n\t    getCurrentIdentityId:getCurrentIdentityId,\n\t    authenticateViaFB: authenticateViaFB,\n\t    getUserFromLocalStorage: getUserFromLocalStorage,\n      deleteCognitoUser: deleteCognitoUser,\n      authenticateCognitoUser: authenticateCognitoUser,\n      signupForApplication: signupForApplication,\n      updateAttributesOnUser: updateAttributesOnUser,\n      deleteUserAttributes: deleteUserAttributes,\n      verifyUserAttribute: verifyUserAttribute,\n      retrieveUserAttributes: retrieveUserAttributes,\n      resendConfirmationCode: resendConfirmationCode,\n      confirmRegistration: confirmRegistration,\n      changePassword: changePassword,\n      forgotPassword: forgotPassword,\n      setNewPassword: setNewPassword,\n      deleteUser: deleteUser,\n      signUserOut: signUserOut,\n      signUserOutGlobally: signUserOutGlobally,\n      getCurrentUserFromLocalStorage: getCurrentUserFromLocalStorage,\n      confirmRegisteredUnauthenticatedUser: confirmRegisteredUnauthenticatedUser,\n      signCurrentUserOut:signCurrentUserOut,\n      saveImageTos3 : saveImageTos3,\n      isLoggedIn:isLoggedIn\n    };\n  }\n})();","\n(function() {\n\n  angular\n    .module('bdApp')\n    .service('bdAPI', bdAPI);\n\n  bdAPI.$inject = ['$window', '$rootScope', '$http', '$httpParamSerializer', '$filter','$q', 'aws'];\n  function bdAPI ($window, $rootScope, $http, $httpParamSerializer, $filter, $q, aws) {\n\n\t  $window._thirdParty = $window._thirdParty || {};\n\t  $window._thirdParty.BlueDeltaApi =new API.Client.DefaultApi(angular.injector([\"ng\"]).get(\"$http\"),\n    angular.injector([\"ng\"]).get(\"$httpParamSerializer\"),\n    angular.injector([\"ng\"]));\n\n    var BlueDeltaApi = $window._thirdParty.BlueDeltaApi;\n\t\t\n\t\t//JSON Data\n\t\tBlueDeltaApi.jsonData = {};\n\t\tsetupJsonData = function(key){\n\t\t\t$http.get('http://bluedelta-data.s3-website-us-east-1.amazonaws.com/data/'+key+'.json').then(function(response){\n\t\t\t\tBlueDeltaApi.jsonData[key] = response.data;\n\t\t\t});\n\t\t}\n\t\t\n\t\tjsonDataKeys = [\n\t\t\t'style',\n\t\t\t'thread',\n\t\t\t'button',\n\t\t\t'fabric',\n\t\t\t'gender',\n\t\t\t'tailors'\n\t\t];\n\t\t\n\t\tfor (d = 0; d < jsonDataKeys.length; d++) { \n\t\t\tsetupJsonData(jsonDataKeys[d]);\n\t\t}\n\t\t\n\t\tBlueDeltaApi.getJsonData = function(){\n\t\t\treturn this.jsonData;\n\t\t}\n\t\tvar styleByGender = function(gender){\n\t\t\treturn function(style){\n\t\t\t\treturn style[\"images_\"+gender];\n\t\t  }\n\t\t};\n\t\t\n\t\tBlueDeltaApi.jeanKeyToDataKey = function(jeanKey){\n\t\t\tvar dataKey = false;\n\t\t\t\n\t\t\tswitch(true){\n\t\t\t\tcase jeanKey.indexOf('thread') > -1:\n\t\t\t\tdataKey = \"threads\";\n\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t\tcase (jeanKey == \"gender\" || jeanKey == \"style\" ||  jeanKey == \"fabric\"):\n\t\t\t\tdataKey = jeanKey+\"s\";\n\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t}\n\t\t\treturn  dataKey;\n\t\t}\n\t\t\t\n\t\t\t\t\n\t\tBlueDeltaApi.dataLookup = function(dataKey, id, attr){\n\t\t\t\n\t\t\tattr = attr||null;\n\t\n\t\t\tif (typeof dataKey == 'undefined' || typeof id == 'undefined') return false;\n\t\t\tvar dataSet = BlueDeltaApi.jsonData[dataKey];\n\t\t\tdataById = \t$filter('filter')(dataSet, {id: id});\n\t\t\tif (typeof dataById == 'undefined') return false; //Return false when dataSet is undefined...\n\t\t\t\n\t\t\tselected = dataById[0];\n\t\t\t\n\t\t\tif (!attr) return selected;\n\t\t\telse return selected[attr];\t\n\t\t\t\n\t\t}\n\n\t\tvar cleanUser = function(user){\n\t\t\tvar temp = JSON.stringify(user);\n\t\t\ttemp = temp.replace(/\\\"\\\"/g, null);\n\t\t\tuser = JSON.parse(temp);\n\t\t\treturn user;\n\t\t}\n\t\t\t\t\n\t\tBlueDeltaApi.setupHeaders = function(){\n\t\t\tvar userData = aws.getCurrentUserFromLocalStorage();\n\t\t\tthis.defaultHeaders_['Authorization'] = userData.idToken.getJwtToken();\n\t\t\tvar idTokenPayload = userData.idToken.jwtToken.split('.')[1];\n\t\t\tvar identityID = JSON.parse(atob(idTokenPayload)).sub;\t\n\t\t\treturn identityID;\n\t\t}\n\t\t\n\t\tBlueDeltaApi.call = function(func,args,success,error){\n\t\t\tconsole.log(\"running \"+func);\n\t\t\tvar bdapi = this;\n\t    aws.getCurrentUserFromLocalStorage(function(session){\n\n\t\t    //Reset auth header\n\t\t\t\tbdapi.defaultHeaders_['Authorization'] = session.idToken.getJwtToken();\n\t\t\t\t\n\t\t\t\t//put args into array form\n\t\t\t\tif (!Array.isArray(args)) args = [args];\n\t\t\t\t\n\t\t\t\t//Run the API call\n\t\t\t\tbdapi[func].apply(bdapi, args).then(\n\t\t\t\t\tfunction(result){\n\t\t\t\t\t\tsuccess(result);\n\t\t\t\t\t\t$rootScope.$$phase || $rootScope.$apply();\n\t\t\t\t\t}, \n\t\t\t\t\tfunction(err){\n\t\t\t\t\t\tconsole.log(err);\n\t\t\t\t\t\tif (error) error(err);\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t\t\n\t    });\n\t\t}\n\n\t\t//Save User\n\t\tBlueDeltaApi.saveUser = function(user){\n\t\t\tvar defer = $q.defer();\n\t\t\tuser = cleanUser(user);\n\t\t\tif (!user.identityId) defer.reject(\"No identity Id\");\n\t\t\telse{\n\t\t\t\tBlueDeltaApi.usersUpdate(user.identityId, user).then(\n\t\t\t\t\tfunction(result){\n\t\t\t\t\t\tconsole.log(\"got it\");\n\t\t\t\t\t\tdefer.resolve(result);\n\t\t\t\t\t},\n\t\t\t\t\tfunction(err){\n\t\t\t\t\t\tconsole.log(\"Error saving user:\");\n\t\t\t\t\t\tconsole.log(err);\n\t\t\t\t\t\tdefer.reject(err);\n\t\t\t\t\t}\t\n\t\t\t\t)\n\t\t\t}\n\t\t\treturn defer.promise;\t\n\t\t}\n\n\t  return BlueDeltaApi;\n  }\n\n})();","// Autogenerated file, do not modify directly\n(function () {\n  angular \n    .module('bdApp')\n    .service('AWSConfig', AWSConfig);\n      \n  function AWSConfig () {\n\t\treturn{\n\t\t\t\"REGION\": \"us-east-1\",\n\t\t  \"PROFILE_IMAGES_S3_BUCKET\": \"blue-delta-api-development-stack-userdatabucket-12z57hiicf3xy\",\n\t\t  \"API_ENDPOINT\": \"https://kd6f1omjzc.execute-api.us-east-1.amazonaws.com/development\",\n\t\t  \"USER_POOL_ID\": \"us-east-1_UvVeNoe5z\",\n\t\t  \"CLIENT_ID\": \"6hdrpk1j20qmjhfdiga31uia80\",\n\t\t  \"IDENTITY_POOL_ID\": \"us-east-1:60250bd7-bc76-4ab7-8813-2369461cb881\"\n\t\t}\n  }\n\n\n})();","(function() {\n\n  angular\n    .module('bdApp')\n    .service('meanData', meanData);\n\n  meanData.$inject = ['$http', 'authentication'];\n  function meanData ($http, authentication) {\n\t\t\n\t\t/*\n    var getProfile = function () {\n      return $http.get('/api/profile', {\n        headers: {\n          Authorization: 'Bearer '+ authentication.getToken()\n        }\n      });\n    };\n    */\n    var getOptions = function () {\t    \n      return $http.get('/api/options', {\n        headers: {\n          Authorization: 'Bearer '+ authentication.getToken()\n        }\n      });\n    };\n\t\t\n\t\t\n\t\t\n\t\t\n\t\tvar getJeanById = function(id, callback){\n\t\t\t$http.get('/data/chris-jeans.json').then(function(response){\n\t\t\t\tvar jeans = response.data;\n\t\t\t\tfor(j=0; j<response.data.length; j++){\n\n\t\t\t\t\tif (response.data[j].id == id){\n\t\t\t\t\t\tconsole.log('jean found');\n\t\t\t\t\t\tvar ret = response.data[j];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tcallback(ret);\n\n\t\t\t});\n\t\t}\n\t\t\n\t\t//Placeholders\n\t\tvar getJeansByUser = function(userId){\n\t\t\treturn $http.get('/data/chris-jeans.json');\n\t\t};\t\t\n\t\tvar getProfile = function(){\n\t\t\treturn $http.get('/data/profile.json');\n\t\t};\n\t\t\n\t\tvar getStyles = function(){\n\t\t\treturn $http.get('/data/styles.json');\n\t\t};\n\t\t\n\t\tvar getThreads = function(){\n\t\t\treturn $http.get('/data/threads.json');\n\t\t};\n\t\t\n\t\tvar getHardware = function(){\n\t\t\treturn $http.get('/data/buttons.json');\n\t\t};\n\t\t\n\t\tvar getFabrics = function(){\n\t\t\treturn $http.get('/data/fabrics.json');\n\t\t};\n\t\t\n\t\t\n\t\tvar getGenders = function(){\n\t\t\treturn $http.get('/data/genders.json');\n\t\t};\n\t\t\n\t\t\n\t\t\n\t\t\n    return {\n\t    getJeanById: getJeanById,\n\t    getJeansByUser : getJeansByUser,\n      getProfile : getProfile,\n      getOptions : getOptions,\n      getStyles : getStyles,\n      getThreads : getThreads,\n      getHardware: getHardware,\n      getFabrics: getFabrics,\n      getGenders: getGenders\n    };\n  }\n\n})();","\n(function() {\n\n  angular\n    .module('bdApp')\n    .service('jean', ['$routeParams', '$window', 'bdAPI', '$q', 'aws', 'jsonData', jean]);\n\n  function jean($routeParams, $window, bdAPI, $q, aws, jsonData) {\n\n\n\t\t/*\n\t\t*   JSON Data lookup\n\t\t*/\n\t\t\n\t\tvar dataLookup = function(dataType, key){\n\n\t\t\tvar data = jsonData[dataType];\n\t\t\tif (!data) return false;\n\t\t\t\n\t\t\tfor (i=0; i<data.length; i++) {\n\t\t\t\t//\tconsole.log(data[i][dataType+\"Id\"], key);\n\t\t\t\tif (data[i][dataType+\"Id\"] == key) \t\t\t\t\n\t\t\t\treturn data[i];\n  \t\t}\n\t\t}\n\t\t\n\n\t\t\n\t\t/*\n\t\t*.  Jean Data\n\t\t*/\n\t\t\n  \tvar jeanData = {};\n  \t\n\t\tset = function(property, value){\n\t\t\tjeanData[property] = value;\n\t\t\tthis.saved=false;\n\t\t};\n\t\t\n\t\tcreateNew = function(jean){\n\t\t\tif (!jean || jean.constructor != Object){\n\t\t\t\tjeanData = {\n\t\t\t\t\t\"gender\" : 1,\n\t\t\t\t\t\"style\" : 1,\n\t\t\t\t\t\"fabric\" : dataLookup(\"fabric\", 1004),\n\t\t\t\t\t\"accent_thread\" : dataLookup(\"thread\", 1),\n\t\t\t\t\t\"top_thread\" : dataLookup(\"thread\", 1),\n\t\t\t\t\t\"bottom_thread\" : dataLookup(\"thread\", 1)\n\t\t\t\t}\n\t\t\t\tjeanData.saved = false;\n\t\t\t}else{\n\t\t\t\tjeanData = {\n\t\t\t\t\t\"gender\" : jean.gender,\n\t\t\t\t\t\"style\" : jean.style,\n\t\t\t\t\t\"fabric\" : jean.fabric.fabricId,\n\t\t\t\t\t\"accent_thread\" : jean.accent_thread.threadId,\n\t\t\t\t\t\"top_thread\" : jean.top_thread.threadId,\n\t\t\t\t\t\"bottom_thread\" : jean.bottom_thread.threadId\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\t\n\t\t\t\t\n\t\tfunction parseURLkey(key){\n\t\t\tswitch(key){\n\t\t\t\tcase \"g\":\n\t      return \"gender\";\n\t      break;\n\t      \n\t      case \"s\":\n\t      return \"style\";\n\t      break;\n\t      \n\t      case \"f\":\n\t      return \"fabric\";\n\t      break;\n\t      \n\t      case \"tt\":\n\t      return \"top_thread\";\n\t      break;\n\t      \n\t      case \"tb\":\n\t      return \"bottom_thread\";\n\t      break;\n\t      \n\t      case \"ta\":\n\t      return \"accent_thread\";\n\t      \n\t      default: return false;\n\t\t\t}\n\t\t}\n\t\t\n\t\t\n\t\tfunction jeanKeytoURL(key){\n\t\t\tswitch(key){\n\t\t\t\tcase \"gender\":\n\t      return \"g\";\n\t      break;\n\t      \n\t      case \"style\":\n\t      return \"s\";\n\t      break;\n\t      \n\t      case \"fabric\":\n\t      return \"f\";\n\t      break;\n\t      \n\t      case \"top_thread\":\n\t      return \"tt\";\n\t      break;\n\t      \n\t      case \"bottom_thread\":\n\t      return \"tb\";\n\t      break;\n\t      \n\t      case \"accent_thread\":\n\t      return \"ta\";\n\t      \n\t      default: return false;\n\t\t\t}\n\t\t}\n\t\t\n\t\treset = function(){\n\t\t\tcreateNew();\n\t\t}\n\t\t\n\t\t//Set up jean data from parameter\n\t\tvar setup = function(data){\n\t\t\tvar defer = $q.defer();\n\t\t\t\t\t\t\n\t\t\t//Set up jean from data\n\t\t\tif (data){ \n\t\t\t\tfor(prop in data){\n\t\t\t\t\tif(data.hasOwnProperty(prop)){\n\t\t\t\t\t\tset(prop, data[prop]);\t\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tdefer.resolve(jeanData);\n\t\t\t}\n\n\t\t\t//Data URL\n\t\t\telse if ($routeParams.jeanId && !$routeParams.userId){\n\t\t\t\tcreateNew();\n\t\t\t\tif ($routeParams.jeanId.indexOf(\":\")>0){\n\t\t\t\t\tjeanData = $routeParams.jeanId.split(\":\");\n\t\t\t\t\tfor(var d=0; d<jeanData.length; d++){\n\t\t\t\t\t\tvar parts= jeanData[d].match(/([A-Za-z]+)([0-9]+)/);\n\t\t\t\t\t\tif (!parts) continue;\n\t\t\t\t\t\tvar jeanKey = parseURLkey(parts[1]);\n\t\t\t\t\t\tif (jeanKey) jeanData[jeanKey] = parseInt(parts[2]);\t\t\t\t\t\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tdefer.resolve(jeanData);\n\t\t\t}\n\t\t\t\t\t\n\t\t\t//Copy or Edit Jean\n\t\t\telse if ($routeParams.jeanId && $routeParams.userId){\n\n\t\t\t\t//First get Jean\n\t\t\t\tconsole.log($routeParams.userId, $routeParams.jeanId);\n\t\t\t\tbdAPI.jeansGet($routeParams.userId, $routeParams.jeanId).then(\t\t\t\t\t\n\t\t\t\t\tfunction(result){\n\n\t\t\t\t\t\tvar newJean = result.data;\n\n\t\t\t\t\t\tvar userData = aws.getCurrentUserFromLocalStorage();\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(userData){\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tvar identityId = bdAPI.setupHeaders(userData);\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t//Edit Jean\n\t\t\t\t\t\t\tif (identityId == $routeParams.userId){\n\t\t\t\t\t\t\t\tfor(prop in newJean){\n\t\t\t\t\t\t\t\t\tif(newJean.hasOwnProperty(prop)){\n\t\t\t\t\t\t\t\t\t\tset(prop, newJean[prop]);\t\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t//Copy Jean\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tcreateNew(newJean);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t//Not logged in.. create new.\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tcreateNew(newJean);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tdefer.resolve(jeanData);\n\t\t\t\t\t}, \n\t\t\t\t\tfunction(err){\n\t\t\t\t\t\t//Jean or user not found.. just create a blank jean...\n\t\t\t\t\t\tconsole.log(err);\n\t\t\t\t\t\tcreateNew();\n\t\t\t\t\t\tdefer.resolve(jeanData);\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t\t\t\t\n\t\t\t\n\t\t\t//data already exists\n\t\t\telse if (Object.keys(jeanData).length > 0){\n\t\t\t\tdefer.resolve(jeanData);\n\t\t\t}\n\t\t\t\n\t\t\telse{\n\t\t\t\tif(Object.keys(jeanData).length === 0 && jeanData.constructor === Object){\n\t\t\t\t\tcreateNew();\t\t\t\n\t\t\t\t\tdefer.resolve(jeanData);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\treturn defer.promise;\n\t\t}\n\t\t\n\t\t\n\t\tvar get=function(){\n\t\t\treturn jeanData;\n\t\t}\n\t\t\n\t\t\n\t\tfunction loadImage(src) {\n\t\t\treturn $q(function(resolve,reject) {\n\t\t\t  var image = new Image();\n\t\t\t  image.crossOrigin = \"\";\n\t\t\t  image.src = src;\n\t\t\t  image.onload = function() {\n\t\t\t    resolve(image);\n\t\t\t  };\n\t\t\t  image.onerror = function(e) {\n\t\t\t    reject(e);\n\t\t\t  };\n\t\t\t})\n\t\t}   \n    \n\t function searchAndDraw(key, cntxt, images){\n\t\t\tfor(i=0; i<images.length; i++){\n\t\t\t\tvar image = images[i];\n\t\t\t\tif(image.src.indexOf(\"/\"+key+\"/\") > -1){\n\t\t\t\t\tcntxt.drawImage(image,0,0,600,696);\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t\t\n\t  var createThumb = function(jeanData){\n\t  \tvar canvas = document.createElement('canvas');\n\t  \tcanvas.width=600;\n\t  \tcanvas.height=600;\n\t  \tvar cntxt = canvas.getContext('2d');\t\n\t  \tvar promises = [];\n\t\t\tvar images = [\n\t\t\t\t'http://bluedelta-data.s3-website-us-east-1.amazonaws.com/images/components/fabric/g'+jeanData.gender+'/s2/f'+jeanData.fabric.fabricId+'.jpg',\n\t\t\t\t'http://bluedelta-data.s3-website-us-east-1.amazonaws.com/images/components/thread/g'+jeanData.gender+'/s2/tb/'+jeanData.bottom_thread.threadId+'.png',\n\t\t\t\t'http://bluedelta-data.s3-website-us-east-1.amazonaws.com/images/components/thread/g'+jeanData.gender+'/s2/tt/'+jeanData.top_thread.threadId+'.png',\n\t\t\t\t'http://bluedelta-data.s3-website-us-east-1.amazonaws.com/images/components/thread/g'+jeanData.gender+'/s2/ta/'+jeanData.accent_thread.threadId+'.png'\n\t\t\t];\n\t\n\t    for(var i=0; i<images.length; i++){\n\t      promises.push(loadImage(images[i], cntxt));\n\t    }\n\t    \n\t    return $q.all(promises).then(\n\t    \tfunction(results) {\n\t\t\t    console.log(\"all images loaded\");\n\t\t\t\t\tsearchAndDraw(\"fabric\", cntxt, results);\n\t\t\t\t\tsearchAndDraw(\"tb\", cntxt, results);\n\t\t\t\t\tsearchAndDraw(\"tt\", cntxt, results);\n\t\t\t\t\tsearchAndDraw(\"ta\", cntxt, results);\n\t\t      var dataUrl = canvas.toDataURL('image/jpeg');\n\t\t\t\t\treturn dataUrl;\n\t\t    },    \n\t\t    function(err){\n\t\t\t    console.log(err);\n\t\t    }\n\t    );\t\n\t\t}\n\n\t\t\n\t\t\n\t\tgetDataCode = function(){\n\t\t\tvar url = \"\";\n\t\t\tfor (var property in jeanData) {\n\t\t\t  if (jeanData.hasOwnProperty(property)) {\n\t\t\t\t\tvar id = jeanData[property];\n\t\t\t\t\tif (typeof(id)=='object'){\n\t\t\t\t\t\tvar idKey = property+\"Id\";\n\t\t\t\t\t\tif (idKey.indexOf(\"thread\")>-1) idKey=\"threadId\";\n\t\t\t\t\t\tid = id[idKey];\n\t\t\t\t\t}\n\t\t\t\t\tvar urlKey = jeanKeytoURL(property);\n\t\t\t\t\tif (urlKey) url += \"_\"+urlKey+id;\n\t\t\t  }\n\t\t\t}\t\n\t\t\turl = url.replace(/(^[_\\s]+)|([_\\s]+$)/g, '');\n\t\t\treturn url;\n\t\t}\n\t\t\n\t\tvar deleter = function (userId, jeanId, callback){\n\t\t\tvar userData = aws.getCurrentUserFromLocalStorage();\n\t\t\tbdAPI.defaultHeaders_['Authorization'] = userData.idToken.getJwtToken();\n\t\t\tbdAPI.jeansDelete(userId, jeanId).then(\n\t\t\t\tfunction(result){\n\t\t\t\t\tif (callback) callback(result);\n\t\t\t\t},\n\t\t\t\tfunction(err){\n\t\t\t\t\tconsole.log(err);\n\t\t\t\t}\n\t\t\t)\n\t\t}\n\t\t\n\t\tvar save = function(){\n\t\t\t\n\t\t\tvar defer = $q.defer();\n\t\t\tvar jean = this;\n\t\t\tvar jeanData = jean.get();\n\t\t\tvar filename = jean.getDataCode();\n\t\t\tfilename += \".jpg\";\n\t\t\t\n\t\t\tthis.createThumb(jeanData).then( function(imageURL){\n\t\t\t\t\n\t\t    var userData = aws.getCurrentUserFromLocalStorage();\n\t\t\t\tif (userData){\t\t\n\t\t\t\t\taws.saveImageTos3(imageURL, userData, filename).then(\n\t\t\t\t\t\tfunction(result){\t\n\n\t\t\t\t\t\t\t//Add image to jean before saving...\n\t\t\t\t  \t\tjean.set(\"imageURL\",result);\n\t\t\t\t\t\t\tvar\tuserId = aws.getCurrentIdentityId();\n\t\t\t\t\t\t\tvar args = jeanData.jeanId ? [userId, jeanData.jeanId, jeanData] : [userId, jeanData];\n\t\t\t\t\t\t\tvar saveFunc = jeanData.jeanId ? 'jeansUpdate' : 'jeansCreate';\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tbdAPI.call(saveFunc, args, function(result){\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t//For new jeans... set the Id..\n\t\t\t\t\t\t\t\tvar newJean = result.data.jeans[result.data.jeans.length-1];\n\t\t\t\t\t\t\t\tif (!jeanData.jeanId) jean.set(\"jeanId\", newJean.jeanId);\n\t\t\t\t\t\t\t\tdefer.resolve(result);\n\t\t\t\t\t\t\t}, function(err){defer.reject(err);});\n\n\t\t\t\t\t\t\t\n\t\t\t\t  \t}, function(err){\n\t\t\t\t\t  \tconsole.log(err);\n\t\t\t\t\t  \tdefer.reject(err.message);\n\t\t\t\t\t  }\n\t\t\t\t\t);\n\t\t\t\t}else{\n\t\t\t\t\tdefer.reject(\"You are not logged in...\");\n\t\t\t\t}\n\t\t\t\t\n\t    });\n\t\t\t\n\t\t\treturn defer.promise;\n\t\t}\n\t\t\n\t\t\t\n\t\treturn {\n\t    dataLookup: dataLookup,\n\t    deleter : deleter,\n\t    save : save,\n\t    get : get,\n\t    setup : setup,\n\t    reset : reset,\n      set : set,\n      createNew :createNew,\n      getDataCode: getDataCode,\n      createThumb: createThumb\n     }\n\t\t\t\n\t\t\n  }\n\n})();","/*\n(function() {\n\n  angular\n    .module('bdApp')\n    .service('jsonData', jsonData);\n\n  jsonData.$inject = ['$http','$filter', '$timeout'];\n  function jsonData ($http, $filter, $timeout) {\n\t  \n\t\tdata = {};\n\t\t$timeout\n\t\tsetupJsonData = function(key){\n\t\t\t$http.get('/data/'+key+'.json').then(function(response){\n\t\t\t\tdata[key] = response.data;\n\t\t\t});\n\t\t}\n\t\t\n\t\tjsonDataKeys = [\n\t\t\t'jeansList',\n\t\t\t'profile',\n\t\t\t'styles',\n\t\t\t'threads',\n\t\t\t'buttons',\n\t\t\t'fabrics',\n\t\t\t'genders',\n\t\t\t'tailors'\n\t\t];\n\n\t\tfor (d = 0; d < jsonDataKeys.length; d++) { \n\t\t\tsetupJsonData(jsonDataKeys[d]);\n\t\t}\t\t\t\n\n\t\tvar styleByGender = function(gender){\n\t\t\treturn function(style){\n\t\t\t\treturn style[\"images_\"+gender];\n\t\t  }\n\t\t};\n\t\t\n\t\tvar jeanKeyToDataKey = function(jeanKey){\n\t\t\tvar dataKey = false;\n\t\t\t\n\t\t\tswitch(true){\n\t\t\t\tcase jeanKey.indexOf('thread') > -1:\n\t\t\t\tdataKey = \"threads\";\n\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t\tcase (jeanKey == \"gender\" || jeanKey == \"style\" ||  jeanKey == \"fabric\"):\n\t\t\t\tdataKey = jeanKey+\"s\";\n\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t}\n\t\t\treturn  dataKey;\n\t\t}\n\t\t\t\n\t\t\t\t\n\t\tvar dataLookup = function(jeanKey, id, attr){\n\n\t\t\tattr = attr||null;\n\t\t\t\n\t\t\tif (typeof jeanKey == 'undefined' || typeof id == 'undefined') return false;\n\t\t\tvar dataKey = jeanKeyToDataKey(jeanKey);\n\t\t\tvar dataSet = data[dataKey];\n\t\t\t//console.log(\"dataSetVV\");\n\t\t\t//console.log(dataSet);\n\t\t\tdataById = \t$filter('filter')(dataSet, {id: id});\n\t\t\tif (typeof dataById == 'undefined') return false; //Return false when dataSet is undefined...\n\t\t\t\n\t\t\tselected = dataById[0];\n\t\t\t\n\t\t\tif (!attr) return selected;\n\t\t\telse return selected[attr];\t\n\t\t\t\n\t\t}\n\n\t\tvar getJeanById = function(id, callback){\n\t\t\tconsole.log(data.jeansList);\n\t\t\tcallback();\n\t\t}\n\n\t  return {\n\t\t  getData:function(){return data;},\n\t\t  jeanKeyToDataKey:jeanKeyToDataKey,\n\t\t\tdataLookup:dataLookup,\n\t\t\tgetJeanById : getJeanById\n\t\t};\n  }\n\n})();*/","\n(function() {\n\n  angular\n    .module('bdApp')\n    .service('loader', ['$rootScope', loader]);\n\n  function loader() {\n\t\t\n\t\tvar loader = {}\n    \n    var loaderDefaults = {\n\t    \"message\":\"\",\n\t    \"type\":\"loading\",\n\t    \"icon\":\"fa-circle-o-notch fa-spin\",\n\t    \"active\":false\n    };\n    \n  \n\t        \n\t\tvar closeAll = function(){\n\t\t\tfor (var pop in pops) {\n\t\t\t  if (pops.hasOwnProperty(pop)) {\n\t\t\t    pops[pop]=false;\n\t\t\t  }\n\t\t\t}\n\t\t}\n    \n    var  show = function(message, type, icon){\n\t    loader.active = true;\n\t    loader.message=message || loaderDefaults.message;\n\t    loader.type = type || loaderDefaults.type;\n\t    loader.icon = icon || loaderDefaults.icon;\n    }\n    \n    var hide = function(){\n\t    loader.active=false;\n    }\n    \n    var get = function(){\n\t    return loader;\n    }\n    \n    return {\n\t    get:get,\n\t    show:show,\n\t    hide:hide\n    }\n  }\n\n})();","(function() {\n\n  angular\n    .module('bdApp')\n    .service('messages', messages);\n\n\t//meanData.$inject = [];\n  function messages() {\n\t\n\t\tvar data = {\n\t\t\tmessage : \"\",\n\t\t\ttype: \"\"\n\t\t};\n\t\t\n\t\tvar set = function(message, type){\n\t\t\tdata.message = message;\n\t\t\tdata.type = type;\n\t\t}\n\t\t\t\n\t\tvar reset = function(){\n\t\t\tdata.message = \"\";\n\t\t\tdata.type = \"\";\t\n\t\t}\n\t\t\n\t\tvar get = function(){\n\t\t\treturn data;\n\t\t}\n\t\t\n    return {\n\t    get:get,\n\t    set:set,\n\t    reset:reset\n    };\n  }\n\n})();","\n(function() {\n\n  angular\n    .module('bdApp')\n    .service('popups', ['$rootScope', popups]);\n\n  function popups($rootScope) {\n\t\t\n    var pops = {};\n        \n\t\tvar closeAll = function(){\n\t\t\tfor (var pop in pops) {\n\t\t\t  if (pops.hasOwnProperty(pop)) {\n\t\t\t    pops[pop]=false;\n\t\t\t  }\n\t\t\t}\n\t\t}\n    \n    var set = function(pop, status){\n\t    if (!pops[pop]){\n\t\t    pops[pop] = true;\n\t\t    $rootScope.$broadcast('popupChange');\n\t    }\n\t    else{\n\t\t  \tvar status = status || pops[pop];\n\t\t\t\tpops[pop] = status;\n\t\t\t}\n    }\n    \n    var get = function(){\n\t    return pops;\n    }\n    \n    return {\n\t    get:get,\n\t    set:set,\n\t    closeAll:closeAll\n    }\n  }\n\n})();","angular.module('bdApp')\n.factory('preloader', preloaderFunc);\n\npreloaderFunc.$inject = ['$q', '$rootScope'];\nfunction preloaderFunc( $q, $rootScope ) {\n  // I manage the preloading of image objects. Accepts an array of image URLs.\n  function Preloader( imageLocations ) {\n      // I am the image SRC values to preload.\n      this.imageLocations = imageLocations;\n      // As the images load, we'll need to keep track of the load/error\n      // counts when announing the progress on the loading.\n      this.imageCount = this.imageLocations.length;\n      this.loadCount = 0;\n      this.errorCount = 0;\n      // I am the possible states that the preloader can be in.\n      this.states = {\n          PENDING: 1,\n          LOADING: 2,\n          RESOLVED: 3,\n          REJECTED: 4\n      };\n      // I keep track of the current state of the preloader.\n      this.state = this.states.PENDING;\n      // When loading the images, a promise will be returned to indicate\n      // when the loading has completed (and / or progressed).\n      this.deferred = $q.defer();\n      this.promise = this.deferred.promise;\n  }\n  // ---\n  // STATIC METHODS.\n  // ---\n  // I reload the given images [Array] and return a promise. The promise\n  // will be resolved with the array of image locations.\n  Preloader.preloadImages = function( imageLocations ) {\n      var preloader = new Preloader( imageLocations );\n      return( preloader.load() );\n  };\n  // ---\n  // INSTANCE METHODS.\n  // ---\n  Preloader.prototype = {\n      // Best practice for \"instnceof\" operator.\n      constructor: Preloader,\n      // ---\n      // PUBLIC METHODS.\n      // ---\n      // I determine if the preloader has started loading images yet.\n      isInitiated: function isInitiated() {\n          return( this.state !== this.states.PENDING );\n      },\n      // I determine if the preloader has failed to load all of the images.\n      isRejected: function isRejected() {\n          return( this.state === this.states.REJECTED );\n      },\n      // I determine if the preloader has successfully loaded all of the images.\n      isResolved: function isResolved() {\n          return( this.state === this.states.RESOLVED );\n      },\n      // I initiate the preload of the images. Returns a promise.\n      load: function load() {\n          // If the images are already loading, return the existing promise.\n          if ( this.isInitiated() ) {\n              return( this.promise );\n          }\n          this.state = this.states.LOADING;\n          for ( var i = 0 ; i < this.imageCount ; i++ ) {\n              this.loadImageLocation( this.imageLocations[ i ] );\n          }\n          // Return the deferred promise for the load event.\n          return( this.promise );\n      },\n      // ---\n      // PRIVATE METHODS.\n      // ---\n      // I handle the load-failure of the given image location.\n      handleImageError: function handleImageError( imageLocation ) {\n          this.errorCount++;\n          // If the preload action has already failed, ignore further action.\n          if ( this.isRejected() ) {\n              return;\n          }\n          this.state = this.states.REJECTED;\n          this.deferred.reject( imageLocation );\n      },\n      // I handle the load-success of the given image location.\n      handleImageLoad: function handleImageLoad( imageLocation ) {\n          this.loadCount++;\n          // If the preload action has already failed, ignore further action.\n          if ( this.isRejected() ) {\n              return;\n          }\n          // Notify the progress of the overall deferred. This is different\n          // than Resolving the deferred - you can call notify many times\n          // before the ultimate resolution (or rejection) of the deferred.\n          this.deferred.notify({\n              percent: Math.ceil( this.loadCount / this.imageCount * 100 ),\n              imageLocation: imageLocation\n          });\n          // If all of the images have loaded, we can resolve the deferred\n          // value that we returned to the calling context.\n          if ( this.loadCount === this.imageCount ) {\n              this.state = this.states.RESOLVED;\n              this.deferred.resolve( this.imageLocations );\n          }\n      },\n      // I load the given image location and then wire the load / error\n      // events back into the preloader instance.\n      // --\n      // NOTE: The load/error events trigger a $digest.\n      loadImageLocation: function loadImageLocation( imageLocation ) {\n          var preloader = this;\n          // When it comes to creating the image object, it is critical that\n          // we bind the event handlers BEFORE we actually set the image\n          // source. Failure to do so will prevent the events from proper\n          // triggering in some browsers.\n          // --\n          // The below removes a dependency on jQuery, based on a comment\n          // on Ben Nadel's original blog by user Adriaan:\n          // http://www.bennadel.com/members/11887-adriaan.htm\n          var image = angular.element( new Image() )\n              .bind('load', function( event ) {\n                  // Since the load event is asynchronous, we have to\n                  // tell AngularJS that something changed.\n                  $rootScope.$apply(\n                      function() {\n                          preloader.handleImageLoad( event.target.src );\n                          // Clean up object reference to help with the\n                          // garbage collection in the closure.\n                          preloader = image = event = null;\n                      }\n                  );\n              })\n              .bind('error', function( event ) {\n                  // Since the load event is asynchronous, we have to\n                  // tell AngularJS that something changed.\n                  $rootScope.$apply(\n                      function() {\n                          preloader.handleImageError( event.target.src );\n                          // Clean up object reference to help with the\n                          // garbage collection in the closure.\n                          preloader = image = event = null;\n                      }\n                  );\n              })\n              .attr( 'src', imageLocation )\n          ;\n      }\n  };\n  // Return the factory instance.\n  return( Preloader );\n};","\n(function() {\n\n  angular\n    .module('bdApp')\n    .service('user', user);\n\t\t\n\tuser.$inject = ['api'];\n  function user(api) {\n\t  \n\t  var user = {isLoggedIn:false};\n\t  \n\t\tvar set = function(key, data){\n      user[key] = data; \n      return user;\n    };\n\t\t\t\t\n\t\tvar login = function(email, password){\n\t\t\tapi.call(\"login\", [email,password], function(data){\n\t\t\t\tset(\"username\", \"cplefevre\");\n\t\t\t\tset(\"isLoggedIn\", true);\n\t\t\t});\n\t\t}\n\t  \n\t  return {\n      get:function(){ return user;},\n      set: set,\n      login:login\n    };\n    \n  }\n\n})();","","(function () {\n\n  angular\n    .module('bdApp')\n    .controller('addressChoiceCtrl', addressChoiceCtrl);\n\n  addressChoiceCtrl.$inject = ['$scope', '$filter', 'bdAPI', 'messages'];\n  \n  function addressChoiceCtrl($scope, $filter, bdAPI, messages) {\n\t  /*\n\t\t*\n\t\t* This controller is designed to be a child of closet.controller. It refernces $scope.$scope.user throughout and needs to inherit $scope.user from a parent\n\t\t*\n\t\t*/\n\t  \n\t  $scope.editing=false;\n\t  $scope.active=false;\n\t\t$scope.addForm = {};\n\t\t$scope.model = {};\n\t\t\n\t\tvar addFormFields = ['addressLine1','addressLine2','city','state','zip'];\n\t\t\n\t\t\n\t\t//Choose Primary Address\n\t\t$scope.choosePrimary = function(index){\n\t\t\tfor (a = 0; a< $scope.user.address.length; a++){\n\t\t\t\t$scope.user.address[a].primary = (a == index ? true :false);\n\t\t\t}\n\t\t\tbdAPI.saveUser($scope.user).then(\n\t\t\t\tfunction(result){\n\t\t\t\t\tconsole.log('saved');\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\n\t\t\n\t\t$scope.startEditing = function(){\n\t\t\t//Bring Primary address to the top\n\t\t\t$scope.user.address = $filter('orderBy')($scope.user.address, '-primary');\n\t\t\t$scope.editing = true;\n\t\t}\n\t\t\n\t\t$scope.stopEditing = function(){\n\t\t\t$scope.editing = false;\n\t\t}\n\n\n\n\t\t$scope.editAdd = {};\n\t\t\n\t\t//Open Address Form\n\t\t$scope.open = function(index){\n\n\t\t\t$scope.active = true;\n\t\t\tif (!$scope.user.address) $scope.user.address = [];\n\t\t\t//New Address\n\t\t\tif (typeof index === 'undefined'){\n\t\t\t\t$scope.model = {};\n\t\t\t\t$scope.editAdd.index = $scope.user.address.push($scope.model) -1;\n\t\t\t\t$scope.editAdd.data = null;\t\n\t\t\t}\n\t\t\t\n\t\t\t//Editing Existing...\n\t\t\telse{\n\t\t\t\t$scope.model = $scope.user.address[index];\n\t\t\t\t$scope.editAdd.index = index;\n\t\t\t\t$scope.editAdd.data =  angular.copy($scope.model);\n\t\t\t}\n\t\t\t\t\t\t\n\t\t}\n\t\t\n\n\t\tfunction resetForm(close){\n\t\t\tclose = close || true;\n\t\t\t$scope.editAdd = {};\n\t\t\t$scope.model = {};\n\t\t\tif (close) $scope.active = false;\n\t\t}\n\t\t\n\t\tfunction removeAddress(index){\n\t\t\t$scope.user.address.splice(index, 1);\n\t\t}\n\t\n\t\t\n\t\t//Clear Address Form\n\t\t$scope.clear = function(){\n\t\t\tvar dataObj = $scope.editAdd.data;\n\t\t\tif (dataObj == null) removeAddress($scope.editAdd.index);//Remove Address\n\t\t\telse $scope.user.address[$scope.editAdd.index] = $scope.editAdd.data;//Reset Address\n\t\t\tresetForm();\t\t\t\n\t\t}\n\t\t\n\t\t\n\t\t//Remove Address and save user\n\t\t$scope.remove = function(index){\n\t\t\t\n\t\t\tif ($scope.user.address.length < 2){\n\t\t\t\tmessages.set(\"You can't remove your last address\", \"error\");\n\t\t\t\treturn false;\t\n\t\t\t}\n\t\t\t\n\t\t\tvar wasPrimary = $scope.user.address[index].primary;\t\n\t\t\tremoveAddress(index);\n\t\t\tif(wasPrimary) $scope.choosePrimary(0);\n\t\t\tbdAPI.saveUser($scope.user);\n\t\t}\n\t\t\n\t\t//Save Form\n\t\t$scope.save = function(){\n\t\t \tvar primary = $scope.user.address.filter(function(add){\n\t\t\t\treturn add.primary == true;\n \t\t\t});\n \t\t\tif (!primary.length) $scope.user.address[0].primary=true;\n \t\t\t\t\n\t\t\tbdAPI.saveUser($scope.user).then(\n\t\t\t\tfunction(result){\n\t\t\t\t\t$scope.newAdd = null;\n\t\t\t\t\t$scope.active = false;\n\t\t\t\t\t$scope.model = {};\n\t\t\t\t\t$scope.$apply();\n\t\t\t\t}\n\t\t\t);\n\t\t\t\n\t\t\t\n\t\t}\n\t\t\n\t\t\n\t\t//US States\n\t\t$scope.states = [\n\t\t\t{\n\t\t\t  \"name\": \"Alabama\",\n\t\t\t  \"abbreviation\": \"AL\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Alaska\",\n\t\t\t  \"abbreviation\": \"AK\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Arizona\",\n\t\t\t  \"abbreviation\": \"AZ\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Arkansas\",\n\t\t\t  \"abbreviation\": \"AR\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"California\",\n\t\t\t  \"abbreviation\": \"CA\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Colorado\",\n\t\t\t  \"abbreviation\": \"CO\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Connecticut\",\n\t\t\t  \"abbreviation\": \"CT\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Delaware\",\n\t\t\t  \"abbreviation\": \"DE\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"District Of Columbia\",\n\t\t\t  \"abbreviation\": \"DC\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Florida\",\n\t\t\t  \"abbreviation\": \"FL\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Georgia\",\n\t\t\t  \"abbreviation\": \"GA\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Hawaii\",\n\t\t\t  \"abbreviation\": \"HI\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Idaho\",\n\t\t\t  \"abbreviation\": \"ID\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Illinois\",\n\t\t\t  \"abbreviation\": \"IL\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Indiana\",\n\t\t\t  \"abbreviation\": \"IN\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Iowa\",\n\t\t\t  \"abbreviation\": \"IA\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Kansas\",\n\t\t\t  \"abbreviation\": \"KS\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Kentucky\",\n\t\t\t  \"abbreviation\": \"KY\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Louisiana\",\n\t\t\t  \"abbreviation\": \"LA\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Maine\",\n\t\t\t  \"abbreviation\": \"ME\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Maryland\",\n\t\t\t  \"abbreviation\": \"MD\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Massachusetts\",\n\t\t\t  \"abbreviation\": \"MA\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Michigan\",\n\t\t\t  \"abbreviation\": \"MI\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Minnesota\",\n\t\t\t  \"abbreviation\": \"MN\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Mississippi\",\n\t\t\t  \"abbreviation\": \"MS\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Missouri\",\n\t\t\t  \"abbreviation\": \"MO\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Montana\",\n\t\t\t  \"abbreviation\": \"MT\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Nebraska\",\n\t\t\t  \"abbreviation\": \"NE\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Nevada\",\n\t\t\t  \"abbreviation\": \"NV\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"New Hampshire\",\n\t\t\t  \"abbreviation\": \"NH\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"New Jersey\",\n\t\t\t  \"abbreviation\": \"NJ\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"New Mexico\",\n\t\t\t  \"abbreviation\": \"NM\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"New York\",\n\t\t\t  \"abbreviation\": \"NY\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"North Carolina\",\n\t\t\t  \"abbreviation\": \"NC\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"North Dakota\",\n\t\t\t  \"abbreviation\": \"ND\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Ohio\",\n\t\t\t  \"abbreviation\": \"OH\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Oklahoma\",\n\t\t\t  \"abbreviation\": \"OK\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Oregon\",\n\t\t\t  \"abbreviation\": \"OR\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Pennsylvania\",\n\t\t\t  \"abbreviation\": \"PA\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Rhode Island\",\n\t\t\t  \"abbreviation\": \"RI\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"South Carolina\",\n\t\t\t  \"abbreviation\": \"SC\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"South Dakota\",\n\t\t\t  \"abbreviation\": \"SD\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Tennessee\",\n\t\t\t  \"abbreviation\": \"TN\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Texas\",\n\t\t\t  \"abbreviation\": \"TX\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Utah\",\n\t\t\t  \"abbreviation\": \"UT\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Vermont\",\n\t\t\t  \"abbreviation\": \"VT\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Virginia\",\n\t\t\t  \"abbreviation\": \"VA\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Washington\",\n\t\t\t  \"abbreviation\": \"WA\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"West Virginia\",\n\t\t\t  \"abbreviation\": \"WV\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Wisconsin\",\n\t\t\t  \"abbreviation\": \"WI\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Wyoming\",\n\t\t\t  \"abbreviation\": \"WY\"\n\t\t\t}\n\t\t];\n    \n\t\t\n\t\t\t  \n\t}\n\t\n})();\n\t\t","(function () {\n\n  angular\n    .module('bdApp')\n    .directive('addressChoice', addressChoice);\n\t\t\n\n\t\n  function addressChoice () {\n    return {\n      restrict: 'AE',\n      templateUrl: '/directives/address-choice/address-choice.template.html',\n      controller: 'addressChoiceCtrl as adcvm',\n      scope : {\n\t\t\t\tuser : '='\n      }\n    };\n    \n  }\n  \n    \n  \n  \n\n})();","(function () {\n\n  angular\n    .module('bdApp')\n    .controller('chooserCtrl', chooserCtrl)\n\t\n\t\tchooserCtrl.$inject = ['$scope', '$element','$timeout', '$window', 'jean', 'popups'];\n\n\t\t\n\t\tfunction chooserCtrl($scope, $element, $timeout, $window, jean, popups) {\n\t\n\t\t\tvar chvm = this;\n\t\t\t\n\t\t\t//popups\n\t\t\tchvm.popups = popups.get();\n\t\t\tchvm.jeanData = jean.get();\n\t\t\tchvm.breakPoint = 800;\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\tfunction scrollToLeft(el, scrollTo, scrollDuration) {\n\t\t\t\t//Select First Element\n\t\t\t\tel = el[0];\n\t\t\t\t//Center Scroll To\n\t\t\t\tscrollTo = scrollTo-(el.offsetWidth/2)+40;\n\t\t\t\t\n\t\t\t\tvar maxLeft = el.scrollWidth - el.offsetWidth;\n\t\t\t\t\n\t\t\t\tif (scrollTo >= maxLeft) scrollTo = maxLeft-1;\n\t\t\t\tif (scrollTo == maxLeft) scrollTo = maxLeft-1;\n\t\t\t\tvar stepNum = Math.ceil(scrollDuration / 15),\n\t\t\t\t\t\tdistance = scrollTo - el.scrollLeft,\n\t\t\t\t\t\tscrollStep = (distance / stepNum),\n\t\t\t\t\t\tscrollTest = (el.scrollLeft < scrollTo ? function(a,b){return a<=b-1;} : function(a,b){return a>=b+1;} );\t\t\n\t\t\t\t/*\n\n\t\t\t\tconsole.log(\"current Scoll pos: \"+el.scrollLeft);\n\t\t\t\tconsole.log(\"Scroll to \"+scrollTo);\n\t\t\t\tconsole.log(\"distance to go \"+distance);\n\t\t\t\tconsole.log(scrollStep);\n\t\t\t\tconsole.log(\"func: \"+scrollTest)\n\t\t\t\tconsole.log(\"eval\");\n\t\t\t\tconsole.log(scrollTest(el.scrollLeft, scrollTo ));\n\t\t\t\tconsole.log(\"done\");\n\t\t\t\t*/\n\t\t\t\t\t\t\n\t\t\t\tvar scrollInterval = setInterval(function(){    \n\t\t\t\t\n\t\t\t\t\tif(scrollTest(el.scrollLeft, scrollTo )){\n\t\t\t\t\t\tvar newScroll = el.scrollLeft+scrollStep;\n\t\t\t\t\t\tif (newScroll >= maxLeft) newScroll = maxLeft-1;\n\t\t\t\t\t\tel.scrollLeft = newScroll;\n\t\t\t\t\t\t\n\t\t\t\t\t\t/*\n\t\t\t\t\t\tconsole.log(newScroll);\n\t\t\t\t\t\tconsole.log(scrollTo);\n\t\t\t\t\t\t*/\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\telse clearInterval(scrollInterval); \n\t\t      \n\t  \t\t},15);\n\t\t\t  \n\t\t\t}\n\n\t\t\tchvm.selectorCoords = {\"top\":0, \"left\":0};\n\t\t\t\n\t\t\t\n\t\t\t//Center Selector on chooser change... Center on selected attr if edting preexisting jean...\n\t\t\t$scope.$watch('active', function(newValue,oldValue) {\t\n\t\t\t\t\n\t\t\t\t//Only on active choosers...\n\t\t\t\tif (newValue == true){\n\n\t\t\t\t\t$timeout(function(){\n\t\t\t\t\t\t\n\t\t\t\t\t\t//Get the data id \n\t\t\t\t\t\tvar dataId = chvm.jeanData[$scope.step.jeanKey];\n\t\t\t\t\t\n\t\t\t\t\t\t//Make sure this isn't an embedded model\n\t\t\t\t\t\tif (typeof(dataId)== 'object') dataId = dataId[$scope.step.dataKey+\"Id\"];\n\t\t\t\t\t\t\n\t\t\t\t\t\tvar elementId = $scope.step.jeanKey+\"_\"+dataId;\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t\t\tvar activeElement = angular.element(document.querySelector('#'+elementId));\n\t\t\t\t\t\t\n\t\t\t\t\t\tchvm.selectorCoords.top = activeElement.prop('offsetTop');\n\t\t\t\t\t\tchvm.selectorCoords.left = activeElement.prop('offsetLeft');\n\t\t\t\t\t\t\t\n\t\t\t\t\t\tvar selector = angular.element(document.querySelector(\"#\"+$scope.step.jeanKey+\"-selector\"));\n\t\t\t\t\t\tselector.css({'top':chvm.selectorCoords.top+'px', 'left':chvm.selectorCoords.left+'px'});\n\t\t\t\t\t\t\n\t\t\t\t\t\t//Mobile Choosers\n\t\t\t\t\t\tif ($window.innerWidth < chvm.breakPoint){\n\t\t\t\t\t\t\tvar chooser = angular.element($element[0].querySelector('.chooser-grid'));\t\n\t\t\t\t\t\t\tvar left = (chooser[0] ? chvm.selectorCoords.left-(chooser[0].offsetWidth/2)+40 : 0);\n\t\t\t\t\t\t\tchooser.prop('scrollLeft', left);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t//Desktop Choosers\n\t\t\t\t\t\telse{\t\t\t\t\t\t\n\t\t\t\t\t\t\tvar chooser = angular.element($element[0]);\t\n\t\t\t\t\t\t\tchooser.prop('scrollTop', chvm.selectorCoords.top - 15);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t}, 200);\n\t\t\t\t\t\n\t\t\t\t}\t\t\n\t\t\t\t\n    \t});\n\n\n\t\t\tchvm.selectAttr = function($event, id, attr, selector){\n\t\t\t\tvar chooser = angular.element(document.querySelector(\"#\"+attr+\"-chooser\"));\n\t\t\t\tvar selector = angular.element(document.querySelector(\"#\"+attr+\"-selector\"));\n\t\t\t\tvar top = angular.element($event.target).prop('offsetTop');\n\t\t\t\tvar left = angular.element($event.target).prop('offsetLeft');\n\t\t\t\tvar text = angular.element(document.querySelectorAll('#item-title'));\n\t\t\t\t\n\t\t\t\ttext.css({'right':'-400px', 'opacity':0});\n\t\t\t\tselector.css({'top':top+'px', 'left':left+'px'});\n\t\t\t\t\n\t\t\t\tchvm.selectorCoords = {\"top\":top,\"left\":left};\n\t\t\t\t\n\t\t\t\tif ($window.innerWidth < chvm.breakPoint) scrollToLeft(chooser, left, 200);\n\t\t\t\t\n\t\t\t\t$timeout(function(){\n\t\t\t\t\ttext.css({'right':'15px', 'opacity':1});\t\t\t\t\n\t\t\t\t\tchvm.jeanData[attr] =\tid;\t\n\t\t\t\t}, 200);\n\t\t\t\n\t\t\t}\n\t\t\t\n\t\t\tchvm.jeanSet = function(attr, val){\n\t\t\t\tchvm.jeanData[attr] =\tval;\n\t\t\t}\n\t\t\n\t\t}\t\n\t\t\t\n})();","(function () {\n\n  angular\n    .module('bdApp')\n    .directive('chooser', chooser);\n\t\t\n  function chooser () {\n    return {\n      restrict: 'EA',\n      templateUrl: '/directives/choosers/chooser.template.html',\n      controller: 'chooserCtrl as chvm',\n      scope : {\n        step : '=',\n        dataset: '=',\n        active: '='\n      }\n    };\n  }\n\n})();","(function () {\n\n  angular\n    .module('bdApp')\n    .directive('fabricChooser', ['$window', function($window) {\n    \t\n\t\t\treturn {\n\t    \t\n\t      restrict: 'EA',\n\t      template: '<div class=\"fabric-chooser-container\" ng-include=\"viewUrl\"></div>',\n\t      controller: 'chooserCtrl as chvm',\n\t      scope : {\n\t        step : '=',\n\t        dataset: '=',\n\t\t\t\t\tactive: '='\n\t      },\n\t      \n\t      link: function($scope){\n\t\t      \n\t\t      $scope.breakPoint = 800;\n\t\t      \n\t\t      //Template on window resize\n\t\t      $window.onresize = function() {\n\t          changeTemplate();\n\t          $scope.$apply();\n\t        };\n\t        \n\t        changeTemplate();\n\t            \n\t        function changeTemplate() {\n\t          var screenWidth = $window.innerWidth;\n\t          if (screenWidth < $scope.breakPoint) {\n\t            $scope.viewUrl = \"/directives/choosers/fabric-chooser.template-mobile.html\";\n\t          } else if (screenWidth >= $scope.breakPoint) {\n\t            $scope.viewUrl = \"/directives/choosers/fabric-chooser.template-desk.html\";\n\t          }\n\t        }\n\t\t      \n\t\t      \n\t\t      function positionChooser(){\n\t\t\t    \t//element.animate({scrollLeft: element.offset().left - 50}, \"slow\");\n\t\t\t    \t//var selector = angular.element(document.querySelector(\"#\"+attr+\"-selector\"));  \n\t\t      }\n\t\t      \n\t\t      \n\t\t      //Weight Filter\n\t\t      $scope.weightFilter = function(min, max){\n\t\t\t\t\t\treturn function(fabric){\n\t\t\t\t\t\t\tif (min && fabric.weight < min) return false;\n\t\t\t\t\t\t\tif (max && fabric.weight > max) return false;\n\t\t\t\t\t    return true;\n\t\t\t\t\t  }\n\t\t\t\t\t};\n\t      }\n\t      \n\t   };\n    \n    \n  }]);\n\n})();","(function () {\n\n  angular\n    .module('bdApp')\n    .directive('genderChooser', genderChooser);\n\t\t\n  function genderChooser () {\n    return {\n      restrict: 'EA',\n      templateUrl: '/directives/choosers/gender-chooser.template.html',\n      controller: 'chooserCtrl as chvm',\n      scope : {\n        step : '=',\n        dataset: '=',\n        active: '='\n      }\n    };\n  }\n\n})();","(function () {\n\n  angular\n    .module('bdApp')\n    .directive('styleChooser', styleChooser);\n\t\t\n  function styleChooser () {\n    return {\n      restrict: 'EA',\n      templateUrl: '/directives/choosers/style-chooser.template.html',\n      controller: 'chooserCtrl as chvm',\n      scope : {\n        step : '=',\n        dataset: '=',\n        active: '='\n      },\n      link: function($scope){\n\t      //Weight Filter\n\t      $scope.checkGenderFilter = function(gender){\n\t\t\t\t\treturn function(style){\n\t\t\t\t\t\treturn (style['images_'+gender] ? true:false);\n\t\t\t\t  }\n\t\t\t\t};\n\t    }\n     \n\n    };\n  }\n\n})();","(function () {\n\n  angular\n    .module('bdApp')\n    .controller('istackCtrl', istackCtrl);\n\n  istackCtrl.$inject = ['$window', '$scope', '$q', 'jean'];\n  \n  \n  \n  function istackCtrl($window, $scope, $q, jean) {\n\t  var isvm = this;\n\n\t\tisvm.centerPan = false;\t\t\n\t\tisvm.zoom = false;\n\t\tisvm.pan = {\"x\":50, \"y\":30};\n\t\tisvm.isMobile = function(){ return $window.innerWidth<800 };\n\t\t\n\t\t\n\t\tisvm.toggleZoom = function(){\n\t\t\tisvm.zoom = !isvm.zoom\n\t\t}\n\t\t\n\t\tisvm.touchEnd = function(){\n\t\t\tisvm.dragTracker = {\"x\":0,\"y\":0};\n\t\t\t$scope.$apply();\n\t\t}\n\t\t\n\t\tisvm.returnPan = function(){\n\t\t\tif (isvm.isMobile()) return false;\n\t\t\tisvm.pan = \"50% 30% 0\";\t\n\t\t\tisvm.centerPan = true;\n\t\t\timages = angular.element(document.querySelectorAll(\"#zoom-frame img\"));\n\t\t\tsetTimeout(function(){\n\t\t\t\timages.css({\"transform-origin\":isvm.pan});\n\t\t\t}, 200);\n\t\t}\n\t\t\t\t\n\t\tisvm.touchStart= function(e){\t\n\t\t\t//Setup Swipe starting point\n\t\t\tisvm.swipeStart={\"x\":e.touches[0].clientX,\"y\":e.touches[0].clientY};\n\t\t\t//Clear out Swipe Object\n\t\t\tisvm.swipe={};\n\t\t}\n\t\t\n\t\tisvm.zoomDrag = {\"x\":0,\"y\":0};\n\t  isvm.dragTracker = {\"x\":0,\"y\":0};\n\t\t\n\t\tisvm.touchMove= function(e){\n\t\t\t\n\t\t\tvar images = angular.element(document.querySelectorAll(\"#zoom-frame img\"));\n\t\t\t//Only Drag on mobile\n\t\t\tif (!isvm.isMobile()) return false;\n\t\t\t//Only run function if we're zoomed in\n\t\t\tif (!isvm.zoom) return false;\n\t\t\t//Prevent Scrolling?\n\t\t\te.preventDefault();\n\t\t\t\n\n\t\t\tvar touch = e.touches[0],\n\t\t\ttarget = touch.target,\n\t\t\tdrag = {\n\t\t\t\t\"x\" : touch.clientX-isvm.swipeStart.x,\n\t\t\t\t\"y\" : touch.clientY-isvm.swipeStart.y\n\t\t\t};\n\t\t\t\n\t\t\t//Subtract previous returns of this drag length to get the amount dragged since last return\t\n\t\t\tvar x = drag.x-isvm.dragTracker.x,\n\t\t\ty = drag.y-isvm.dragTracker.y;\n\t\t\n\t\t\t//Get drag % of container for Transform Origin Only \n\t\t\tvar x = (x/target.clientWidth*100)+isvm.zoomDrag.x,      \n\t\t\ty = (y/target.clientHeight*100)+isvm.zoomDrag.y;\n\n\t\t\t//Set up max bounds\n\t\t\tvar bounds={\"y\":{},\"x\":{}}; \n\t\t\tbounds.y.top    = 60;\n\t\t\tbounds.y.bottom = -90;\n\t\t\tbounds.x.left   = -120;\n\t\t\tbounds.x.right  = 90;\n\t\t\t\n\t\t\t//Apply Bounds\t\n\t\t\tif (y>bounds.y.top) y = bounds.y.top;\n\t\t\tif (y<bounds.y.bottom) y = bounds.y.bottom;\n\t\t\tif (x<bounds.x.left) x = bounds.x.left;\n\t\t\tif (x>bounds.x.right) x = bounds.x.right;\n\t\t\t\n\t\t\t//Build Move Objext\t\t\n\t\t\tvar move = {\"x\":x,\"y\":y};\n\t\t\tisvm.zoomDrag = move;\t \t       \n\t        \n\t\t\t//Alter transform origin\n\t\t\tvar pan = -x + \"% \" + -y + \"% 0\";\n\t\t\timages.css({\"transform-origin\":pan});\n\n\t\t\tisvm.dragTracker = drag;\t\n\t\t\t$scope.$apply();\n\n\t\t}\n\t\t\n\n\n\n\t\tisvm.dragPan = function(u, event) {\n\t\t\n\t\t\tconsole.log(event.direction);\n\t\t\t\n\t\t\t\n\t\t\t//Only Drag on mobile\n\t\t\tif (!isvm.isMobile()) return false;\n\t\t\t\n\t\t\t//Only run function if we're zoomed in\n\t\t\tif (!isvm.zoom) return false;\n\t\t\t\n\t\t\tvar images = angular.element(document.querySelectorAll(\"#zoom-frame img\")),\n\t\t\twindowHeight = window.innerHeight,\n\t\t\torigHeight = images[0].height,\n\t\t\tnewHeight = origHeight*1.7,\n\t\t\tframe={\n\t\t\t\t\"width\":event.target.clientWidth,\n\t\t\t\t\"height\":event.target.clientHeight\n\t\t\t};\n\t\t\t\n\n\t\t\t//Get drag length\n\t\t\tvar drag = {\n\t\t\t\t\"x\" : event.deltaX,\n\t\t\t\t\"y\" : event.deltaY\n\t\t\t}\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t//Subtract previous returns of this drag length to get the amount dragged since last return\t\n\t\t\tvar x = drag.x-isvm.dragTracker.x,\n\t\t\ty = drag.y-isvm.dragTracker.y;\n\n\t\t\tconsole.log(x,y);\n\t\t\t\n\t\t\t//Get drag % of container for Transform Origin Only \n\t\t\tvar x = Math.abs(x)/frame.width*100;      \n\t\t\tx = (drag.x<0)?-x:x;\t       \n\t\t\tvar y = Math.abs(y)/frame.height*100;\n\t\t\ty = (drag.y<0)?-y:y;\n\t\t\t\n\t\t\t//Add these values to the last drag. This essentially allows drag and drop\n\t\t\tx=x+isvm.zoomDrag.x;\n\t\t\ty=y+isvm.zoomDrag.y;\n\t\t\t\t \n\t\t\t//Set up max bounds\n\t\t\tvar bounds={\"y\":{},\"x\":{}}; \n\n\t\t\t/*//Left/Right Bounds\n\t\t\tbounds.y.top =(newHeight/2)+175;\n\t\t\tbounds.y.bottom =-(newHeight*.225);\n\t\t\tbounds.x.left = -(event.target.clientWidth-(event.target.clientWidth*.05));\n\t\t\tbounds.x.right = event.target.clientWidth-(event.target.clientWidth*.05);*/\n\t\t\t\t\n\t\t\t//Transform Origin Bounds\n\t\t\tbounds.y.top    = 60;\n\t\t\tbounds.y.bottom = -90;\n\t\t\tbounds.x.left   = -150;\n\t\t\tbounds.x.right  = 60;\n\t\t\t\t\n\t\t\tif (y>bounds.y.top) y = bounds.y.top;\n\t\t\tif (y<bounds.y.bottom) y = bounds.y.bottom;\n\t\t\tif (x<bounds.x.left) x = bounds.x.left;\n\t\t\tif (x>bounds.x.right) x = bounds.x.right;\n\t\t\t\n\t\t\t//Build Move Objext\t\t\n\t\t\tvar move = {\"x\":x,\"y\":y}\n\t\t\t\n\t\t\tconsole.log(move);\n\t\t\t//Register Drag\n\t\t\tisvm.zoomDrag = move;\t \t       \n\t        \n\t       \n\t\t\t//Alter transform origin\n\t\t\tvar pan = -x + \"% \" + -y + \"% 0\";\n\t\t\timages.css({\"transform-origin\":pan});\n\n\t\t\t/*//Alter Left/Bottom\n\t\t\timages.css('left', move.x+\"px\");\n\t\t\timages.css('bottom', -move.y+\"px\");*/\n\t\t\t\n\t\t\t//When drag is over, reset drag tracker\t \n\t\t\tisvm.dragTracker = event.isFinal ? {\"x\":0,\"y\":0} : drag;\n\t\t\t\t \n\n\t\t}\n\t\t\n\n\t\t\n\n\t\t\n\n\t\tisvm.scanImage = function(x,y){\n\n\t\t\tsetTimeout(function(){\n\t\t\t\tisvm.centerPan = false;\n\t\t\t}, 200);\n\t\t\t\n\t\t\t\n\t\t\tframe = angular.element(document.querySelector(\"#zoom-frame\"))[0];\n\t\t\tfWidth = frame.clientWidth;\n\t\t\tfHeight = frame.clientHeight;\n\t\t\trect = frame.getBoundingClientRect();\n\t\t\trootDoc = frame.ownerDocument.documentElement;\n\t\t\t\t//calculate the offset of the frame from the top and left of the document\n\t\t\toffsetT = rect.top + $window.pageYOffset - rootDoc.clientTop\n\t\t\toffsetL = rect.left + $window.pageXOffset - rootDoc.clientLeft\n\n\t\t\t//calculate current cursor position inside the frame, as a percentage\n\t\t\txPosition = ((x - offsetL) / fWidth) * 100\n\t\t\tyPosition = ((y - offsetT) / fHeight) * 100\n\t\t\t\n\t\t\t\n\t\t\t/*\n\t\t\tconsole.log(x,y);\n\t\t\tconsole.log(fWidth);\n\t\t\tconsole.log(offsetL);\n\t\t\tconsole.log(x-offsetL);\n\t\t\tconsole.log(xPosition, yPosition);\n\t\t\t*/\n\t\t\tif ($window.innerWidth < isvm.breakPoint) pan = (100-xPosition) + \"% \" + (100-yPosition) + \"% 0\";\n\t\t\telse pan = (xPosition) + \"% \" + (yPosition) + \"% 0\";\n\t\t\tisvm.pan=pan;\n\t\t\timages = angular.element(document.querySelectorAll(\"#zoom-frame img\"));\n\t\t\timages.css({\"transform-origin\":pan});\n\t\t}\n\t\t\n\t\tisvm.trackMouse = function($event){\n\t\t\t//if (isvm.isMobile()) return false;\n\t\t\tisvm.scanImage($event.pageX,$event.pageY);\n\t\t}\n\n\t\t\t\n  }\n\n})();","(function () {\n\n  angular\n    .module('bdApp')\n    .directive('imageStack', imageStack);\n\t\t\n\n\t\n  function imageStack () {\n    return {\n      restrict: 'AE',\n      templateUrl: '/directives/image-stack/image-stack.template.html',\n      controller: 'istackCtrl as isvm',\n      scope : {\n        jeanData : '='\n      },\n      link: function(scope, ele, attrs, ctrl) {\n\t      \n\t     \n\t     ele.on('touchstart', function(e){\n\t\t\t \tscope.isvm.touchStart(e);\t\n\t     });\t\n\t     \n\t     ele.on('touchmove', function(e){\n\t\t\t \tscope.isvm.touchMove(e);\t\n\t     });\t\t\n\t     \n\t     ele.on('touchend', function(e){\n\t\t\t \tscope.isvm.touchEnd(e);\t\n\t     });\t\t\t\t\n\t\t\t\n       \n\t      /*\n\t      $swipe.bind(ele, {\n          'move': function(event) {\n\t\t\t\t\t\tscope.isvm.scanImage(coords.x,coords.y);\n          }\n\t      });\n\t     */\n\n\t    }\n    };\n    \n  }\n  \n    \n  \n  \n\n})();","(function () {\n\n  angular\n    .module('bdApp')\n    .directive('jeanCard', jeanCard);\n    \n\t  function jeanCard () {\n\t\t\treturn {\n\t    \t\n\t      restrict: 'EA',\n\t      replace:true,\n\t\t\t\ttemplate: '<ng-include src=\"templatePath\"/>',\n\t      scope : {\n\t        click : '=?',\n\t        data: '=',\n\t      },\n\t      link: function link(scope, element, attrs) {\n\t\t      console.log(attrs);\n\t\t\t\t\tvar slug = attrs.template ? attrs.template : \"jean-card\";\n\t\t      scope.templatePath=\"/directives/jean-card/\"+slug+\".template.html\";\n\t\t\t\t}\n\t  \t} \n\t  }\n  \n    \n\n})();\n/*\n\t      function($scope) {\n\t\t      $scope.getTemplateUrl = function() {\n\t\t\t      return '';\n\t\t      }\n\t\t    }\n\t\t    */","(function () {\n\n  angular\n    .module('bdApp')\n    .directive('jeanList', ['jean', 'jsonData', function(jean, jsonData) {\n    \t\n\t\t\treturn {\n\t    \t\n\t      restrict: 'EA',\n\t\t\t\ttemplateUrl: '/directives/jean-list/jean-list.template.html',\n\t      scope : {\n\t        fields : '=?',\n\t        jean: '=?'\n\t      },\n\t      \n\t      link: function($scope){\n\t\t\t\t\t\n\t\t\t\t\t$scope.dataBank = jsonData;\n\t\t\t\t\t$scope.jean = $scope.jean || jean.get();\n\t\t\t\t\n\t\t\t\t\tvar defaultFields = [\n\t\t\t\t\t\t'fabric',\n\t\t\t\t\t\t'accent_thread',\n\t\t\t\t\t\t'top_thread',\n\t\t\t\t\t\t'bottom_thread',\n\t\t\t\t\t\t'gender',\n\t\t\t\t\t\t'style'\n\t\t\t\t\t];\n\n\t\t\t\t\t$scope.fields = $scope.fields || defaultFields;\n\t\t\t\t\t\n\t\t\t\t\t$scope.dataLookup = function(key, value, field){\n\t\t\t\t\t\tif (typeof(value)==\"object\") return value[field];\n\t\t\t\t\t\tvar data = jsonData[key];\n\t\t\t\t\t\tfor (d=0;d<data.length;d++){\n\t\t\t\t\t\t\tif (data[d].id == value){\n\t\t\t\t\t\t\t\treturn data[d][field];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t};\n\t\t\t\t\t\n\t\t\t\t\t$scope.filterFields = function(data){\n\t\t\t\t\t\tmatches = {};\n\t\t\t\t\t\tfor (var k in data) {\n\t\t        \tif (data.hasOwnProperty(k) && $scope.fields.indexOf(k)>=0) {\n\t\t\t\t\t  \t  matches[k]=data[k];\n\t\t\t\t\t    }\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn matches;\n\t\t\t\t\t}\n\n\t\t   \n\t      }\n\t      \n\t   };\n    \n    \n  }]);\n\n})();","(function () {\n\n  angular\n    .module('bdApp')\n    .controller('loginFormCtrl', loginFormCtrl);\n\n  loginFormCtrl.$inject = ['$location', 'aws', 'messages', '$scope'];\n  \n  function loginFormCtrl($location, aws, messages, $scope) {\n    var logvm = this;\n    \n\t\tlogvm.messages=messages.get();\n\t\t\n\t\tlogvm.credentials = {\n      loginEmail : \"\",\n      loginPassword : \"\"\n    };\n    \n    \n  \tfunction validateEmail(email) {\n\t    var re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n\t    return re.test(email);\n\t\t}\n\t\t\n    /*\n    *\n    * LOGGING IN\n    *\n    */\n    \n    //Log user in and send errors to \"messages\"\n\t\tlogvm.login = function(email, password){\n\t\t\tmessages.reset();\n\t    if (logvm.validateLoginForm()){\n\t\t    console.log('valid');\n\t      aws.authenticateCognitoUser(email,password).then(\n\t\t\t\t\tfunction(result){\n\t\t\t\t\t\tif ($scope.callback) $scope.callback();\n\t\t\t\t\t\tif ($scope.redirect) $location.path($scope.redirect);\n\t\t\t\t\t\tif (!$scope.callback && !$scope.redirect)\t$location.path('/customizer');\n\t\t\t\t\t},\n\t\t\t\t\tfunction(err){\n\t\t\t\t\t\tif (err.message == \"Incorrect username or password.\") err.message = \"Incorrect Email address or password.\"\n\t\t\t\t\t\tmessages.set(err.message,\"error\");\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t  }\n\t\t}\n\t\t\n\t\t//Login form validation\n\t\tlogvm.validateLoginForm = function(){\t\t\t\t\n\t\t\tif(!validateEmail(logvm.credentials.loginEmail)){\n\t\t\t\tmessages.set(\"Please enter a valid Email address\", \"error\");\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif (!logvm.credentials.loginPassword){\n\t\t\t\tmessages.set(\"Please enter a password\", \"error\");\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn true;\t\n\t\t}\n\t\t\n\t\t\n\t\t\n\t\t\n\t\t\n\t\t\n\t\t\n\t\t\n\t\t/*\n\t\t*\n\t\t*  Forgot Password\n\t\t*\n\t\t*/\n\t\t\n\t\t\n\t\tfunction validatePassword(password){\n\t\t\tvar re = /^(?=.*[0-9])(?=.*[!@#$%^&*])[a-zA-Z0-9!@#$%^&*]{6,50}$/;\n\t\t\treturn re.test(password);\n\t\t}\t\t\t\t\n\n\t\tlogvm.forgotPassword = false;\n\t\tlogvm.forgotPassword2 = false;\n\t\t\n\t\t/*\n\t\t*  STEP 1\n\t\t*/\n\t\tlogvm.forgot = function(){\t\n\t\t\tmessages.reset();\n\t    if (logvm.validateForgot()){\n\t\t\t\taws.forgotPassword(logvm.credentials.loginEmail).then(\n\t\t\t\t\tfunction(result){\n\t\t\t\t\t\tlogvm.forgotPassword2 = true;\t\n\t\t\t\t\t},\n\t\t\t\t\tfunction(err){\n\t\t\t\t\t\tif (err.message == \"Username/client id combination not found\"){\n\t\t\t\t\t\t\terr.message = \"We don't have an account registered for that emial\";\n\t\t\t\t\t\t}\n\t\t\t\t\t\tmessages.set(err.message,\"error\");\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t  }\n\t\t}\n\t\t\n\t\t//Forgot password set 1 validation\n\t\tlogvm.validateForgot = function(){\t\t\t\t\n\t\t\tif(!validateEmail(logvm.credentials.loginEmail)){\n\t\t\t\tmessages.set(\"Please enter a valid Email address\", \"error\");\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn true;\t\n\t\t}\n\t\t\n\t\t\n\t\t/*\n\t\t*   STEP 2\n\t\t*/\t\n\t\tlogvm.forgot2 = function(){\n\t\t\tmessages.reset();\n\t    if (logvm.validateForgot2()){\n\t\t\t\taws.setNewPassword(logvm.credentials.loginEmail, logvm.credentials.loginVerifcation, logvm.credentials.newPassword).then(\n\t\t\t\t\tfunction(){\n\t\t\t\t\t\t//Password reset successfully...\n\t\t\t\t\t\tmessages.set(\"Password reset successfully. Try logging in.\", \"success\");\n\t\t\t\t\t\tlogvm.forgotPassword = false;\n\t\t\t\t\t\tlogvm.forgotPassword2 = false;\n\t\t\t\t\t},\n\t\t\t\t\tfunction(err){\n\t\t\t\t\t\tmessages.set(err.message,\"error\");\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t  }\n\t\t}\n\t\t\n\t\t//Forgot password set 1 validation\n\t\tlogvm.validateForgot2 = function(){\t\t\t\t\n\t\t\tif(!validateEmail(logvm.credentials.loginEmail)){\n\t\t\t\tmessages.set(\"Please enter a valid Email address\", \"error\");\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\t\n\t\t\tif (!logvm.credentials.loginVerifcation){\n\t\t\t\tmessages.set(\"Please enter your verifcation code\", \"error\");\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif (!validatePassword(logvm.credentials.newPassword)){\n\t\t\t\tmessages.set(\"A valid password must: <ul><li>Be between 6 and 50 characters</li><li>Contain at least one number</li><li>Contain at least one uppercase letter</li><li>Contain at least one lowercase letter</li><li>Contain at least one special character (\\\"!,@,#,$,%,^,&, or *\\\")</li>\");\t\n\t\t\t}\n\n\t\t\tif (logvm.credentials.newPassword !== logvm.credentials.newPasswordConfirm){\n\t\t\t\tmessages.set(\"Password and Confirmation do not match\", \"error\");\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\t\n\t\t\treturn true;\t\n\t\t}\n\t\t\n\t\t\n\t\t\n\t\t\n\t\n\t\t\n\t\t\n\t\t\n\t\t\n\t\t\n\t\t\n\t\t\n\t\t\n\t\t\n\t\t//Log in via Facebook\n\t\tlogvm.loginFB = function(){\n\t\t\taws.authenticateViaFB().then(\n\t\t\t\tfunction(result){\n\t\t\t\t\t$location.path('/closet');\n\t\t\t\t},\n\t\t\t\tfunction(err){\n\t\t\t\t\tmessages.set(err.message,\"error\");\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\n\t\t\t\n  }\n\n})();","(function () {\n\n  angular\n    .module('bdApp')\n    .directive('loginForm', loginForm);\n\t\t\n\n\t\n  function loginForm () {\n    return {\n      restrict: 'AE',\n      templateUrl: '/directives/login-form/login-form.template.html',\n      controller: 'loginFormCtrl as logvm',\n      scope : {\n\t\t\t\tredirect : \"=?\",\n\t      callback : \"=?\"\n      }\n    };\n    \n  }\n  \n    \n  \n  \n\n})();","(function () {\n\n  angular\n    .module('bdApp')\n    .controller('navigationCtrl', navigationCtrl);\n\n  navigationCtrl.$inject = ['$location','$route','popups', 'aws', '$window', 'loader'];\n  function navigationCtrl($location, $route, popups, aws, $window, loader) {\n    var vm = this;\n\n\t\tvm.loader = loader.get('loader');\n\t\tvm.saver = loader.get('saver');\n\t\tvm.drops={};\n\t\tvm.drops.acct=false;\n\t\tvm.mobileMenu = false;\n\t/*\t\n\t\t$scope.$watch(function () { return $localStorage.something; },function(newVal,oldVal){\n\t\t   if(oldVal!==newVal && newVal === undefined){\n\t\t     console.log('It is undefined'); \n\t\t  }\n\t\t});\n*/\n\t\tvm.isLoggedIn = aws.isLoggedIn();\n\n\t\tvm.logout = function(){\t\t\t\n\t\t\taws.signCurrentUserOut();\n\t\t\tif ($location.path() == \"/\")\n\t\t\t\t$route.reload();\n\t\t}\n  }\n\n})();","(function () {\n\n  angular\n    .module('bdApp')\n    .directive('navigation', navigation);\n\n  function navigation () {\n    return {\n      restrict: 'EA',\n      templateUrl: '/directives/navigation/navigation.template.html',\n      controller: 'navigationCtrl as navvm'\n    };\n  }\n\n})();","(function () {\n\n  angular\n    .module('bdApp')\n    .controller('registerFormCtrl', registerFormCtrl);\n\n  registerFormCtrl.$inject = ['$scope', '$location', 'aws', '$sce', 'messages'];\n  \n  function registerFormCtrl($scope, $location, aws, $sce, messages) {\n    var regvm = this;\n    \n\t\tregvm.messages=messages.get();\n\t\t\n\t\tregvm.credentials = {\n      name : \"\",\n      email : \"\",\n      password : \"\"\n    };\n\t\n\t\t//Validate Registration Form\n\t\tregvm.validateRegistrationForm = function () {\n\t\t\t\t\t\t\n\t\t\tfunction validatePassword(password){\n\t\t\t\t//console.log(regvm.credentials.password.length > 5);\n\t\t\t\t//contains numbers\n\t\t\t\t//console.log(regvm.credentials.password.search(/\\d/)>-1);\n\t\t\t\t//contains lowercase letters\n\t\t\t\t//console.log(regvm.credentials.password.search(/[a-z]/) > -1);\n\t\t\t\t//contains uppercase letters\n\t\t\t\t//console.log(regvm.credentials.password.search(/[A-Z]/) > -1);\n\t\t\t\t\n\t\t\t\t//RE to test all\n\t\t\t\tvar re = /^(?=.*[0-9])(?=.*[!@#$%^&*])[a-zA-Z0-9!@#$%^&*]{6,50}$/;\n\t\t\t\treturn re.test(password);\n\t\t\t}\t\t\t\n\t\t\t\t\t\t\t\t\n\t\t\tfunction validateEmail(email) {\n\t\t    var re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n\t\t    return re.test(email);\n\t\t\t}\n\n\t\t\t\n\t\t\tif (!regvm.credentials.email || !regvm.credentials.name || !regvm.credentials.password || !regvm.credentials.passwordConfirm){\n\t\t\t\tmessages.set(\"All fields are required\", \"error\");\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\t\n\t\t\tif (!validatePassword(regvm.credentials.password)){\n\t\t\t\tmessages.set(\"A valid password must: <ul><li>Be between 6 and 50 characters</li><li>Contain at least one number</li><li>Contain at least one uppercase letter</li><li>Contain at least one lowercase letter</li><li>Contain at least one special character (\\\"!,@,#,$,%,^,&, or *\\\")</li>\");\t\n\t\t\t}\n\t\t\t\n\t\t\tif (regvm.credentials.password !== regvm.credentials.passwordConfirm){\n\t\t\t\tmessages.set(\"Password and Confirmation do not match\", \"error\");\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\t\n\t\t\tif(!validateEmail(regvm.credentials.email)){\n\t\t\t\tmessages.set(\"Please Enter a valid E-mail address\", \"error\");\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\t\n\t\t\treturn true;\n\t\t\t\n\t\t}\n\t\t\n\t\t\n\t\t\n\t\t//Register User\n    regvm.registerUser = function () {\n\t    messages.reset();\n\t    \n\t    if (regvm.validateRegistrationForm()){\n\t\t    \n\t      aws.signupForApplication(regvm.credentials.email, regvm.credentials.name, regvm.credentials.password).then(\n\t      \tfunction(result){\n\t\t\t\t\t\tif ($scope.callback) $scope.callback(regvm.credentials);\n\t\t\t\t\t\tif ($scope.redirect) $location.path($scope.redirect);\n\t\t\t\t\t\tif (!$scope.callback && !$scope.redirect)\t$location.path('/login');    \n\t\t      },   \n\t\t      function(err){\n\t\t\t\t    messages.set(err.message, \"error\");\n\t\t\t    }\n\t\t\t  );\t\t\t  \n\t\t\t  \n\t\t  }\n    };\t\n    \n    \n    \t\t\n  }\n\n})();","(function () {\n\n  angular\n    .module('bdApp')\n    .directive('registerForm', registerForm);\n\t\t\n\n\t\n  function registerForm () {\n    return {\n      restrict: 'AE',\n      templateUrl: '/directives/register-form/register-form.template.html',\n      controller: 'registerFormCtrl as regvm',\n      scope : {\n\t\t\t\tredirect : \"=?\",\n\t      callback : \"=?\"\n      }\n    };\n    \n  }\n  \n    \n  \n  \n\n})();","(function () {\n\n  angular\n    .module('bdApp')\n    .controller('sliderCtrl', sliderCtrl)\n\t\n\t\tsliderCtrl.$inject = ['$scope', 'preloader'];\n\n\t\tfunction sliderCtrl($scope, preloader) {\n\t\t\tvar slvm = this;\n\n\t\t\t\n\t\t\t$scope.imagesLoaded = false;\n\t\t\t\n\t\t\tpreloader.preloadImages( $scope.slides )\n\t\t\t.then(function() {\n\t\t\t\t$scope.imagesLoaded = true;\n\t\t\t},\n\t\t\tfunction() {\n\t\t\t\tconsole.log(\"error loading imgaes...\");\n\t\t\t});\n\t\t \t\t\t\t\n\t\t\t\t\n\t\t\t\n\t\t\t$scope.currentIndex = 0;\n\t\t\t\n\t\t\t$scope.setCurrentSlideIndex = function (index) {\n\t\t\t  $scope.currentIndex = index;\n\t\t\t};\n\t\t\t\n\t\t\t$scope.isCurrentSlideIndex = function (index) {\n\t\t\t  return $scope.currentIndex === index;\n\t\t\t};\n\t\t\t\n\t\t\t$scope.nextSlide = function () {\n\t\t\t  $scope.currentIndex = ($scope.currentIndex < $scope.slides.length - 1) ? ++$scope.currentIndex : 0;\n\t\t\t};\n\t\t\t\n\t\t\t$scope.prevSlide = function () {\n\t\t\t  $scope.currentIndex = ($scope.currentIndex > 0) ? --$scope.currentIndex : $scope.slides.length - 1;\n\t\t\t};\n\t\t\t\t\n\t\t}\n\n})();","(function () {\n\n  angular\n    .module('bdApp')\n    .directive('slider', slider);\n\t\t\n  function slider () {\n    return {\n      restrict: 'EA',\n      templateUrl: '/directives/slider/slider.template.html',\n      controller: 'sliderCtrl as slvm',\n      scope : {\n        slides : '=',\n        imageClick : '&'\n      }\n    };\n  }\n\n})();","(function () {\n\n  angular\n    .module('bdApp')\n    .controller('socialCtrl', socialCtrl)\n\t\n\t\tsocialCtrl.$inject = ['jean'];\n\n\t\t\n\t\tfunction socialCtrl(jean) {\n\t\n\t\t\tvar sovm = this;\n\t\t\tsovm.jean = jean;\n\t\t\t\n\t\t\t\n\t\t\tsovm.jeanToUrl = function(){\n\t\t\t\tvar url = document.location.origin+\"/customizer/d\";\t\n\t\t\t\turl += \"/copy\";\n\t\t\t\treturn url;\n\t\t\t}\n\t\t\t\n\t\t\tvar sharingUrls = {};\n\t\t\t\n\t\t\tvar socialTitle = \"Check out my custom jeans built with Blue Delta!\";\n\t\t\tvar socialDescription = \"Cras justo odio, dapibus ac facilisis in, egestas eget quam.\";\n\n\t\t\t//Facebook sharing URL\n\t\t\tsharingUrls.facebook = function(url, image){\n\t\t\t\tif (!url) return false;\n\t\t\t\tvar baseString = 'https://www.facebook.com/sharer/sharer.php?u='+url+'&description='+socialDescription+'&title='+socialTitle;\n\t\t\t\tif (image) baseString += '&images='+urlencode(image);\n\t\t\t\treturn baseString;\n\t\t\t}\n\t\t\t\n\t\t\t//Twitter sharing URL\n\t\t\tsharingUrls.twitter = function(url){\n\t\t\t\tif (!url) return false;\n\t\t\t\treturn 'http://twitter.com/home?status='+socialTitle+'-'+url;\n\t\t\t}\n\t\t\t\n\t\t\t//Email sharing URL\n\t\t\tsharingUrls.email = function(url){\n\t\t\t\treturn \"mailto:?&subject=\"+socialTitle+\"&body=\"+socialDescription+\" - \"+url;\n\t\t\t}\n\t\t\t\n\t\t\t//Pinterest sharing URL\n\t\t\tsharingUrls.pinterest = function (url, image){\n\t\t\t\tif(url || image) return false;\n\t\t\t\treturn 'https://pinterest.com/pin/create/button/?url='+url+'&media='+image+'&description='+socialTitle+'%0A'+socialDescription;\t\n\t\t\t}\n\n\t\t\tsovm.share = function(social){\n\t\t\t\tvar url = sharingUrls[social](sovm.jeanToUrl());\n\t\t\t\tif (url !== false){\n\t\t\t\t\tif (social=='email') window.open(url, '_self');\n\t\t\t\t\telse window.open(url, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600');\n\t\t\t\t}\n\t\t\t\telse console.log(\"Error builiding social URL\");\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\n\t\t}\t\n\t\t\t\n})();","(function () {\n\n  angular\n    .module('bdApp')\n    .directive('socialActions', [function() {\n    \t\n\t\t\treturn {\n\t    \t\n\t      restrict: 'EA',\n\t      replace:true,\n\t\t\t\ttemplateUrl: '/directives/social-actions/social-actions.template.html',\n\t      scope : {\n\t        jean : '=',\n\t        display: '='\n\t      },\n\t      controller: 'socialCtrl as sovm',\n\n\t      \n\t   };\n    \n    \n  }]);\n\n})();","(function() {\n  \n  angular\n    .module('bdApp')\n    .controller('adminCtrl', adminCtrl);\n\n  adminCtrl.$inject = ['$location', 'meanData'];\n  function adminCtrl($location, meanData) {\n\t  \n\t  \n    var vm = this;\n\n    vm.user = {};\n    meanData.getOptions()\n      .success(function(data) {\n\t      console.log(\"admin.controller.jsln16:::\");\n        console.log(data);\n      })\n      .error(function (e) {\n        console.log(e);\n      });\n  }\n\n})();","\n/*\n*\n* This controller is designed to be a child of closet.controller. It refernces $scope.$scope.vm.user throughout and needs to inherit $scope.vm.user from a parent\n*\n*/\n\n(function() {\n  \n  angular\n    .module('bdApp')\n    .controller('addFormCtrl', addFormCtrl);\n\n  addFormCtrl.$inject = ['$scope', '$filter', 'bdAPI', 'messages'];\n  function addFormCtrl($scope, $filter, bdAPI, messages) {\n\t  \n\t  \n\t  $scope.editing=false;\n\t  $scope.active=false;\n\t\t$scope.addForm = {};\n\t\t$scope.model = {};\n\t\t\n\t\tvar addFormFields = ['addressLine1','addressLine2','city','state','zip'];\n\t\t\n\t\t\n\t\t//Choose Primary Address\n\t\t$scope.choosePrimary = function(index){\n\t\t\tfor (a = 0; a< $scope.vm.user.address.length; a++){\n\t\t\t\t$scope.vm.user.address[a].primary = (a == index ? true :false);\n\t\t\t}\n\t\t\tbdAPI.saveUser($scope.vm.user).then(\n\t\t\t\tfunction(result){\n\t\t\t\t\tconsole.log('saved');\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\n\t\t\n\t\t$scope.startEditing = function(){\n\t\t\t//Bring Primary address to the top\n\t\t\t$scope.vm.user.address = $filter('orderBy')($scope.vm.user.address, '-primary');\n\t\t\t$scope.editing = true;\n\t\t}\n\t\t\n\t\t$scope.stopEditing = function(){\n\t\t\t$scope.editing = false;\n\t\t}\n\n\n\n\t\t$scope.editAdd = {};\n\t\t\n\t\t//Open Address Form\n\t\t$scope.open = function(index){\n\n\t\t\t$scope.active = true;\n\t\t\tif (!$scope.vm.user.address) $scope.vm.user.address = [];\n\t\t\t//New Address\n\t\t\tif (typeof index === 'undefined'){\n\t\t\t\t$scope.model = {};\n\t\t\t\t$scope.editAdd.index = $scope.vm.user.address.push($scope.model) -1;\n\t\t\t\t$scope.editAdd.data = null;\t\n\t\t\t}\n\t\t\t\n\t\t\t//Editing Existing...\n\t\t\telse{\n\t\t\t\t$scope.model = $scope.vm.user.address[index];\n\t\t\t\t$scope.editAdd.index = index;\n\t\t\t\t$scope.editAdd.data =  angular.copy($scope.model);\n\t\t\t}\n\t\t\t\t\t\t\n\t\t}\n\t\t\n\n\t\tfunction resetForm(close){\n\t\t\tclose = close || true;\n\t\t\t$scope.editAdd = {};\n\t\t\t$scope.model = {};\n\t\t\tif (close) $scope.active = false;\n\t\t}\n\t\t\n\t\tfunction removeAddress(index){\n\t\t\t$scope.vm.user.address.splice(index, 1);\n\t\t}\n\t\n\t\t\n\t\t//Clear Address Form\n\t\t$scope.clear = function(){\n\t\t\tvar dataObj = $scope.editAdd.data;\n\t\t\tif (dataObj == null) removeAddress($scope.editAdd.index);//Remove Address\n\t\t\telse $scope.vm.user.address[$scope.editAdd.index] = $scope.editAdd.data;//Reset Address\n\t\t\tresetForm();\t\t\t\n\t\t}\n\t\t\n\t\t\n\t\t//Remove Address and save user\n\t\t$scope.remove = function(index){\n\t\t\t\n\t\t\tif ($scope.vm.user.address.length < 2){\n\t\t\t\tmessages.set(\"You can't remove your last address\", \"error\");\n\t\t\t\treturn false;\t\n\t\t\t}\n\t\t\t\n\t\t\tvar wasPrimary = $scope.vm.user.address[index].primary;\t\n\t\t\tremoveAddress(index);\n\t\t\tif(wasPrimary) $scope.choosePrimary(0);\n\t\t\tbdAPI.saveUser($scope.vm.user);\n\t\t}\n\t\t\n\t\t//Save Form\n\t\t$scope.save = function(){\n\t\t \tvar primary = $scope.vm.user.address.filter(function(add){\n\t\t\t\treturn add.primary == true;\n \t\t\t});\n \t\t\tif (!primary.length) $scope.vm.user.address[0].primary=true;\n \t\t\t\t\n\t\t\tbdAPI.saveUser($scope.vm.user).then(\n\t\t\t\tfunction(result){\n\t\t\t\t\t$scope.newAdd = null;\n\t\t\t\t\t$scope.active = false;\n\t\t\t\t\t$scope.model = {};\n\t\t\t\t\t$scope.$apply();\n\t\t\t\t}\n\t\t\t);\n\t\t\t\n\t\t\t\n\t\t}\n\t\t\n\t\t\n\t\t//US States\n\t\t$scope.states = [\n\t\t\t{\n\t\t\t  \"name\": \"Alabama\",\n\t\t\t  \"abbreviation\": \"AL\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Alaska\",\n\t\t\t  \"abbreviation\": \"AK\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Arizona\",\n\t\t\t  \"abbreviation\": \"AZ\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Arkansas\",\n\t\t\t  \"abbreviation\": \"AR\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"California\",\n\t\t\t  \"abbreviation\": \"CA\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Colorado\",\n\t\t\t  \"abbreviation\": \"CO\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Connecticut\",\n\t\t\t  \"abbreviation\": \"CT\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Delaware\",\n\t\t\t  \"abbreviation\": \"DE\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"District Of Columbia\",\n\t\t\t  \"abbreviation\": \"DC\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Florida\",\n\t\t\t  \"abbreviation\": \"FL\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Georgia\",\n\t\t\t  \"abbreviation\": \"GA\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Hawaii\",\n\t\t\t  \"abbreviation\": \"HI\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Idaho\",\n\t\t\t  \"abbreviation\": \"ID\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Illinois\",\n\t\t\t  \"abbreviation\": \"IL\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Indiana\",\n\t\t\t  \"abbreviation\": \"IN\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Iowa\",\n\t\t\t  \"abbreviation\": \"IA\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Kansas\",\n\t\t\t  \"abbreviation\": \"KS\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Kentucky\",\n\t\t\t  \"abbreviation\": \"KY\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Louisiana\",\n\t\t\t  \"abbreviation\": \"LA\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Maine\",\n\t\t\t  \"abbreviation\": \"ME\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Maryland\",\n\t\t\t  \"abbreviation\": \"MD\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Massachusetts\",\n\t\t\t  \"abbreviation\": \"MA\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Michigan\",\n\t\t\t  \"abbreviation\": \"MI\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Minnesota\",\n\t\t\t  \"abbreviation\": \"MN\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Mississippi\",\n\t\t\t  \"abbreviation\": \"MS\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Missouri\",\n\t\t\t  \"abbreviation\": \"MO\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Montana\",\n\t\t\t  \"abbreviation\": \"MT\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Nebraska\",\n\t\t\t  \"abbreviation\": \"NE\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Nevada\",\n\t\t\t  \"abbreviation\": \"NV\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"New Hampshire\",\n\t\t\t  \"abbreviation\": \"NH\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"New Jersey\",\n\t\t\t  \"abbreviation\": \"NJ\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"New Mexico\",\n\t\t\t  \"abbreviation\": \"NM\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"New York\",\n\t\t\t  \"abbreviation\": \"NY\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"North Carolina\",\n\t\t\t  \"abbreviation\": \"NC\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"North Dakota\",\n\t\t\t  \"abbreviation\": \"ND\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Ohio\",\n\t\t\t  \"abbreviation\": \"OH\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Oklahoma\",\n\t\t\t  \"abbreviation\": \"OK\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Oregon\",\n\t\t\t  \"abbreviation\": \"OR\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Pennsylvania\",\n\t\t\t  \"abbreviation\": \"PA\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Rhode Island\",\n\t\t\t  \"abbreviation\": \"RI\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"South Carolina\",\n\t\t\t  \"abbreviation\": \"SC\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"South Dakota\",\n\t\t\t  \"abbreviation\": \"SD\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Tennessee\",\n\t\t\t  \"abbreviation\": \"TN\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Texas\",\n\t\t\t  \"abbreviation\": \"TX\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Utah\",\n\t\t\t  \"abbreviation\": \"UT\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Vermont\",\n\t\t\t  \"abbreviation\": \"VT\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Virginia\",\n\t\t\t  \"abbreviation\": \"VA\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Washington\",\n\t\t\t  \"abbreviation\": \"WA\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"West Virginia\",\n\t\t\t  \"abbreviation\": \"WV\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Wisconsin\",\n\t\t\t  \"abbreviation\": \"WI\"\n\t\t\t},\n\t\t\t{\n\t\t\t  \"name\": \"Wyoming\",\n\t\t\t  \"abbreviation\": \"WY\"\n\t\t\t}\n\t\t];\n    \n\t\t\n\t\t\t  \n\t}\n\t\n})();","(function() {\n  \n  angular\n    .module('bdApp')\n    .controller('closetCtrl', closetCtrl);\n\n  closetCtrl.$inject = ['$location', '$window', 'jean','popups', 'aws', 'bdAPI', '$scope', 'messages', 'loader'];\n  function closetCtrl($location, $window, jean, popups, aws, bdAPI, $scope, messages, loader) {\n\t  \n\n\t  loader.show(\"Getting your profile information...\");\n\t  \n    var vm = this;   \n\t\t\n\t\tpopups.closeAll();\n\t\tvm.popups=popups.get();\n\n\t\tvm.messages=messages.get();\n\t\t\n\t\t//Set up Jean\n\t\tvm.jean = jean;\n\t\t\n\t\tvm.data={}//jsonData.getData();\n\t\tvm.jeans = vm.data.jeansList;\n\t\t\n\n\t\tvm.onload=function(){\n\t\t\t$scope.vm = vm;\t\n\t\t}\n\t\t\n\t\t\n\t\t//Edit User\n\t\tvm.userForm = {};\n\t\tvm.userForm.editing={};\n\t\tvm.userForm.saving={};\n\t\tvm.userForm.feedback={\n\t\t\t\"type\":\"\",\n\t\t\t\"message\":\"\",\n\t\t}\n\t\t\n\n\t\tvm.userForm.cancel = function(field){\n\t\t\tvm.userForm.editing[field] = false;\n\t\t\tvm.user[field] = vm.userForm.data[field];\n\t\t}\n\t\t\n\t\t\n\t\t//Validation functions\n\t\tfunction validateEmail(email) {\n\t    var re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n\t    return re.test(email);\n\t\t}\n\t\t\n\t\tfunction validatePhoneNumber(inputtxt) {\n\t\t  var phoneno = /^\\+?([0-9]{2})\\)?[-. ]?([0-9]{4})[-. ]?([0-9]{4})$/;\n\t\t  return inputtxt.match(phoneno);\n\t\t}\n\t\t\n\t\tvm.userForm.validate = function(field, data){\n\t\t\t\n\t\t\tif (field == 'email'){\n\t\t\t\tif (validateEmail(data)) return true;\n\t\t\t\telse {\n\t\t\t\t\tmessages.set(\"Please enter a valid email address\", \"error\");\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\telse if (field == 'phoneNumber'){\n\t\t\t\tif (validatePhoneNumber(data)) return true;\n\t\t\t\telse {\n\t\t\t\t\tmessages.set(\"Please enter a valid phone number\", \"error\");\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\telse return true;\n\t\t}\n\n\t\t\n\t\tvm.userForm.save = function(field){\n\t\t\tif (vm.user[field] == \"\") vm.user[field] = null;\n\t\t\tif (vm.userForm.validate(field, vm.user[field])){\n\t\t\t\tvm.userForm.saving[field] = true;\n\t\t\t\tbdAPI.call('usersUpdate', [vm.user.identityId, vm.user], function(result){\n\t\t\t\t\tvm.userForm.saving[field] = false;\n\t\t\t\t\tvm.userForm.editing[field] = false;\n\t\t\t\t\tvm.userForm.data[field] = vm.user[field];\n\t\t\t\t\t$scope.$apply();\n\t\t\t\t});\t\n\t\t\t}\n\t\t}\n\t\t\n\t\tvm.orders = [];\t\t\n    \n    \n    //Get user details and orders...\n    var identityID = aws.getCurrentIdentityId();\n    if (!identityID){ $location.path('/'); }\n\t  else{\n\t\t\t\n\t  \t//Todo: Just get orders for user...\n\t\t\tbdAPI.call('ordersList', 100, function(result){\n\t\t\t\tvm.orders=result.data.items;\n\t\t\t});\t\n\t\t\t\t\n\t\t\tbdAPI.call('usersGet', identityID, function(result){\n\t\t\t\tloader.hide();\n\t\t\t\tvm.user = result.data;\t\t\t\t\t\t\t\n\t\t\t\tvm.userForm.data = angular.copy(result.data);\t\n\t\t\t});\n\t\t\t\n    }\n\t    \t\n\t    \t\n\n\t    \t\n\t\t\t\t\n\t\t/*\n\t\t* Password Form\n\t\t*/\n\t\tvm.passForm = {\n\t\t\t\"editing\" : false,\n\t\t\t\"currentPass\" : \"\",\n\t\t\t\"newPass\": \"\",\n\t\t\t\"newPassConfirm\" : \"\",\n\t\t\t\"clear\": function(){\n\t\t\t\tvm.passForm.editing = false;\n\t\t\t\tvm.passForm.currentPass = \"\";\n\t\t\t\tvm.passForm.newPass = \"\";\n\t\t\t\tvm.passForm.newPassConfirm = \"\";\n\t\t\t\tmessages.reset();\n\t\t\t}\n\t\t};\n\t\t\n\t\t\n\t\tfunction validatePassword(password){\n\t\t\tvar re = /^(?=.*[0-9])(?=.*[!@#$%^&*])[a-zA-Z0-9!@#$%^&*]{6,50}$/;\n\t\t\treturn re.test(password);\n\t\t}\n\t\t\n\t\tvm.validatePasswordForm = function(){\n\t\t\n\t\t\tif (!validatePassword(vm.passForm.newPass)){\n\t\t\t\tmessages.set(\"A valid password must: <ul><li>Be between 6 and 50 characters</li><li>Contain at least one number</li><li>Contain at least one uppercase letter</li><li>Contain at least one lowercase letter</li><li>Contain at least one special character (\\\"!,@,#,$,%,^,&, or *\\\")</li>\");\t\n\t\t\t}\n\t\t\t\n\t\t\tif (vm.passForm.newPass !== vm.passForm.newPassConfirm){\n\t\t\t\tmessages.set(\"New Password and Confirmation do not match\", \"error\");\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\t\n\t\t\treturn true;\t\n\t\t}\n\t\t\n\t\t\n    vm.changePassword = function () {\n\t    messages.reset();\n\t    if (vm.validatePasswordForm()){\n\t\t    \n\t\t\t\taws.changePassword(vm.user.email, vm.passForm.currentPass, vm.passForm.newPass).then(\n\t\t\t\t\tfunction(result){\n\t\t\t\t\t\tvm.passForm.clear();\n\t\t\t\t\t\tmessages.set(\"Password successfully changed.\", \"success\");\n\t\t\t\t\t},\n\t\t\t\t\tfunction(err){\t\n\t\t\t\t\t\tmessages.set(err.message, \"error\");\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t  }\n    };\t\n\t\t\n\n\n\n\n\n\t\tvm.copyJean = function(){\n\t\t\tvm.jean = jean.createNew(vm.displayJean);\n\t\t\t$location.path('/customizer');\n\t\t}\n\t\t\n\t\tvm.displayJean={};\n\t\tvm.selectJean = function(jean){\n\t\t\tvm.popups.jeanProfile = true; \n\t\t\tvm.displayJean=jean\n\t\t}\n\t\t\n\t\tvm.selectOrder = function(order){\n\t\t\tvm.popups.orderProfile = true; \n\t\t\tvm.displayOrder=order;\n\t\t\tvm.displayJean = order.orderItems[0].jean;\n\t\t}\n\t\t\n\t\n\t\tfunction findJeanbyId(jeanId){\n\t\t\tfor (var j=0; j < vm.user.jeans.length; j++) {\n\t      if (vm.user.jeans[j].jeanId === jeanId) {\n\t        return {\"index\": j, \"data\" : vm.user.jeans[j]};\n\t      }\n      }\n  \t}\n\n\t\tvm.deleteJean = function(jeanId){\n\t\t\tjean.deleter(vm.user.identityId, jeanId, function(result){\n\t\t\t\tvar index = findJeanbyId(jeanId).index;\n\t\t\t\tvm.user.jeans.splice(index, 1);\n\t\t\t\t$scope.$apply();\n\t\t\t});\n\t\t}\n\t\t\n\t\tvm.orderJean = function(jeanData){\n\t\t\tjean.setup(jeanData);\n\t\t\t$location.path('/order/'+jeanData.jeanId+'/'+vm.user.identityId);\n\t\t}\n\t\n\t\t\t\n\n\n\t\n\t\t\n\t\t//Get User\n  }\n  \n\n\n\n})();","(function() {\n  \n  angular\n    .module('bdApp')\n    .controller('customizerCtrl', customizerCtrl);\n\n  customizerCtrl.$inject = ['$q','$filter','$timeout','$location', '$window', '$routeParams', 'bdAPI', 'jean', '$scope', 'popups', 'aws', 'messages', 'loader', 'jsonData'];\n  function customizerCtrl($q, $filter, $timeout, $location, $window, $routeParams, bdAPI, jean, $scope, popups, aws, messages, loader, jsonData) {\n\t\t\n    var vm = this\n\t\t\n\t\t//Setup Loader\t\t\n\t\tvm.loader = loader.get();\n\t\t\n\t\t//Set up shared messages service\n\t\tmessages.reset();\n\t\tvm.messages=messages.get();\n\t\n\t\t//Set up shared popups service\n\t\tpopups.closeAll();\n\t\tvm.popups = popups.get();\n\n\t\t//Set up Jean\n\t\tjean.setup().then(function(result){\n\t\t\tvm.jeanData=jean.get();\n\t\t\t\t\t\t\n\t\t\t$scope.$watch(function() {\n\t\t\t\treturn vm.jeanData;\n\t\t\t}, function(current, original) {\n\t\t\t\tvm.updateActiveItem();\n\t\t\t}, true);\n\t\t\t\n\t\t\t$scope.$watch(function() {\n\t\t\t\treturn vm.data;\n\t\t\t}, function(current, original) {\n\t\t\t\tvm.updateActiveItem();\n\t\t\t}, true);\n\n\t\t});\n\n\t\t\t\n\t\t\n\t\t\n\t\t\n\t\n\n\t\t//Detect Orientation\t\t\t\n\t\tfunction landscapeDetect() {\n\t\t  var ua = navigator.userAgent.toLowerCase();\n\t\t  var isAndroid = ua.indexOf(\"android\") > -1; // Detect Android devices\n\t\t  if (isAndroid) {\n\t\t    //window.orientation is different for iOS and Android\n\t\t    if (window.orientation == 0 || window.orientation == 180) { //Landscape Mode\n\t\t      return true;\n\t\t    }\n\t\t    else if (window.orientation == 90 || window.orientation == -90) { //Portrait Mode\n\t\t\t\t\treturn false;\n\t\t    }\n\t\t  }\n\t\t  else {\n\t\t    if (window.orientation == 90 || window.orientation == -90) { //Landscape Mode\n\t\t      return true;\n\t\t    }\n\t\t    else if (window.orientation == 0 || window.orientation == 180) { //Portrait Mode\n\t\t      return false;\n\t\t    }\n\t\t  }\n\t\t}\n    \n    vm.landscape=landscapeDetect();\n  \tvar supportsOrientationChange = \"onorientationchange\" in window,\n    orientationEvent = supportsOrientationChange ? \"orientationchange\" : \"resize\";\n\t\t\n\t\twindow.addEventListener(orientationEvent, function() {\t\n\t\t\t//Set a scope variable on orientation change. This will display a popup on the front end warning users that the customizer works best in protrait mode\n\t\t  vm.landscape=landscapeDetect();\n\t\t  $scope.$apply();\n\t\t}, false);\n\t\t\n\t\t\n\t\t\n\t\t\n    /*\n\t\t*\n\t\t* GET CUSTOMIZER DATA \n\t\t*\n\t\t*/\t\n\t\tvm.data = jsonData;\n\t\t\n\t\tvm.activeItem={};\n\t\tvm.updateActiveItem = function(){\n\t\t\t\n\t\t\tif (!vm.jeanData) return false;\n\t\t\t\n\t\t\tvar data = vm.data[vm.panel[vm.panelStep].dataKey];\n\t\t\tvar id = vm.jeanData[vm.panel[vm.panelStep].jeanKey];\n\t\t\t\n\t\t\tif (typeof(id)== 'object'){\n\t\t\t\t//Embedded model\n\t\t\t\tvm.activeItem = id;\n\t\t\t}else{\n\t\t\t\t//Need to search\n\t\t\t\tvar ret = $filter('filter')(data, {id: id});\n\t\t\t\tif (ret) ret = ret[0];\n\t\t\t\tvm.activeItem = ret||null;\n\t\t\t}\n\t\t}\n\n\t\t\n\t\t//Build Control Panel Steps\n\t\tvm.panel = [];\n\t\t\n\t\t//Gender\n\t\tvm.panel.push({\n\t\t\t\"panelTemplate\":\"gender-chooser\",\n\t\t\t\"dataKey\":\"gender\",\n\t\t\t\"title\":\"Gender\",\n\t\t\t\"jeanKey\":\"gender\"\n\t\t});\n\t\t\n\t\t//Style\n\t\tvm.panel.push({\n\t\t\t\"panelTemplate\":\"style-chooser\",\n\t\t\t\"dataKey\":\"style\",\n\t\t\t\"title\":\"Style\",\n\t\t\t\"jeanKey\":\"style\"\n\t\t});\n\t\t\n\t\t//Fabric\n\t\tvm.panel.push({\n\t\t\t\"panelTemplate\":\"fabric-chooser\",\n\t\t\t\"dataKey\":\"fabric\",\n\t\t\t\"title\":\"Fabric\",\n\t\t\t\"jeanKey\":\"fabric\"\n\t\t});\n\t\t\n\t\t//Top Thread\n\t\tvm.panel.push({\n\t\t\t\"panelTemplate\":\"chooser\",\n\t\t\t\"dataKey\":\"thread\",\n\t\t\t\"title\":\"Top Thread\",\n\t\t\t\"jeanKey\":\"top_thread\"\n\t\t});\n\t\t\n\t\t//Bottom Thread\n\t\tvm.panel.push({\n\t\t\t\"panelTemplate\":\"chooser\",\n\t\t\t\"dataKey\":\"thread\",\n\t\t\t\"title\":\"Bottom Thread\",\n\t\t\t\"jeanKey\":\"bottom_thread\"\n\t\t});\n\t\t\n\t\t//Accent Thread\n\t\tvm.panel.push({\n\t\t\t\"panelTemplate\":\"chooser\",\n\t\t\t\"dataKey\":\"thread\",\n\t\t\t\"title\":\"Accent Thread\",\n\t\t\t\"jeanKey\":\"accent_thread\"\n\t\t});\n\t\t\n\t\t//Overview\n\t\tvm.panel.push({\n\t\t\t\"panelTemplate\":\"list\",\n\t\t\t\"title\":\"Overview\"\n\t\t});\n\t\t\n\t\t\n\t\t/*\n\t\tNot using hardware for now...\n\n\t\tvm.panel.push({\n\t\t\t\"panelTemplate\":\"chooser\",\n\t\t\t\"dataKey\":\"hardware\",\n\t\t\t\"title\":\"Hardware\",\n\t\t\t\"jeanKey\":\"hardware\"\n\t\t});\n\t\t*/\n\t\t\n\t\tvm.panelDir=\"next\";\t\t\n\t\tvm.panelStep = 0;\n\t\tvm.changeStep = function(step){\n\t\t\tif (step >= vm.panel.length) return false;\n\t\t\tif (step < 0) return false;\n\t\t\tif (step===undefined) return false;\n\t\t\telse vm.panelStep = step; \n\t\t\t\n\t\t\t//As long as we're not on the \"Overview\" Step, update active item...\n\t\t\tif (step+1 != vm.panel.length) vm.updateActiveItem();\n\t\t}\n\t\t\n\n\t\t\n\n\n\t\t\t\t\n\t\t/*\n\t\t*\n\t\t* Control Panel actions\n\t\t*\n\t\t*/\n\t\tvm.orderCallback = function(){\n\t\t\tvm.saveCallback(function(){\n\t\t\t\t$location.path('/order')\n\t\t\t});\n\t\t}\t\t\n\t\t\n\t\tvm.placeOrder=function(){\n\t\t\tif(!aws.isLoggedIn()){\n\t\t\t\tvm.authCallback = vm.orderCallback;\n\t\t\t\tpopups.set('loginOrRegister',true);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tvm.saveCallback(function(){\n\t\t\t\t\t$location.path('/order')\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tvm.savingBar = false;\n\t\t\n\t\tvm.newJeanName = \"My Jeans - 6\";\n\t\tvm.saveCallback = function(callback){\n\t\t\tcallback = callback || null;\n\t\t\tpopups.closeAll();\n\t\t\tif(vm.jeanData.name) vm.runSave(callback);\n\t\t\telse popups.set('saver', true);\n\t\t}\t\n\t\t\n    vm.runSave = function(callback){\n\t    vm.jeanData.name = vm.newJeanName;\n\t\t\tvm.savingBar = true;\n\t\t\tjean.save().then(\n\t\t\t\tfunction(result){\n\t\t\t\t\tif (callback){ \n\t\t\t\t\t\tcallback(result);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tvm.savingBar = false;\n\t\t\t\t\t\tpopups.set('saver',true);\t\t\t\t\t\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n    }\n    \n    vm.keepEditing = function(){\n\t    var identityId = aws.getCurrentIdentityId();\n\t\t\t$location.path('/customizer/'+vm.jeanData.jeanId+'/'+identityId);\n    }\n    \n    vm.goToCloset = function(){\n\t    $location.path('/closet');\n    }\n    \n    vm.startOver = function(){\n\t    jean.reset();\n\t    vm.jeanData=jean.get();\n\t    console.log(jean.get());\n\t    popups.closeAll();\n    }\n    \n    vm.saveJean = function(){\n\t\t\tif(!aws.isLoggedIn()){\n\t\t\t\tvm.authCallback = vm.saveCallback;\n\t\t\t\tpopups.set('loginOrRegister',true);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\telse{\n\t\t  \tvm.saveCallback();\n    \t}\n  \t}\n    \n    //Set default auth callback\n\t\tvm.authCallback = vm.orderCallback;\n    \n    vm.registerCallback = function(details){\n\t    aws.authenticateCognitoUser(details.email, details.password).then(\n\t\t    function(result){\n\t\t\t\t\tvm.authCallback();\t\n\t\t  \t}\n\t    )\n    }\n    \n    \n\n\n\t\t\n  }\n\n})();3","(function() {\n  \n  angular\n    .module('bdApp')\n    .controller('homeCtrl', homeCtrl);\n\t\t\t\n\t\thomeCtrl.$inject = ['user'];\n\t\t\n\t\t\n    function homeCtrl (user) {\n\t    \n\t\t\tvar vm = this;\n\t\t\tvm.user = user.get();\n\t\t\t\n\t    user.login(\"cplefevre@gmail.com\", \"i@mF@tty23\", function(user){\n\t\t    console.log('second user');\n\t\t\t\tconsole.log(vm.user);\n\t    });\n\t    \n\t\t\tconsole.log('first user');\n\t    console.log(vm.user);\n\t    \t\n    }\n\n})();","(function() {\n  \n  angular\n    .module('bdApp')\n    .controller('orderCtrl', orderCtrl);\n\n  orderCtrl.$inject = ['$window', '$location', 'jean','popups', '$filter', 'aws', 'bdAPI', '$scope', 'jsonData'];\n  function orderCtrl($window, $location, jean, popups, $filter, aws, bdAPI, $scope, jsonData) {\n\t  \n\n\t  \n    var vm = this;\n    vm.popups=popups.get();\n\t\t\n\t\tjean.setup();\n\t\tvm.jean = jean.get();\n\t\t\n\t\tvm.hasMeasurements = function(order) {\n\t\t\tconsole.log(\"HM Filter\");\n\t\t\tvar measurements = order.orderItems[0].jean.measurement;\n\t\t\treturn Object.keys(measurements).length && measurements.waist;\n\t\t};\n\t\t\n\t\tvar userDetails = aws.getCurrentUserFromLocalStorage();\n\t\tvar identityId = bdAPI.setupHeaders(userDetails);\n\n\t\tif (vm.jean.jeanId && identityId){\n\t\t\t$location.path('/order/'+vm.jean.jeanId+'/'+identityId);\n\t\t}\n\n\t\tvm.orderForm={};\n\t\tvm.orderForm.step=1;\n\t\t\n\t\tvm.order = {\n\t\t\t\"userId\":identityId,\n\t\t\t\"price\":null,\n\t\t\t\"shippingAddress\":null,\n\t\t\t\"vendor\":null,\n\t\t\t\"rep\":null,\n\t\t\t\"status\":\"New\",\n\t\t\t\"orderItems\":[{\n\t\t\t\t\"jean\":vm.jean,\n\t\t\t\t\"tracking\":null,\n\t\t\t\t\"notes\":null,\n\t\t\t}],\n\t\t\t\"timeline\":null,\n\t\t\t\"tailor\":null,\n\t\t}\n\t\t\n\t\tvm.orders = [];\n\t\tbdAPI.call('ordersList', 100, function(result){\n\t\t\tconsole.log(result.data.items);\n\t\t\tfor(i=0; i<result.data.items.length; i++){\n\t\t\t\tvar item = result.data.items[i];\n\t\t\t\tif (item.userId == aws.getCurrentIdentityId() && item.status != \"New\"){\n\t\t\t\t\tvm.orders.push(item);\n\t\t\t\t}\n\t\t\t}\n\t\t});\t\n\n\t\tvm.placeOrder = function(){\t\t\t\n\t\t\tbdAPI.call('orderCreate', vm.order, function(result){\n\t\t\t\tvm.jean.ordered = true;\n\t\t\t\tbdAPI.call('jeansUpdate', [aws.getCurrentIdentityId(), vm.jean.jeanId, vm.jean], function(result){\n\t\t\t\t\tconsole.log(\"jeanSaved\");\n\t\t\t\t\tconsole.log(result);\t\t\t\t\t\n\t\t\t\t});\n\t\t\t\tbdAPI.call('commentsCreate', [result.data.orderId, {message:\"Order Placed\"}], function(comment){\n\t\t\t\t\tvm.popups.orderPlaced = true;\n\t\t\t\t\tjean.reset();\n\t\t\t\t\tvm.jean = jean.get();\n\t\t\t\t\t$scope.$apply();\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\t\t\t\t\t\n\t\tvm.chooseFitType = function(type){\n\t\t\tvm.order.orderType = type;\n\t\t\tif (type == 2 && !vm.order.tailor){\n\t\t\t\tvm.popups.tailors=true;\n\t\t\t}\t\n\t\t}\n\t\t\n\t\tvm.data=jsonData;\n\t\t\n\t\tvm.goToCloset = function(){\n\t\t\tconsole.log('closet');\n\t\t\t$location.path('/closet');\n\t\t}\n\t\tvm.startOver = function(){\n\t\t\t$location.path('/customizer');\n\t\t}\n\t\t\n\t\tvm.orderForm.nextStep = function(){\n\t\t\t\n\t\t\t//Step 1 to Step 2\n\t\t\tif (vm.orderForm.step==1){\n\t\t\t\t\n\t\t\t\t//Make sure we've got a fit type\n\t\t\t\tif (!vm.order.orderType){\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t//If we're using a tailor, make sure we've got a tailor\n\t\t\t\tif (vm.order.orderType ==2 && !vm.order.tailor){\n\t\t\t\t\tvm.popups.tailors=true;\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tvm.orderForm.step=2;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t}\n\n\n/*\n\t\twindow.onbeforeunload = function() {\n\t\t    return 'You have unsaved changes!';\n\t\t}\n\t*/\t\t\t\n\t\t\n\t\t\n\t\t\n\t\tfunction getPrimaryAddress(addresses){\n\t\t\tfor (var i=0; i<addresses.length; i++) {\n\t\t\t\tif (addresses[i].primary == true) return addresses[i];\n\t\t\t}\n\t\t\tconsole.log('no address marked as primary... returning first result');\n\t\t\treturn addresses[0];\n\t\t}\n   \n    var user = aws.getCurrentUserFromLocalStorage();\n\t\t\n\t\t\n    if (user){\n\t    var identityID = bdAPI.setupHeaders(user);\n\t\t\tbdAPI.usersGet(identityID).then(\n\t\t\t\tfunction(result){\n\t\t\t\t\tvm.user = result.data;\t\n\t\t\t\t\tvm.order.shippingAddress = getPrimaryAddress(vm.user.address);\n\t\t\t\t\t$scope.$apply();\n\t\t\t\t}, \n\t\t\t\tfunction(err){console.log(err)} \n\t\t\t);\n    }else{\n\t    //redirect if not logged in\n\t    $location.path('/login');\n\t\t}\t\n\n\t\t\n\n\t\n\n\n\t\t//Get User\n  }\n  \n\n\n\n})();","(function () {\n\n  angular\n  .module('bdApp')\n  .controller('loginCtrl', loginCtrl);\n\n\tloginCtrl.$inject = ['messages'];\n  function loginCtrl(messages) {\n    var vm = this;\n    \n    messages.reset();\n    vm.messages = messages.get();\n    \n  }\n\n})();","(function () {\n\n  angular\n    .module('bdApp')\n    .controller('registerCtrl', registerCtrl);\n\n  registerCtrl.$inject = ['messages'];\n  function registerCtrl(messages) {\n    var vm = this;\n\n\t\tmessages.reset();\n    vm.messages = messages.get();\n    vm.formStep=1;\n    \t\t\n/*    \t\t\t\t\t\n\t\t//Confirm User with Registration Code\t\t\t\t\n    vm.confirmUser = function() {\n\t\t\tvm.resetMessage();\n\t\t\taws.confirmRegisteredUnauthenticatedUser(vm.credentials.email, vm.credentials.code).then(\n      \tfunction(result){\n\t\t\t\t\tvm.setMessage($sce.trustAsHtml(\"Your Account has been confirmed. <a href='/login'>Click here to login</a>\"), \"success\");\n\t      },   \n\t      function(err){\n\t\t      if (err.message == \"Missing required key 'ConfirmationCode' in params\") err.message = \"Please enter confirmation code\";\n\t\t\t    vm.setMessage(err.message, \"error\");\n\t\t    }\n\t\t  );\n    };\n    \n    //Resend Registration code to user via email\n    vm.resendCode = function(){\n\t    //This function throws an error in the SDK and no result... cannot implement promise for now\n\t    aws.resendConfirmationCode(vm.credentials.email);\n\t    //We're going to show a success message no matter what\n\t    //TODO: Implement corrected SDK and promise structure for this functino\n\t    vm.setMessage(\"A new confirmation code has been sent to \"+vm.credentials.email+\". Enter the code above to confirm your account\", \"success\");\n    };\n\n*/\n  }\n\n})();"]}