!function(){function e(e,r){e.when("/",{templateUrl:"/pages/home/home.view.html",controller:"homeCtrl",controllerAs:"vm"}).when("/register",{templateUrl:"/pages/auth/register/register.view.html",controller:"registerCtrl",controllerAs:"vm"}).when("/login",{templateUrl:"/pages/auth/login/login.view.html",controller:"loginCtrl",controllerAs:"vm"}).when("/closet",{templateUrl:"/pages/closet/closet.view.html",controller:"closetCtrl",controllerAs:"vm"}).when("/order/:jeanId?/:userId?",{templateUrl:"/pages/order/order.view.html",controller:"orderCtrl",controllerAs:"vm"}).when("/customizer/:jeanId?/:userId?",{templateUrl:"/pages/customizer/customizer.view.html",controller:"customizerCtrl",controllerAs:"vm"}).when("/admin",{templateUrl:"/pages/admin/admin.view.html",controller:"adminCtrl",controllerAs:"vm"}).otherwise({redirectTo:"/"}),r.html5Mode(!0)}function t(e,r,t){t.isLoggedIn()&&t.setup(),e.$on("$routeChangeStart",function(e,n,o){var l=["/closet","/order"];l.indexOf(r.path())>=0&&!t.isLoggedIn()&&r.path("/login")})}angular.module("bdApp",["ngRoute","ngAnimate","ngSanitize","ngCookies","angular-gestures","user","api"]),angular.module("bdApp").config(["$routeProvider","$locationProvider",e]).run(["$rootScope","$location","user",t]).filter("spaceless",function(){return function(e){if(e)return e.replace(/\s+/g,"-")}}).filter("scoreToSpace",function(){return function(e){if(e){var e=e.replace(/([A-Z])/g," $1");return e.replace(/_+/g," ")}}}).filter("minMax",function(e,r,t){return function(n){return!(e&&n[t]<e)&&!(r&&n[t]>r)}}).filter("displayName",function(){return function(e){return!!e&&e.replace(/Raw Denim/g,"")}});var n=angular.injector(["ng"]),o=n.get("$http"),l=n.get("$q"),a="http://bluedelta-data.s3-website-us-east-1.amazonaws.com/data/",i=["style","thread","button","fabric","gender","tailors"],s=[];for(d=0;d<i.length;d++)s.push(o.get(a+i[d]+".json"));l.all(s).then(function(e){var t={};for(r=0;r<e.length;r++){var n=e[r].config.url.replace(a,"").replace(".json","");t[n]=e[r].data}angular.module("bdApp").constant("jsonData",t);var o=document.getElementById("bdApp");angular.bootstrap(angular.element(o),["bdApp"])})}();
!function(){const e={REGION:"us-east-1",PROFILE_IMAGES_S3_BUCKET:"blue-delta-api-development-stack-userdatabucket-12z57hiicf3xy",API_ENDPOINT:"https://kd6f1omjzc.execute-api.us-east-1.amazonaws.com/development",USER_POOL_ID:"us-east-1_UvVeNoe5z",CLIENT_ID:"6hdrpk1j20qmjhfdiga31uia80",IDENTITY_POOL_ID:"us-east-1:60250bd7-bc76-4ab7-8813-2369461cb881"};return e}();
!function(){function e(e,t,o,n){function r(e){t.localStorage.user=JSON.stringify({name:e.name,email:e.email,username:e["cognito:username"],identityId:e.sub}),t.localStorage.isLoggedIn=!0}function s(){t.localStorage.clear(),t.localStorage.isLoggedIn=!1}function a(){var e={UserPoolId:n.USER_POOL_ID,ClientId:n.CLIENT_ID},t=new AWSCognito.CognitoIdentityServiceProvider.CognitoUserPool(e);return t}function u(e,t){var o={Username:e,Password:t},n=new AWSCognito.CognitoIdentityServiceProvider.AuthenticationDetails(o);return n}function c(e,t){var o={Username:e,Pool:t},n=new AWSCognito.CognitoIdentityServiceProvider.CognitoUser(o);return n}function l(e,t){var o={Name:e,Value:t},n=new AWSCognito.CognitoIdentityServiceProvider.CognitoUserAttribute(o);return n}function g(e,t){var o,n=[];for(var r in t)o=e(r,t[r]),n.push(o);return n}function d(e){logins={};var t="cognito-idp."+n.REGION+".amazonaws.com/"+n.USER_POOL_ID;return logins[t]=e,AWS.config.update({region:n.REGION}),AWS.config.credentials=new AWS.CognitoIdentityCredentials({IdentityPoolId:n.IDENTITY_POOL_ID,Logins:logins}),AWS.config.credentials.getPromise()}return getCurrentIdentityId=function(e){if(!e){var t=getCurrentUserFromLocalStorage();e=t.idToken.getJwtToken()}var o=e.split(".")[1];return JSON.parse(atob(o)).sub},getUserFromLocalStorage=function(e){var t=c(e,a());null!=t&&t.getSession(function(e,t){return e?void alert(e):void console.log("session validity: "+t.isValid())})},deleteCognitoUser=function(){var e=a().getCurrentUser();e.deleteUser(function(e,t){return e?void alert(e):void console.log("call result: "+t)})},authenticateViaFB=function(){var e=o.defer();return FB.login(function(t){t.authResponse?(AWS.config.credentials=new AWS.CognitoIdentityCredentials({IdentityPoolId:n.IDENTITY_POOL_ID,Logins:{"graph.facebook.com":t.authResponse.accessToken}}),e.resolve()):e.reject("There was a problem logging in with Facebook.")}),e.promise},authenticateCognitoUser=function(e,t){var n=u(e,t),i=c(e,a()),s=o.defer();return i.authenticateUser(n,{onSuccess:function(e){var t=JSON.parse(atob(e.idToken.jwtToken.split(".")[1]));r(t),console.log(t),s.resolve(e)},onFailure:function(e){s.reject(e)},newPasswordRequired:function(e,t){console.log(e,t)}}),s.promise},signupForApplication=function(e,t,n){console.log(e,t,n);var r=o.defer(),i=g(l,{email:e,name:t});console.log(i);return a().signUp(e,n,i,null,function(e,t){e?r.reject(e):r.resolve(t)}),r.promise},updateAttributesOnUser=function(e,t){var o=g(l,t),n=c(e,a());n.updateAttributes(o,function(e,t){return e?void alert(e):void console.log("call result: "+t)})},deleteUserAttributes=function(e,t){e.deleteAttributes(t,function(e,t){return e?void alert(e):void console.log("call result: "+t)})},verifyUserAttribute=function(e,t){e.getAttributeVerificationCode(t,{onSuccess:function(e){console.log("call result: "+e)},onFailure:function(e){alert(e)},inputVerificationCode:function(){var o=prompt("Please input verification code: ","");e.verifyAttribute(t,o,this)}})},retrieveUserAttributes=function(e){e.getUserAttributes(function(e,t){if(e)return void alert(e);for(i=0;i<t.length;i++)console.log("attribute "+t[i].getName()+" has value "+t[i].getValue())})},resendConfirmationCode=function(e){e.resendConfirmationCode||(e=c(e,a())),e.resendConfirmationCode(function(e,t){return!e||void console.log(e)})},confirmRegistration=function(e,t){e.confirmRegistration(t,!0,function(e,t){return e?void alert(e):void alert(t)})},changePassword=function(e,t,n){var r=o.defer(),i=c(e,a());return null!=i?i.getSession(function(e,o){e?r.reject(e):i.changePassword(t,n,function(e,t){e?r.reject(e):r.resolve(t)})}):r.reject("You are not logged in."),r.promise},forgotPassword=function(e){var t=o.defer(),n=c(e,a());return n.forgotPassword({onSuccess:function(e){console.log("forgotPassword success... for some reason the email didn't send..."),console.log(e),t.reject(e)},onFailure:function(e){console.log(e),t.reject(e)},inputVerificationCode:function(e){console.log("Code sent to:"),console.log(e),t.resolve("email sent")}}),t.promise},setNewPassword=function(e,t,n){var r=c(e,a()),i=o.defer();return r.confirmPassword(t,n,{onSuccess:function(e){i.resolve()},onFailure:function(e){console.log(e),i.reject(e)}}),i.promise},deleteUser=function(e){e.deleteUser(function(e,t){return e?void alert(e):void console.log("call result: "+t)})},signUserOut=function(e){null!=e&&(s(),e.signOut())},signCurrentUserOut=function(){var e=a().getCurrentUser();null!=e&&(e.signOut(),s())},signUserOutGlobally=function(e){s(),e.globalSignOut()},getCurrentUserFromLocalStorage=function(e){var t=a().getCurrentUser();return null!=t?t.getSession(function(t,o){return t?(console.log(t),!1):(e&&e(o),o)}):(console.log("You are not logged in"),!1)},isLoggedIn=function(){return"true"==t.localStorage.isLoggedIn},confirmRegisteredUnauthenticatedUser=function(e,t){var n=c(e,a()),r=o.defer();return n.confirmRegistration(t,!0,function(e,t){e?r.reject(e):r.resolve(t)}),r.promise},saveImageTos3=function(e,t,r){function i(e){for(var t=atob(e.split(",")[1]),o=[],n=0;n<t.length;n++)o.push(t.charCodeAt(n));return new Blob([new Uint8Array(o)],{type:"image/jpeg"})}var s=o.defer();return d(t.idToken.jwtToken).then(function(){var t=i(e),o="blue-delta-api-development-stack-userdatabucket-12z57hiicf3xy",a=new AWS.S3({region:n.REGION,params:{Bucket:o}}),u={Key:AWS.config.credentials.identityId+"/"+r,Body:t};a.upload(u,function(e,t){e?s.reject(e):s.resolve(t.Location)})},function(e){s.reject(e)}),s.promise},{getCurrentIdentityId:getCurrentIdentityId,authenticateViaFB:authenticateViaFB,getUserFromLocalStorage:getUserFromLocalStorage,deleteCognitoUser:deleteCognitoUser,authenticateCognitoUser:authenticateCognitoUser,signupForApplication:signupForApplication,updateAttributesOnUser:updateAttributesOnUser,deleteUserAttributes:deleteUserAttributes,verifyUserAttribute:verifyUserAttribute,retrieveUserAttributes:retrieveUserAttributes,resendConfirmationCode:resendConfirmationCode,confirmRegistration:confirmRegistration,changePassword:changePassword,forgotPassword:forgotPassword,setNewPassword:setNewPassword,deleteUser:deleteUser,signUserOut:signUserOut,signUserOutGlobally:signUserOutGlobally,getCurrentUserFromLocalStorage:getCurrentUserFromLocalStorage,confirmRegisteredUnauthenticatedUser:confirmRegisteredUnauthenticatedUser,signCurrentUserOut:signCurrentUserOut,saveImageTos3:saveImageTos3,isLoggedIn:isLoggedIn}}angular.module("bdApp").service("aws",e),e.$inject=["$http","$window","$q","AWSConfig"]}();
!function(){function t(t,e,a,n,r,o,i){t._thirdParty=t._thirdParty||{},t._thirdParty.BlueDeltaApi=new API.Client.DefaultApi(angular.injector(["ng"]).get("$http"),angular.injector(["ng"]).get("$httpParamSerializer"),angular.injector(["ng"]));var s=t._thirdParty.BlueDeltaApi;for(s.jsonData={},setupJsonData=function(t){a.get("http://bluedelta-data.s3-website-us-east-1.amazonaws.com/data/"+t+".json").then(function(e){s.jsonData[t]=e.data})},jsonDataKeys=["style","thread","button","fabric","gender","tailors"],d=0;d<jsonDataKeys.length;d++)setupJsonData(jsonDataKeys[d]);s.getJsonData=function(){return this.jsonData};s.jeanKeyToDataKey=function(t){var e=!1;switch(!0){case t.indexOf("thread")>-1:e="threads";break;case"gender"==t||"style"==t||"fabric"==t:e=t+"s"}return e},s.dataLookup=function(t,e,a){if(a=a||null,"undefined"==typeof t||"undefined"==typeof e)return!1;var n=s.jsonData[t];return dataById=r("filter")(n,{id:e}),"undefined"!=typeof dataById&&(selected=dataById[0],a?selected[a]:selected)};var u=function(t){var e=JSON.stringify(t);return e=e.replace(/\"\"/g,null),t=JSON.parse(e)};return s.setupHeaders=function(){var t=i.getCurrentUserFromLocalStorage();this.defaultHeaders_.Authorization=t.idToken.getJwtToken();var e=t.idToken.jwtToken.split(".")[1],a=JSON.parse(atob(e)).sub;return a},s.call=function(t,a,n,r){console.log("running "+t);var o=this;i.getCurrentUserFromLocalStorage(function(i){o.defaultHeaders_.Authorization=i.idToken.getJwtToken(),Array.isArray(a)||(a=[a]),o[t].apply(o,a).then(function(t){n(t),e.$$phase||e.$apply()},function(t){console.log(t),r&&r(t)})})},s.saveUser=function(t){var e=o.defer();return t=u(t),t.identityId?s.usersUpdate(t.identityId,t).then(function(t){console.log("got it"),e.resolve(t)},function(t){console.log("Error saving user:"),console.log(t),e.reject(t)}):e.reject("No identity Id"),e.promise},s}angular.module("bdApp").service("bdAPI",t),t.$inject=["$window","$rootScope","$http","$httpParamSerializer","$filter","$q","aws"]}();
!function(){function e(){return{REGION:"us-east-1",PROFILE_IMAGES_S3_BUCKET:"blue-delta-api-development-stack-userdatabucket-12z57hiicf3xy",API_ENDPOINT:"https://kd6f1omjzc.execute-api.us-east-1.amazonaws.com/development",USER_POOL_ID:"us-east-1_UvVeNoe5z",CLIENT_ID:"6hdrpk1j20qmjhfdiga31uia80",IDENTITY_POOL_ID:"us-east-1:60250bd7-bc76-4ab7-8813-2369461cb881"}}angular.module("bdApp").service("AWSConfig",e)}();
!function(){function t(t,n){var e=function(){return t.get("/api/options",{headers:{Authorization:"Bearer "+n.getToken()}})},a=function(n,e){t.get("/data/chris-jeans.json").then(function(t){t.data;for(j=0;j<t.data.length;j++)if(t.data[j].id==n){console.log("jean found");var a=t.data[j]}e(a)})},r=function(n){return t.get("/data/chris-jeans.json")},o=function(){return t.get("/data/profile.json")},i=function(){return t.get("/data/styles.json")},s=function(){return t.get("/data/threads.json")},u=function(){return t.get("/data/buttons.json")},d=function(){return t.get("/data/fabrics.json")},g=function(){return t.get("/data/genders.json")};return{getJeanById:a,getJeansByUser:r,getProfile:o,getOptions:e,getStyles:i,getThreads:s,getHardware:u,getFabrics:d,getGenders:g}}angular.module("bdApp").service("meanData",t),t.$inject=["$http","authentication"]}();
!function(){function e(e,t,r,a,n,o,s){function c(e){switch(e){case"g":return"gender";case"s":return"style";case"f":return"fabric";case"tt":return"top_thread";case"tb":return"bottom_thread";case"ta":return"accent_thread";default:return!1}}function d(e){switch(e){case"gender":return"g";case"style":return"s";case"fabric":return"f";case"top_thread":return"tt";case"bottom_thread":return"tb";case"accent_thread":return"ta";default:return!1}}function u(e){return a(function(t,r){var a=new Image;a.crossOrigin="",a.src=e,a.onload=function(){t(a)},a.onerror=function(e){r(e)}})}function f(e,t,r){for(i=0;i<r.length;i++){var a=r[i];a.src.indexOf("/"+e+"/")>-1&&t.drawImage(a,0,0,600,696)}}var l=function(e,t){var r=o[e];if(!r)return!1;for(i=0;i<r.length;i++)if(r[i][e+"Id"]==t)return r[i]},h={};set=function(e,t){h[e]=t,this.saved=!1},createNew=function(e){e&&e.constructor==Object?h={gender:e.gender,style:e.style,fabric:e.fabric.fabricId,accent_thread:e.accent_thread.threadId,top_thread:e.top_thread.threadId,bottom_thread:e.bottom_thread.threadId}:(h={gender:1,style:1,fabric:l("fabric",1004),accent_thread:l("thread",1),top_thread:l("thread",1),bottom_thread:l("thread",1)},h.saved=!1)},reset=function(){createNew()};var g=function(t){var o=a.defer();if(t){for(prop in t)t.hasOwnProperty(prop)&&set(prop,t[prop]);o.resolve(h)}else if(e.jeanId&&!e.userId){if(createNew(),e.jeanId.indexOf(":")>0){h=e.jeanId.split(":");for(var s=0;s<h.length;s++){var d=h[s].match(/([A-Za-z]+)([0-9]+)/);if(d){var i=c(d[1]);i&&(h[i]=parseInt(d[2]))}}}o.resolve(h)}else e.jeanId&&e.userId?(console.log(e.userId,e.jeanId),r.jeansGet(e.userId,e.jeanId).then(function(t){var a=t.data,s=n.getCurrentUserFromLocalStorage();if(s){var c=r.setupHeaders(s);if(c==e.userId)for(prop in a)a.hasOwnProperty(prop)&&set(prop,a[prop]);else createNew(a)}else createNew(a);o.resolve(h)},function(e){console.log(e),createNew(),o.resolve(h)})):Object.keys(h).length>0?o.resolve(h):0===Object.keys(h).length&&h.constructor===Object&&(createNew(),o.resolve(h));return o.promise},p=function(){return h},b=function(e){var t=document.createElement("canvas");t.width=600,t.height=600;for(var r=t.getContext("2d"),n=[],o=["http://bluedelta-data.s3-website-us-east-1.amazonaws.com/images/components/fabric/g"+e.gender+"/s2/f"+e.fabric.fabricId+".jpg","http://bluedelta-data.s3-website-us-east-1.amazonaws.com/images/components/thread/g"+e.gender+"/s2/tb/"+e.bottom_thread.threadId+".png","http://bluedelta-data.s3-website-us-east-1.amazonaws.com/images/components/thread/g"+e.gender+"/s2/tt/"+e.top_thread.threadId+".png","http://bluedelta-data.s3-website-us-east-1.amazonaws.com/images/components/thread/g"+e.gender+"/s2/ta/"+e.accent_thread.threadId+".png"],s=0;s<o.length;s++)n.push(u(o[s],r));return a.all(n).then(function(e){console.log("all images loaded"),f("fabric",r,e),f("tb",r,e),f("tt",r,e),f("ta",r,e);var a=t.toDataURL("image/jpeg");return a},function(e){console.log(e)})};getDataCode=function(){var e="";for(var t in h)if(h.hasOwnProperty(t)){var r=h[t];if("object"==typeof r){var a=t+"Id";a.indexOf("thread")>-1&&(a="threadId"),r=r[a]}var n=d(t);n&&(e+="_"+n+r)}return e=e.replace(/(^[_\s]+)|([_\s]+$)/g,"")};var m=function(e,t,a){var o=n.getCurrentUserFromLocalStorage();r.defaultHeaders_.Authorization=o.idToken.getJwtToken(),r.jeansDelete(e,t).then(function(e){a&&a(e)},function(e){console.log(e)})},v=function(){console.log("saving jean...");var e=a.defer(),t=this,r=t.get(),n=t.getDataCode();n+=".jpg";this.createThumb(r).then(function(t){r.blob=t,console.log(t),s.call("createMyJean",r,function(t){console.log("We have created the jean"),e.resolve(t)},function(t){e.reject(t)})},function(t){e.reject(t)});return e.promise};return{dataLookup:l,deleter:m,save:v,get:p,setup:g,reset:reset,set:set,createNew:createNew,getDataCode:getDataCode,createThumb:b}}angular.module("bdApp").service("jean",["$routeParams","$window","bdAPI","$q","aws","jsonData","api",e])}();

!function(){function e(){var e={},n={message:"",type:"loading",icon:"fa-circle-o-notch fa-spin",active:!1},o=function(o,c,i){e.active=!0,e.message=o||n.message,e.type=c||n.type,e.icon=i||n.icon},c=function(){e.active=!1},i=function(){return e};return{get:i,show:o,hide:c}}angular.module("bdApp").service("loader",["$rootScope",e])}();
!function(){function e(){var e={message:"",type:""},n=function(n,t){e.message=n,e.type=t},t=function(){e.message="",e.type=""},s=function(){return e};return{get:s,set:n,reset:t}}angular.module("bdApp").service("messages",e)}();
!function(){function n(n){var o={},r=function(){for(var n in o)o.hasOwnProperty(n)&&(o[n]=!1)},e=function(r,e){if(o[r]){var e=e||o[r];o[r]=e}else o[r]=!0,n.$broadcast("popupChange")},t=function(){return o};return{get:t,set:e,closeAll:r}}angular.module("bdApp").service("popups",["$rootScope",n])}();
function preloaderFunc(t,e){function i(e){this.imageLocations=e,this.imageCount=this.imageLocations.length,this.loadCount=0,this.errorCount=0,this.states={PENDING:1,LOADING:2,RESOLVED:3,REJECTED:4},this.state=this.states.PENDING,this.deferred=t.defer(),this.promise=this.deferred.promise}return i.preloadImages=function(t){var e=new i(t);return e.load()},i.prototype={constructor:i,isInitiated:function(){return this.state!==this.states.PENDING},isRejected:function(){return this.state===this.states.REJECTED},isResolved:function(){return this.state===this.states.RESOLVED},load:function(){if(this.isInitiated())return this.promise;this.state=this.states.LOADING;for(var t=0;t<this.imageCount;t++)this.loadImageLocation(this.imageLocations[t]);return this.promise},handleImageError:function(t){this.errorCount++,this.isRejected()||(this.state=this.states.REJECTED,this.deferred.reject(t))},handleImageLoad:function(t){this.loadCount++,this.isRejected()||(this.deferred.notify({percent:Math.ceil(this.loadCount/this.imageCount*100),imageLocation:t}),this.loadCount===this.imageCount&&(this.state=this.states.RESOLVED,this.deferred.resolve(this.imageLocations)))},loadImageLocation:function(t){var i=this,s=angular.element(new Image).bind("load",function(t){e.$apply(function(){i.handleImageLoad(t.target.src),i=s=t=null})}).bind("error",function(t){e.$apply(function(){i.handleImageError(t.target.src),i=s=t=null})}).attr("src",t)}},i}angular.module("bdApp").factory("preloader",preloaderFunc),preloaderFunc.$inject=["$q","$rootScope"];
!function(){function o(o,e,n){var t={},c=function(){return console.log("Here"),!!e.localStorage.getItem("bdAccessToken")},l=function(o,e){if(null==o)return!1;if("object"==typeof o){console.log("setting whole user");var n=o;for(obKey in n)n.hasOwnProperty(obKey)&&(t[obKey]=o[obKey])}else t[o]=e;return t},r=function(){n.call("getCurrentUser",{},function(o){console.log(o),l(o),console.log(t)})},s=function(o,t,c,l){n.login(o,t).success(function(o){console.log(o),e.localStorage.setItem("bdAccessToken",o.access_token),c&&c(o)}).error(function(o){console.log(o),l&&l(o)})},u=function(){e.localStorage.removeItem("bdAccessToken"),t={},console.log("logged out"),o.path("/login")};return{get:function(){return t},isLoggedIn:c,set:l,login:s,logout:u,setup:r}}angular.module("bdApp").service("Nuser",o),o.$inject=["$location","$window","api"]}();
!function(){function e(){return{restrict:"EA",replace:!0,template:'<ng-include src="templatePath"/>',scope:{click:"=?",data:"="},link:function(e,t,a){console.log(a);var c=a.template?a.template:"jean-card";e.templatePath="/directives/jean-card/"+c+".template.html"}}}angular.module("bdApp").directive("jeanCard",e)}();
!function(){function e(e,t,o,r,l,n){function a(e,t,o){e=e[0],t=t-e.offsetWidth/2+40;var r=e.scrollWidth-e.offsetWidth;t>=r&&(t=r-1),t==r&&(t=r-1);var l=Math.ceil(o/15),n=t-e.scrollLeft,a=n/l,c=e.scrollLeft<t?function(e,t){return e<=t-1}:function(e,t){return e>=t+1},s=setInterval(function(){if(c(e.scrollLeft,t)){var o=e.scrollLeft+a;o>=r&&(o=r-1),e.scrollLeft=o}else clearInterval(s)},15)}var c=this;c.popups=n.get(),c.jeanData=l.get(),c.breakPoint=800,c.selectorCoords={top:0,left:0},e.$watch("active",function(l,n){1==l&&o(function(){var o=c.jeanData[e.step.jeanKey];"object"==typeof o&&(o=o[e.step.dataKey+"Id"]);var l=e.step.jeanKey+"_"+o,n=angular.element(document.querySelector("#"+l));c.selectorCoords.top=n.prop("offsetTop"),c.selectorCoords.left=n.prop("offsetLeft");var a=angular.element(document.querySelector("#"+e.step.jeanKey+"-selector"));if(a.css({top:c.selectorCoords.top+"px",left:c.selectorCoords.left+"px"}),r.innerWidth<c.breakPoint){var s=angular.element(t[0].querySelector(".chooser-grid")),p=s[0]?c.selectorCoords.left-s[0].offsetWidth/2+40:0;s.prop("scrollLeft",p)}else{var s=angular.element(t[0]);s.prop("scrollTop",c.selectorCoords.top-15)}},200)}),c.selectAttr=function(e,t,l,n){var s=angular.element(document.querySelector("#"+l+"-chooser")),n=angular.element(document.querySelector("#"+l+"-selector")),p=angular.element(e.target).prop("offsetTop"),f=angular.element(e.target).prop("offsetLeft"),u=angular.element(document.querySelectorAll("#item-title"));u.css({right:"-400px",opacity:0}),n.css({top:p+"px",left:f+"px"}),c.selectorCoords={top:p,left:f},r.innerWidth<c.breakPoint&&a(s,f,200),o(function(){u.css({right:"15px",opacity:1}),c.jeanData[l]=t},200)},c.jeanSet=function(e,t){c.jeanData[e]=t}}angular.module("bdApp").controller("chooserCtrl",e),e.$inject=["$scope","$element","$timeout","$window","jean","popups"]}();
!function(){function e(){return{restrict:"EA",templateUrl:"/directives/choosers/chooser.template.html",controller:"chooserCtrl as chvm",scope:{step:"=",dataset:"=",active:"="}}}angular.module("bdApp").directive("chooser",e)}();
!function(){angular.module("bdApp").directive("fabricChooser",["$window",function(e){return{restrict:"EA",template:'<div class="fabric-chooser-container" ng-include="viewUrl"></div>',controller:"chooserCtrl as chvm",scope:{step:"=",dataset:"=",active:"="},link:function(i){function t(){var t=e.innerWidth;t<i.breakPoint?i.viewUrl="/directives/choosers/fabric-chooser.template-mobile.html":t>=i.breakPoint&&(i.viewUrl="/directives/choosers/fabric-chooser.template-desk.html")}i.breakPoint=800,e.onresize=function(){t(),i.$apply()},t(),i.weightFilter=function(e,i){return function(t){return!(e&&t.weight<e)&&!(i&&t.weight>i)}}}}}])}();
!function(){function e(){return{restrict:"EA",templateUrl:"/directives/choosers/gender-chooser.template.html",controller:"chooserCtrl as chvm",scope:{step:"=",dataset:"=",active:"="}}}angular.module("bdApp").directive("genderChooser",e)}();
!function(){function e(){return{restrict:"EA",templateUrl:"/directives/choosers/style-chooser.template.html",controller:"chooserCtrl as chvm",scope:{step:"=",dataset:"=",active:"="},link:function(e){e.checkGenderFilter=function(e){return function(t){return!!t["images_"+e]}}}}}angular.module("bdApp").directive("styleChooser",e)}();
!function(){function t(t,e,o,r){var n=this;n.centerPan=!1,n.zoom=!1,n.pan={x:50,y:30},n.isMobile=function(){return t.innerWidth<800},n.toggleZoom=function(){n.zoom=!n.zoom},n.touchEnd=function(){n.dragTracker={x:0,y:0},e.$apply()},n.returnPan=function(){return!n.isMobile()&&(n.pan="50% 30% 0",n.centerPan=!0,images=angular.element(document.querySelectorAll("#zoom-frame img")),void setTimeout(function(){images.css({"transform-origin":n.pan})},200))},n.touchStart=function(t){n.swipeStart={x:t.touches[0].clientX,y:t.touches[0].clientY},n.swipe={}},n.zoomDrag={x:0,y:0},n.dragTracker={x:0,y:0},n.touchMove=function(t){var o=angular.element(document.querySelectorAll("#zoom-frame img"));if(!n.isMobile())return!1;if(!n.zoom)return!1;t.preventDefault();var r=t.touches[0],i=r.target,a={x:r.clientX-n.swipeStart.x,y:r.clientY-n.swipeStart.y},c=a.x-n.dragTracker.x,l=a.y-n.dragTracker.y,c=c/i.clientWidth*100+n.zoomDrag.x,l=l/i.clientHeight*100+n.zoomDrag.y,g={y:{},x:{}};g.y.top=60,g.y.bottom=-90,g.x.left=-120,g.x.right=90,l>g.y.top&&(l=g.y.top),l<g.y.bottom&&(l=g.y.bottom),c<g.x.left&&(c=g.x.left),c>g.x.right&&(c=g.x.right);var m={x:c,y:l};n.zoomDrag=m;var f=-c+"% "+-l+"% 0";o.css({"transform-origin":f}),n.dragTracker=a,e.$apply()},n.dragPan=function(t,e){if(console.log(e.direction),!n.isMobile())return!1;if(!n.zoom)return!1;var o=angular.element(document.querySelectorAll("#zoom-frame img")),r=(window.innerHeight,o[0].height,{width:e.target.clientWidth,height:e.target.clientHeight}),i={x:e.deltaX,y:e.deltaY},a=i.x-n.dragTracker.x,c=i.y-n.dragTracker.y;console.log(a,c);var a=Math.abs(a)/r.width*100;a=i.x<0?-a:a;var c=Math.abs(c)/r.height*100;c=i.y<0?-c:c,a+=n.zoomDrag.x,c+=n.zoomDrag.y;var l={y:{},x:{}};l.y.top=60,l.y.bottom=-90,l.x.left=-150,l.x.right=60,c>l.y.top&&(c=l.y.top),c<l.y.bottom&&(c=l.y.bottom),a<l.x.left&&(a=l.x.left),a>l.x.right&&(a=l.x.right);var g={x:a,y:c};console.log(g),n.zoomDrag=g;var m=-a+"% "+-c+"% 0";o.css({"transform-origin":m}),n.dragTracker=e.isFinal?{x:0,y:0}:i},n.scanImage=function(e,o){setTimeout(function(){n.centerPan=!1},200),frame=angular.element(document.querySelector("#zoom-frame"))[0],fWidth=frame.clientWidth,fHeight=frame.clientHeight,rect=frame.getBoundingClientRect(),rootDoc=frame.ownerDocument.documentElement,offsetT=rect.top+t.pageYOffset-rootDoc.clientTop,offsetL=rect.left+t.pageXOffset-rootDoc.clientLeft,xPosition=(e-offsetL)/fWidth*100,yPosition=(o-offsetT)/fHeight*100,t.innerWidth<n.breakPoint?pan=100-xPosition+"% "+(100-yPosition)+"% 0":pan=xPosition+"% "+yPosition+"% 0",n.pan=pan,images=angular.element(document.querySelectorAll("#zoom-frame img")),images.css({"transform-origin":pan})},n.trackMouse=function(t){n.scanImage(t.pageX,t.pageY)}}angular.module("bdApp").controller("istackCtrl",t),t.$inject=["$window","$scope","$q","jean"]}();
!function(){function t(){return{restrict:"AE",templateUrl:"/directives/image-stack/image-stack.template.html",controller:"istackCtrl as isvm",scope:{jeanData:"="},link:function(t,n,c,o){n.on("touchstart",function(n){t.isvm.touchStart(n)}),n.on("touchmove",function(n){t.isvm.touchMove(n)}),n.on("touchend",function(n){t.isvm.touchEnd(n)})}}}angular.module("bdApp").directive("imageStack",t)}();
!function(){function e(e,i,n,r){function o(a){a=a||!0,e.editAdd={},e.model={},a&&(e.active=!1)}function t(a){e.user.address.splice(a,1)}e.editing=!1,e.active=!1,e.addForm={},e.model={};e.choosePrimary=function(i){for(a=0;a<e.user.address.length;a++)e.user.address[a].primary=a==i;n.saveUser(e.user).then(function(a){console.log("saved")})},e.startEditing=function(){e.user.address=i("orderBy")(e.user.address,"-primary"),e.editing=!0},e.stopEditing=function(){e.editing=!1},e.editAdd={},e.open=function(a){e.active=!0,e.user.address||(e.user.address=[]),"undefined"==typeof a?(e.model={},e.editAdd.index=e.user.address.push(e.model)-1,e.editAdd.data=null):(e.model=e.user.address[a],e.editAdd.index=a,e.editAdd.data=angular.copy(e.model))},e.clear=function(){var a=e.editAdd.data;null==a?t(e.editAdd.index):e.user.address[e.editAdd.index]=e.editAdd.data,o()},e.remove=function(a){if(e.user.address.length<2)return r.set("You can't remove your last address","error"),!1;var i=e.user.address[a].primary;t(a),i&&e.choosePrimary(0),n.saveUser(e.user)},e.save=function(){var a=e.user.address.filter(function(a){return 1==a.primary});a.length||(e.user.address[0].primary=!0),n.saveUser(e.user).then(function(a){e.newAdd=null,e.active=!1,e.model={},e.$apply()})},e.states=[{name:"Alabama",abbreviation:"AL"},{name:"Alaska",abbreviation:"AK"},{name:"Arizona",abbreviation:"AZ"},{name:"Arkansas",abbreviation:"AR"},{name:"California",abbreviation:"CA"},{name:"Colorado",abbreviation:"CO"},{name:"Connecticut",abbreviation:"CT"},{name:"Delaware",abbreviation:"DE"},{name:"District Of Columbia",abbreviation:"DC"},{name:"Florida",abbreviation:"FL"},{name:"Georgia",abbreviation:"GA"},{name:"Hawaii",abbreviation:"HI"},{name:"Idaho",abbreviation:"ID"},{name:"Illinois",abbreviation:"IL"},{name:"Indiana",abbreviation:"IN"},{name:"Iowa",abbreviation:"IA"},{name:"Kansas",abbreviation:"KS"},{name:"Kentucky",abbreviation:"KY"},{name:"Louisiana",abbreviation:"LA"},{name:"Maine",abbreviation:"ME"},{name:"Maryland",abbreviation:"MD"},{name:"Massachusetts",abbreviation:"MA"},{name:"Michigan",abbreviation:"MI"},{name:"Minnesota",abbreviation:"MN"},{name:"Mississippi",abbreviation:"MS"},{name:"Missouri",abbreviation:"MO"},{name:"Montana",abbreviation:"MT"},{name:"Nebraska",abbreviation:"NE"},{name:"Nevada",abbreviation:"NV"},{name:"New Hampshire",abbreviation:"NH"},{name:"New Jersey",abbreviation:"NJ"},{name:"New Mexico",abbreviation:"NM"},{name:"New York",abbreviation:"NY"},{name:"North Carolina",abbreviation:"NC"},{name:"North Dakota",abbreviation:"ND"},{name:"Ohio",abbreviation:"OH"},{name:"Oklahoma",abbreviation:"OK"},{name:"Oregon",abbreviation:"OR"},{name:"Pennsylvania",abbreviation:"PA"},{name:"Rhode Island",abbreviation:"RI"},{name:"South Carolina",abbreviation:"SC"},{name:"South Dakota",abbreviation:"SD"},{name:"Tennessee",abbreviation:"TN"},{name:"Texas",abbreviation:"TX"},{name:"Utah",abbreviation:"UT"},{name:"Vermont",abbreviation:"VT"},{name:"Virginia",abbreviation:"VA"},{name:"Washington",abbreviation:"WA"},{name:"West Virginia",abbreviation:"WV"},{name:"Wisconsin",abbreviation:"WI"},{name:"Wyoming",abbreviation:"WY"}]}angular.module("bdApp").controller("addressChoiceCtrl",e),e.$inject=["$scope","$filter","bdAPI","messages"]}();
!function(){function e(){return{restrict:"AE",templateUrl:"/directives/address-choice/address-choice.template.html",controller:"addressChoiceCtrl as adcvm",scope:{user:"="}}}angular.module("bdApp").directive("addressChoice",e)}();
!function(){angular.module("bdApp").directive("jeanList",["jean","jsonData",function(e,t){return{restrict:"EA",templateUrl:"/directives/jean-list/jean-list.template.html",scope:{fields:"=?",jean:"=?"},link:function(n){n.dataBank=t,n.jean=n.jean||e.get();var a=["fabric","accent_thread","top_thread","bottom_thread","gender","style"];n.fields=n.fields||a,n.dataLookup=function(e,n,a){if("object"==typeof n)return n[a];var r=t[e];for(d=0;d<r.length;d++)if(r[d].id==n)return r[d][a]},n.filterFields=function(e){matches={};for(var t in e)e.hasOwnProperty(t)&&n.fields.indexOf(t)>=0&&(matches[t]=e[t]);return matches}}}}])}();
!function(){function e(e,r,a,t,o){function s(e){var r=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return r.test(e)}function n(e){var r=/^(?=.*[0-9])(?=.*[!@#$%^&*])[a-zA-Z0-9!@#$%^&*]{6,50}$/;return r.test(e)}var i=this;i.messages=a.get(),i.credentials={loginEmail:"",loginPassword:""},i.login=function(o,s){a.reset(),i.validateLoginForm()&&(console.log("valid"),r.login(o,s,function(){t.callback&&t.callback(),t.redirect&&e.path(t.redirect),t.callback||t.redirect||e.path("/closet")},function(e){"Incorrect username or password."==e.message&&(e.message="Incorrect Email address or password."),a.set(e.message,"error")}))},i.validateLoginForm=function(){return s(i.credentials.loginEmail)?!!i.credentials.loginPassword||(a.set("Please enter a password","error"),!1):(a.set("Please enter a valid Email address","error"),!1)},i.forgotPassword=!1,i.forgotPassword2=!1,i.forgot=function(){a.reset(),i.validateForgot()&&o.forgotPassword(i.credentials.loginEmail).then(function(e){i.forgotPassword2=!0},function(e){"Username/client id combination not found"==e.message&&(e.message="We don't have an account registered for that emial"),a.set(e.message,"error")})},i.validateForgot=function(){return!!s(i.credentials.loginEmail)||(a.set("Please enter a valid Email address","error"),!1)},i.forgot2=function(){a.reset(),i.validateForgot2()&&o.setNewPassword(i.credentials.loginEmail,i.credentials.loginVerifcation,i.credentials.newPassword).then(function(){a.set("Password reset successfully. Try logging in.","success"),i.forgotPassword=!1,i.forgotPassword2=!1},function(e){a.set(e.message,"error")})},i.validateForgot2=function(){return s(i.credentials.loginEmail)?i.credentials.loginVerifcation?(n(i.credentials.newPassword)||a.set('A valid password must: <ul><li>Be between 6 and 50 characters</li><li>Contain at least one number</li><li>Contain at least one uppercase letter</li><li>Contain at least one lowercase letter</li><li>Contain at least one special character ("!,@,#,$,%,^,&, or *")</li>'),i.credentials.newPassword===i.credentials.newPasswordConfirm||(a.set("Password and Confirmation do not match","error"),!1)):(a.set("Please enter your verifcation code","error"),!1):(a.set("Please enter a valid Email address","error"),!1)},i.loginFB=function(){o.authenticateViaFB().then(function(r){e.path("/closet")},function(e){a.set(e.message,"error")})}}angular.module("bdApp").controller("loginFormCtrl",e),e.$inject=["$location","user","messages","$scope","aws"]}();
!function(){function r(){return{restrict:"AE",templateUrl:"/directives/login-form/login-form.template.html",controller:"loginFormCtrl as logvm",scope:{redirect:"=?",callback:"=?"}}}angular.module("bdApp").directive("loginForm",r)}();
!function(){function o(o,e,n,t,r,a){var i=this;i.loader=a.get("loader"),i.saver=a.get("saver"),i.drops={},i.drops.acct=!1,i.mobileMenu=!1,i.isLoggedIn=t.isLoggedIn(),i.logout=function(){t.logout()}}angular.module("bdApp").controller("navigationCtrl",o),o.$inject=["$location","$route","popups","user","$window","loader"]}();
!function(){function t(){return{restrict:"EA",templateUrl:"/directives/navigation/navigation.template.html",controller:"navigationCtrl as navvm"}}angular.module("bdApp").directive("navigation",t)}();
!function(){function e(e,a,r,t,s){var i=this;i.messages=s.get(),i.credentials={first_name:"",last_name:"",email:"",password:""},i.validateRegistrationForm=function(){function e(e){var a=/^(?=.*[0-9])(?=.*[!@#$%^&*])[a-zA-Z0-9!@#$%^&*]{6,50}$/;return a.test(e)}function a(e){var a=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return a.test(e)}return i.credentials.email&&i.credentials.first_name&&i.credentials.last_name&&i.credentials.password&&i.credentials.passwordConfirm?(e(i.credentials.password)||s.set('A valid password must: <ul><li>Be between 6 and 50 characters</li><li>Contain at least one number</li><li>Contain at least one uppercase letter</li><li>Contain at least one lowercase letter</li><li>Contain at least one special character ("!,@,#,$,%,^,&, or *")</li>'),i.credentials.password!==i.credentials.passwordConfirm?(s.set("Password and Confirmation do not match","error"),!1):!!a(i.credentials.email)||(s.set("Please Enter a valid E-mail address","error"),!1)):(s.set("All fields are required","error"),!1)},i.registerUser=function(){s.reset(),i.validateRegistrationForm()&&r.register(i.credentials.email,i.credentials.password,i.credentials.first_name,i.credentials.last_name,function(r){e.callback&&e.callback(i.credentials),e.redirect&&a.path(e.redirect),e.callback||e.redirect||a.path("/closet")},function(e){s.set(e.message,"error")})}}angular.module("bdApp").controller("registerFormCtrl",e),e.$inject=["$scope","$location","user","$sce","messages"]}();
!function(){function r(){return{restrict:"AE",templateUrl:"/directives/register-form/register-form.template.html",controller:"registerFormCtrl as regvm",scope:{redirect:"=?",callback:"=?"}}}angular.module("bdApp").directive("registerForm",r)}();
!function(){function e(e,n){e.imagesLoaded=!1,n.preloadImages(e.slides).then(function(){e.imagesLoaded=!0},function(){console.log("error loading imgaes...")}),e.currentIndex=0,e.setCurrentSlideIndex=function(n){e.currentIndex=n},e.isCurrentSlideIndex=function(n){return e.currentIndex===n},e.nextSlide=function(){e.currentIndex=e.currentIndex<e.slides.length-1?++e.currentIndex:0},e.prevSlide=function(){e.currentIndex=e.currentIndex>0?--e.currentIndex:e.slides.length-1}}angular.module("bdApp").controller("sliderCtrl",e),e.$inject=["$scope","preloader"]}();
!function(){function e(){return{restrict:"EA",templateUrl:"/directives/slider/slider.template.html",controller:"sliderCtrl as slvm",scope:{slides:"=",imageClick:"&"}}}angular.module("bdApp").directive("slider",e)}();
!function(){function t(t){var e=this;e.jean=t,e.jeanToUrl=function(){var t=document.location.origin+"/customizer/d";return t+="/copy"};var o={},n="Check out my custom jeans built with Blue Delta!",r="Cras justo odio, dapibus ac facilisis in, egestas eget quam.";o.facebook=function(t,e){if(!t)return!1;var o="https://www.facebook.com/sharer/sharer.php?u="+t+"&description="+r+"&title="+n;return e&&(o+="&images="+urlencode(e)),o},o.twitter=function(t){return!!t&&"http://twitter.com/home?status="+n+"-"+t},o.email=function(t){return"mailto:?&subject="+n+"&body="+r+" - "+t},o.pinterest=function(t,e){return!t&&!e&&"https://pinterest.com/pin/create/button/?url="+t+"&media="+e+"&description="+n+"%0A"+r},e.share=function(t){var n=o[t](e.jeanToUrl());return n!==!1?"email"==t?window.open(n,"_self"):window.open(n,"","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600"):console.log("Error builiding social URL"),!1}}angular.module("bdApp").controller("socialCtrl",t),t.$inject=["jean"]}();
!function(){angular.module("bdApp").directive("socialActions",[function(){return{restrict:"EA",replace:!0,templateUrl:"/directives/social-actions/social-actions.template.html",scope:{jean:"=",display:"="},controller:"socialCtrl as sovm"}}])}();
!function(){function o(o,n){var l=this;l.user={},n.getOptions().success(function(o){console.log("admin.controller.jsln16:::"),console.log(o)}).error(function(o){console.log(o)})}angular.module("bdApp").controller("adminCtrl",o),o.$inject=["$location","meanData"]}();
!function(){function e(e,i,n,r){function o(a){a=a||!0,e.editAdd={},e.model={},a&&(e.active=!1)}function t(a){e.vm.user.address.splice(a,1)}e.editing=!1,e.active=!1,e.addForm={},e.model={};e.choosePrimary=function(i){for(a=0;a<e.vm.user.address.length;a++)e.vm.user.address[a].primary=a==i;n.saveUser(e.vm.user).then(function(a){console.log("saved")})},e.startEditing=function(){e.vm.user.address=i("orderBy")(e.vm.user.address,"-primary"),e.editing=!0},e.stopEditing=function(){e.editing=!1},e.editAdd={},e.open=function(a){e.active=!0,e.vm.user.address||(e.vm.user.address=[]),"undefined"==typeof a?(e.model={},e.editAdd.index=e.vm.user.address.push(e.model)-1,e.editAdd.data=null):(e.model=e.vm.user.address[a],e.editAdd.index=a,e.editAdd.data=angular.copy(e.model))},e.clear=function(){var a=e.editAdd.data;null==a?t(e.editAdd.index):e.vm.user.address[e.editAdd.index]=e.editAdd.data,o()},e.remove=function(a){if(e.vm.user.address.length<2)return r.set("You can't remove your last address","error"),!1;var i=e.vm.user.address[a].primary;t(a),i&&e.choosePrimary(0),n.saveUser(e.vm.user)},e.save=function(){var a=e.vm.user.address.filter(function(a){return 1==a.primary});a.length||(e.vm.user.address[0].primary=!0),n.saveUser(e.vm.user).then(function(a){e.newAdd=null,e.active=!1,e.model={},e.$apply()})},e.states=[{name:"Alabama",abbreviation:"AL"},{name:"Alaska",abbreviation:"AK"},{name:"Arizona",abbreviation:"AZ"},{name:"Arkansas",abbreviation:"AR"},{name:"California",abbreviation:"CA"},{name:"Colorado",abbreviation:"CO"},{name:"Connecticut",abbreviation:"CT"},{name:"Delaware",abbreviation:"DE"},{name:"District Of Columbia",abbreviation:"DC"},{name:"Florida",abbreviation:"FL"},{name:"Georgia",abbreviation:"GA"},{name:"Hawaii",abbreviation:"HI"},{name:"Idaho",abbreviation:"ID"},{name:"Illinois",abbreviation:"IL"},{name:"Indiana",abbreviation:"IN"},{name:"Iowa",abbreviation:"IA"},{name:"Kansas",abbreviation:"KS"},{name:"Kentucky",abbreviation:"KY"},{name:"Louisiana",abbreviation:"LA"},{name:"Maine",abbreviation:"ME"},{name:"Maryland",abbreviation:"MD"},{name:"Massachusetts",abbreviation:"MA"},{name:"Michigan",abbreviation:"MI"},{name:"Minnesota",abbreviation:"MN"},{name:"Mississippi",abbreviation:"MS"},{name:"Missouri",abbreviation:"MO"},{name:"Montana",abbreviation:"MT"},{name:"Nebraska",abbreviation:"NE"},{name:"Nevada",abbreviation:"NV"},{name:"New Hampshire",abbreviation:"NH"},{name:"New Jersey",abbreviation:"NJ"},{name:"New Mexico",abbreviation:"NM"},{name:"New York",abbreviation:"NY"},{name:"North Carolina",abbreviation:"NC"},{name:"North Dakota",abbreviation:"ND"},{name:"Ohio",abbreviation:"OH"},{name:"Oklahoma",abbreviation:"OK"},{name:"Oregon",abbreviation:"OR"},{name:"Pennsylvania",abbreviation:"PA"},{name:"Rhode Island",abbreviation:"RI"},{name:"South Carolina",abbreviation:"SC"},{name:"South Dakota",abbreviation:"SD"},{name:"Tennessee",abbreviation:"TN"},{name:"Texas",abbreviation:"TX"},{name:"Utah",abbreviation:"UT"},{name:"Vermont",abbreviation:"VT"},{name:"Virginia",abbreviation:"VA"},{name:"Washington",abbreviation:"WA"},{name:"West Virginia",abbreviation:"WV"},{name:"Wisconsin",abbreviation:"WI"},{name:"Wyoming",abbreviation:"WY"}]}angular.module("bdApp").controller("addFormCtrl",e),e.$inject=["$scope","$filter","bdAPI","messages"]}();
!function(){function e(e,s,r,a,n,o,t,i,u,l,c){function d(e){var s=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return s.test(e)}function m(e){var s=/^\+?([0-9]{2})\)?[-. ]?([0-9]{4})[-. ]?([0-9]{4})$/;return e.match(s)}function p(e){var s=/^(?=.*[0-9])(?=.*[!@#$%^&*])[a-zA-Z0-9!@#$%^&*]{6,50}$/;return s.test(e)}function f(e){for(var s=0;s<F.user.jeans.length;s++)if(F.user.jeans[s].jeanId===e)return{index:s,data:F.user.jeans[s]}}var F=this;a.closeAll(),F.popups=a.get(),F.messages=i.get(),F.jean=r,F.data={},F.onload=function(){t.vm=F},F.userForm={},F.userForm.editing={},F.userForm.saving={},F.userForm.feedback={type:"",message:""},F.userForm.cancel=function(e){F.userForm.editing[e]=!1,F.user[e]=F.userForm.data[e]},F.userForm.validate=function(e,s){return"email"==e?!!d(s)||(i.set("Please enter a valid email address","error"),!1):"phoneNumber"!=e||(!!m(s)||(i.set("Please enter a valid phone number","error"),!1))},F.userForm.save=function(e){F.userForm.validate(e,F.user[e])&&(console.log(F.user),l.update(F.user,function(s){F.userForm.saving[e]=!1,F.userForm.editing[e]=!1,F.userForm.data[e]=F.user[e]}))},F.orders=[],c.call("getMyOrders",{},function(e){console.log(e),F.orders=e}),F.jeans=[],c.call("getMyJeans",{},function(e){console.log(e),F.jeans=e}),F.user=l.get(),F.passForm={editing:!1,currentPass:"",newPass:"",newPassConfirm:"",clear:function(){F.passForm.editing=!1,F.passForm.currentPass="",F.passForm.newPass="",F.passForm.newPassConfirm="",i.reset()}},F.validatePasswordForm=function(){return p(F.passForm.newPass)||i.set('A valid password must: <ul><li>Be between 6 and 50 characters</li><li>Contain at least one number</li><li>Contain at least one uppercase letter</li><li>Contain at least one lowercase letter</li><li>Contain at least one special character ("!,@,#,$,%,^,&, or *")</li>'),F.passForm.newPass===F.passForm.newPassConfirm||(i.set("New Password and Confirmation do not match","error"),!1)},F.changePassword=function(){i.reset(),F.validatePasswordForm()&&n.changePassword(F.user.email,F.passForm.currentPass,F.passForm.newPass).then(function(e){F.passForm.clear(),i.set("Password successfully changed.","success")},function(e){i.set(e.message,"error")})},F.copyJean=function(){F.jean=r.createNew(F.displayJean),e.path("/customizer")},F.displayJean={},F.selectJean=function(e){F.popups.jeanProfile=!0,F.displayJean=e},F.selectOrder=function(e){F.popups.orderProfile=!0,F.displayOrder=e,F.displayJean=e.orderItems[0].jean},F.deleteJean=function(e){r.deleter(F.user.identityId,e,function(s){var r=f(e).index;F.user.jeans.splice(r,1),t.$apply()})},F.orderJean=function(s){r.setup(s),e.path("/order/"+s.jeanId+"/"+F.user.identityId)}}angular.module("bdApp").controller("closetCtrl",e),e.$inject=["$location","$window","jean","popups","aws","bdAPI","$scope","messages","loader","user","api"]}();
!function(){function e(e,a,t,n,o,i,r,l,c,s,p,d,u,h){function f(){var e=navigator.userAgent.toLowerCase(),a=e.indexOf("android")>-1;if(a){if(0==window.orientation||180==window.orientation)return!0;if(90==window.orientation||window.orientation==-90)return!1}else{if(90==window.orientation||window.orientation==-90)return!0;if(0==window.orientation||180==window.orientation)return!1}}var g=this;g.loader=u.get(),d.reset(),g.messages=d.get(),s.closeAll(),g.popups=s.get(),l.setup().then(function(e){g.jeanData=l.get(),c.$watch(function(){return g.jeanData},function(e,a){g.updateActiveItem()},!0),c.$watch(function(){return g.data},function(e,a){g.updateActiveItem()},!0)}),g.landscape=f();var v="onorientationchange"in window,w=v?"orientationchange":"resize";window.addEventListener(w,function(){g.landscape=f(),c.$apply()},!1),g.data=h,g.activeItem={},g.updateActiveItem=function(){if(!g.jeanData)return!1;var e=g.data[g.panel[g.panelStep].dataKey],t=g.jeanData[g.panel[g.panelStep].jeanKey];if("object"==typeof t)g.activeItem=t;else{var n=a("filter")(e,{id:t});n&&(n=n[0]),g.activeItem=n||null}},g.panel=[],g.panel.push({panelTemplate:"gender-chooser",dataKey:"gender",title:"Gender",jeanKey:"gender"}),g.panel.push({panelTemplate:"style-chooser",dataKey:"style",title:"Style",jeanKey:"style"}),g.panel.push({panelTemplate:"fabric-chooser",dataKey:"fabric",title:"Fabric",jeanKey:"fabric"}),g.panel.push({panelTemplate:"chooser",dataKey:"thread",title:"Top Thread",jeanKey:"top_thread"}),g.panel.push({panelTemplate:"chooser",dataKey:"thread",title:"Bottom Thread",jeanKey:"bottom_thread"}),g.panel.push({panelTemplate:"chooser",dataKey:"thread",title:"Accent Thread",jeanKey:"accent_thread"}),g.panel.push({panelTemplate:"list",title:"Overview"}),g.panelDir="next",g.panelStep=0,g.changeStep=function(e){return!(e>=g.panel.length)&&(!(e<0)&&(void 0!==e&&(g.panelStep=e,void(e+1!=g.panel.length&&g.updateActiveItem()))))},g.orderCallback=function(){g.saveCallback(function(){n.path("/order")})},g.placeOrder=function(){return p.isLoggedIn()?void g.saveCallback(function(){n.path("/order")}):(g.authCallback=g.orderCallback,s.set("loginOrRegister",!0),!1)},g.savingBar=!1,g.newJeanName="My Jeans - 6",g.saveCallback=function(e){e=e||null,s.closeAll(),g.jeanData.name?g.runSave(e):s.set("saver",!0)},g.runSave=function(e){g.jeanData.name=g.newJeanName,g.savingBar=!0,l.save().then(function(a){e?e(a):(g.savingBar=!1,s.set("saver",!0))})},g.keepEditing=function(){var e=p.getCurrentIdentityId();n.path("/customizer/"+g.jeanData.jeanId+"/"+e)},g.goToCloset=function(){n.path("/closet")},g.startOver=function(){l.reset(),g.jeanData=l.get(),console.log(l.get()),s.closeAll()},g.saveJean=function(){return p.isLoggedIn()?void g.saveCallback():(g.authCallback=g.saveCallback,s.set("loginOrRegister",!0),!1)},g.authCallback=g.orderCallback,g.registerCallback=function(e){p.authenticateCognitoUser(e.email,e.password).then(function(e){g.authCallback()})}}angular.module("bdApp").controller("customizerCtrl",e),e.$inject=["$q","$filter","$timeout","$location","$window","$routeParams","bdAPI","jean","$scope","popups","aws","messages","loader","jsonData"]}();
!function(){function e(e,r,o,t,n,a,s,l,d){function u(e){for(var r=0;r<e.length;r++)if(1==e[r].primary)return e[r];return console.log("no address marked as primary... returning first result"),e[0]}var p=this;p.popups=t.get(),o.setup(),p.jean=o.get(),p.hasMeasurements=function(e){console.log("HM Filter");var r=e.orderItems[0].jean.measurement;return Object.keys(r).length&&r.waist};var c=a.getCurrentUserFromLocalStorage(),g=s.setupHeaders(c);p.jean.jeanId&&g&&r.path("/order/"+p.jean.jeanId+"/"+g),p.orderForm={},p.orderForm.step=1,p.order={userId:g,price:null,shippingAddress:null,vendor:null,rep:null,status:"New",orderItems:[{jean:p.jean,tracking:null,notes:null}],timeline:null,tailor:null},p.orders=[],s.call("ordersList",100,function(e){for(console.log(e.data.items),i=0;i<e.data.items.length;i++){var r=e.data.items[i];r.userId==a.getCurrentIdentityId()&&"New"!=r.status&&p.orders.push(r)}}),p.placeOrder=function(){s.call("orderCreate",p.order,function(e){p.jean.ordered=!0,s.call("jeansUpdate",[a.getCurrentIdentityId(),p.jean.jeanId,p.jean],function(e){console.log("jeanSaved"),console.log(e)}),s.call("commentsCreate",[e.data.orderId,{message:"Order Placed"}],function(e){p.popups.orderPlaced=!0,o.reset(),p.jean=o.get(),l.$apply()})})},p.chooseFitType=function(e){p.order.orderType=e,2!=e||p.order.tailor||(p.popups.tailors=!0)},p.data=d,p.goToCloset=function(){console.log("closet"),r.path("/closet")},p.startOver=function(){r.path("/customizer")},p.orderForm.nextStep=function(){if(1==p.orderForm.step)return!!p.order.orderType&&(2!=p.order.orderType||p.order.tailor?void(p.orderForm.step=2):(p.popups.tailors=!0,!1))};var m=a.getCurrentUserFromLocalStorage();if(m){var f=s.setupHeaders(m);s.usersGet(f).then(function(e){p.user=e.data,p.order.shippingAddress=u(p.user.address),l.$apply()},function(e){console.log(e)})}else r.path("/login")}angular.module("bdApp").controller("orderCtrl",e),e.$inject=["$window","$location","jean","popups","$filter","aws","bdAPI","$scope","jsonData"]}();
!function(){function o(o,l,e,n){var t=this;for(i=0;i<e.tailors.length;i++){var a=e.tailors[i];console.log(a),n.call("postTailor",a,function(o){console.log("Created!"),console.log(o)})}t.user=l.get(),console.log(o.localStorage.getItem("bdAccessToken"))}angular.module("bdApp").controller("homeCtrl",o),o.$inject=["$window","user","jsonData","api"]}();
!function(){function e(e){var n=this;e.reset(),n.messages=e.get()}angular.module("bdApp").controller("loginCtrl",e),e.$inject=["messages"]}();
!function(){function e(e){var t=this;e.reset(),t.messages=e.get(),t.formStep=1}angular.module("bdApp").controller("registerCtrl",e),e.$inject=["messages"]}();
//# sourceMappingURL=app.min.js.map
