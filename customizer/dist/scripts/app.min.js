!function(){function e(e,r){var t=["api","$q",function(e,r){console.log("RESOLVING!!!!");var t=e.getData();if(t.loaded)return t;var l=r.defer();return e.getAppData(function(e){l.resolve(e)}),l.promise}];e.when("/",{templateUrl:"/pages/home/home.view.html",controller:"homeCtrl",controllerAs:"vm"}).when("/pay/:orderDetails",{templateUrl:"/pages/pay/pay.view.html",controller:"payCtrl",controllerAs:"vm",resolve:{apiData:t}}).when("/fitmatch/:orderDetails",{templateUrl:"/pages/fitmatch/fitmatch.view.html",controller:"fmCtrl",controllerAs:"vm",resolve:{apiData:t}}).when("/thank-you/:type",{templateUrl:"/pages/thank-you/thank-you.view.html",controller:"tyCtrl",controllerAs:"vm"}).when("/register",{templateUrl:"/pages/auth/register/register.view.html",controller:"registerCtrl",controllerAs:"vm"}).when("/login",{templateUrl:"/pages/auth/login/login.view.html",controller:"loginCtrl",controllerAs:"vm"}).when("/customer-register/:email?",{templateUrl:"/pages/auth/customer-register/customer-register.view.html",controller:"loginCtrl",controllerAs:"vm"}).when("/closet",{templateUrl:"/pages/closet/closet.view.html",controller:"closetCtrl",controllerAs:"vm",resolve:{apiData:t}}).when("/order/:dataId?/:action?",{templateUrl:"/pages/order/order.view.html",controller:"orderCtrl",controllerAs:"vm",resolve:{apiData:t}}).when("/customizer/:jeanId?/:action?",{templateUrl:"/pages/customizer/customizer.view.html",controller:"customizerCtrl",controllerAs:"vm",resolve:{apiData:t}}).when("/admin",{templateUrl:"/pages/admin/admin.view.html",controller:"adminCtrl",controllerAs:"vm"}).otherwise({redirectTo:"/"}),r.html5Mode(!0)}function r(e,r,t){t.isLoggedIn()&&t.setup(),e.$on("$routeChangeStart",function(e,l,o){for(var n=["/closet","/order"],a=!1,i=0;i<n.length;i++)r.path().includes(n[i])&&(a=!0);a&&!t.isLoggedIn()&&r.path("/login")})}angular.module("bdApp",["ngRoute","ngAnimate","ngSanitize","ngCookies","angular-gestures","user","api","sqPaymentForm"]),angular.module("bdApp").config(["$routeProvider","$locationProvider",e]).run(["$rootScope","$location","user",r]).filter("spaceless",function(){return function(e){if(e)return e.replace(/\s+/g,"-")}}).filter("scoreToSpace",function(){return function(e){if(e){var e=e.replace(/([A-Z])/g," $1");return e.replace(/_+/g," ")}}}).filter("minMax",function(e,r,t){return function(l){return!(e&&l[t]<e)&&!(r&&l[t]>r)}}).filter("displayName",function(){return function(e){return ret=e.gender?e.gender:e.name,!!ret&&ret.replace(/Raw Denim/g,"")}}),window.onload=function(){var e=document.getElementById("bdApp");angular.bootstrap(angular.element(e),["bdApp"])}}();
!function(){const e={REGION:"us-east-1",PROFILE_IMAGES_S3_BUCKET:"blue-delta-api-development-stack-userdatabucket-12z57hiicf3xy",API_ENDPOINT:"https://kd6f1omjzc.execute-api.us-east-1.amazonaws.com/development",USER_POOL_ID:"us-east-1_UvVeNoe5z",CLIENT_ID:"6hdrpk1j20qmjhfdiga31uia80",IDENTITY_POOL_ID:"us-east-1:60250bd7-bc76-4ab7-8813-2369461cb881"};return e}();
!function(){function e(e,t,a,r,n){function o(e){switch(e){case"g":return"gender_option_id";case"s":return"style_option_id";case"f":return"fabric_id";case"tt":return"top_thread_id";case"tb":return"bottom_thread_id";case"ta":return"accent_thread_id";default:return!1}}var i={};set=function(e,t){i[e]=t,this.saved=!1},createNew=function(e){e&&e.constructor==Object?i={gender_option_id:e.gender_option_id,style_option_id:e.style_option_id,fabric_id:e.fabric_id,accent_thread_id:e.accent_thread_id,top_thread_id:e.top_thread_id,bottom_thread_id:e.bottom_thread_id}:(i={gender_option_id:1,style_option_id:1,fabric_id:1704,accent_thread_id:1,top_thread_id:1,bottom_thread_id:1},i.saved=!1)},reset=function(){createNew()},buildJeanData=function(e,t){1==t&&(delete e.user_id,delete e.id,e.name&&(e.name="Copy of "+e.name));for(prop in e)e.hasOwnProperty(prop)&&set(prop,e[prop])};var d=function(e,n){var d=a.defer(),c="localhost"===t.location.hostname?"bdUserId_dev":"bdUserId",s=parseInt(t.localStorage.getItem(c)),l=!s;if(l="copy"==n||l,null!==e&&"object"==typeof e)e.user_id&&e.user_id!==s&&delete e.id,buildJeanData(e,l),d.resolve(i);else if(null!==e&&void 0!==e&&isNaN(e)){var u={};dataArr=e.split("-");for(var _=0;_<dataArr.length;_++){var f=dataArr[_].split(":"),p=o(f[0]);u[p]=f[1]}buildJeanData(u,!0),d.resolve(i)}else null!==e&&void 0!==e?r.call("getJean",e,function(e){e.user_id!==s&&(l=!0),buildJeanData(e,l),d.resolve(i)},function(e){d.reject(e)}):Object.keys(i).length>0?d.resolve(i):(createNew(),d.resolve(i));return d.promise},c=function(){return i},s=function(e,t){r.call("deleteMyJean",e,function(e){t&&t(e)})},l=function(e,t,a,o){console.log("testing for ex...");var i=t+".jpg",d="https://s3.amazonaws.com/bluedelta-data/jeans/"+i;console.log(d),n.get(d).success(function(t){console.log("IT EXISTS!!!"),e.image_url=d,e.jean_image_url=d,a&&a(e)}).error(function(t,n){console.log("ERROR>.. create an image"),r.createThumb(e).then(function(t){e.image={data:t,filename:i},a&&a(e)},function(e){o&&o(e)})})},u=function(){var e=this,t=e.get(),n=a.defer(),o=r.getDataCode(t);return l(t,o,function(e){r.call("createMyJeans",e,function(e){n.resolve(e)},function(e){n.reject(e)})}),n.promise};return{deleter:s,save:u,get:c,set:set,setup:d,reset:reset,set:set,testJeanForExistingImage:l,createNew:createNew,getDataCode:getDataCode}}angular.module("bdApp").service("jean",["$routeParams","$window","$q","api","$http",e])}();
!function(){function e(){var e={},n={message:"",type:"loading",icon:"fa-circle-o-notch fa-spin",active:!1},o=function(o,c,i){e.active=!0,e.message=o||n.message,e.type=c||n.type,e.icon=i||n.icon},c=function(){e.active=!1},i=function(){return e};return{get:i,show:o,hide:c}}angular.module("bdApp").service("loader",["$rootScope",e])}();
!function(){function e(){var e={message:"",type:""},n=function(n,t){e.message=n,e.type=t},t=function(){e.message="",e.type=""},s=function(){return e};return{get:s,set:n,reset:t}}angular.module("bdApp").service("messages",e)}();
!function(){function n(n){var o={},r=function(){for(var n in o)o.hasOwnProperty(n)&&(o[n]=!1)},e=function(r,e){if(o[r]){var e=e||o[r];o[r]=e}else o[r]=!0,n.$broadcast("popupChange")},t=function(){return o};return{get:t,set:e,closeAll:r}}angular.module("bdApp").service("popups",["$rootScope",n])}();
function preloaderFunc(t,e){function i(e){this.imageLocations=e,this.imageCount=this.imageLocations.length,this.loadCount=0,this.errorCount=0,this.states={PENDING:1,LOADING:2,RESOLVED:3,REJECTED:4},this.state=this.states.PENDING,this.deferred=t.defer(),this.promise=this.deferred.promise}return i.preloadImages=function(t){var e=new i(t);return e.load()},i.prototype={constructor:i,isInitiated:function(){return this.state!==this.states.PENDING},isRejected:function(){return this.state===this.states.REJECTED},isResolved:function(){return this.state===this.states.RESOLVED},load:function(){if(this.isInitiated())return this.promise;this.state=this.states.LOADING;for(var t=0;t<this.imageCount;t++)this.loadImageLocation(this.imageLocations[t]);return this.promise},handleImageError:function(t){this.errorCount++,this.isRejected()||(this.state=this.states.REJECTED,this.deferred.reject(t))},handleImageLoad:function(t){this.loadCount++,this.isRejected()||(this.deferred.notify({percent:Math.ceil(this.loadCount/this.imageCount*100),imageLocation:t}),this.loadCount===this.imageCount&&(this.state=this.states.RESOLVED,this.deferred.resolve(this.imageLocations)))},loadImageLocation:function(t){var i=this,s=angular.element(new Image).bind("load",function(t){e.$apply(function(){i.handleImageLoad(t.target.src),i=s=t=null})}).bind("error",function(t){e.$apply(function(){i.handleImageError(t.target.src),i=s=t=null})}).attr("src",t)}},i}angular.module("bdApp").factory("preloader",preloaderFunc),preloaderFunc.$inject=["$q","$rootScope"];
!function(){function o(o,e,n){var t={},c=function(){return console.log("Here"),!!e.localStorage.getItem("bdAccessToken")},l=function(o,e){if(null==o)return!1;if("object"==typeof o){console.log("setting whole user");var n=o;for(obKey in n)n.hasOwnProperty(obKey)&&(t[obKey]=o[obKey])}else t[o]=e;return t},r=function(){n.call("getCurrentUser",{},function(o){console.log(o),l(o),console.log(t)})},s=function(o,t,c,l){n.login(o,t).success(function(o){console.log(o),e.localStorage.setItem("bdAccessToken",o.access_token),c&&c(o)}).error(function(o){console.log(o),l&&l(o)})},u=function(){e.localStorage.removeItem("bdAccessToken"),t={},console.log("logged out"),o.path("/login")};return{get:function(){return t},isLoggedIn:c,set:l,login:s,logout:u,setup:r}}angular.module("bdApp").service("Nuser",o),o.$inject=["$location","$window","api"]}();
!function(){function e(e,n,r,o,t){function s(a){a=a||!0,e.editAdd={},e.model={},a&&(e.active=!1)}function d(a,i){var n=e.user.addresses.filter(function(e){return e[a]==i});return n[0]}e.editing=!1,e.active=!1,e.addForm={},e.model={},e.user=t.get();e.choosePrimary=function(i){for(a=0;a<e.user.addresses.length;a++){var n=e.user.addresses[a];n.primary=n.id==i.id?1:0}o.call("postMyAddress",i),e.addressObject=i},e.startEditing=function(){e.user.addresses=n("orderBy")(e.user.addresses,"-primary"),e.editing=!0},e.stopEditing=function(){e.editing=!1},e.editAdd={},e.open=function(a){e.active=!0,e.user.addresses||(e.user.addresses=[]),"undefined"==typeof a?(e.model={},e.editAdd.data=null):(e.model=e.user.addresses[a],e.editAdd.index=a,e.editAdd.data=angular.copy(e.model))},e.clear=function(){var a=e.editAdd.data;null!==a&&(e.user.addresses[e.editAdd.index]=e.editAdd.data),s()},e.remove=function(a){return e.user.addresses.length<2?(r.set("You can't remove your last address","error"),!1):void o.call("deleteMyAddress",a,function(n){for(i=0;i<e.user.addresses.length;i++){var r=e.user.addresses[i];r.id==a&&e.user.addresses.splice(i,1)}if(n.new_primary_id){var o=n.new_primary_id;address=d("id",o),address.primary=1}})},e.save=function(){var i=!e.model.id;if(console.log(e.model),i)for(e.model.primary=1,a=0;a<e.user.addresses.length;a++){var n=e.user.addresses[a];n.primary=0}o.call("postMyAddress",e.model,function(a){i&&e.user.addresses.push(a),e.active=!1,e.model={}})},e.states=[{name:"Alabama",abbreviation:"AL"},{name:"Alaska",abbreviation:"AK"},{name:"Arizona",abbreviation:"AZ"},{name:"Arkansas",abbreviation:"AR"},{name:"California",abbreviation:"CA"},{name:"Colorado",abbreviation:"CO"},{name:"Connecticut",abbreviation:"CT"},{name:"Delaware",abbreviation:"DE"},{name:"District Of Columbia",abbreviation:"DC"},{name:"Florida",abbreviation:"FL"},{name:"Georgia",abbreviation:"GA"},{name:"Hawaii",abbreviation:"HI"},{name:"Idaho",abbreviation:"ID"},{name:"Illinois",abbreviation:"IL"},{name:"Indiana",abbreviation:"IN"},{name:"Iowa",abbreviation:"IA"},{name:"Kansas",abbreviation:"KS"},{name:"Kentucky",abbreviation:"KY"},{name:"Louisiana",abbreviation:"LA"},{name:"Maine",abbreviation:"ME"},{name:"Maryland",abbreviation:"MD"},{name:"Massachusetts",abbreviation:"MA"},{name:"Michigan",abbreviation:"MI"},{name:"Minnesota",abbreviation:"MN"},{name:"Mississippi",abbreviation:"MS"},{name:"Missouri",abbreviation:"MO"},{name:"Montana",abbreviation:"MT"},{name:"Nebraska",abbreviation:"NE"},{name:"Nevada",abbreviation:"NV"},{name:"New Hampshire",abbreviation:"NH"},{name:"New Jersey",abbreviation:"NJ"},{name:"New Mexico",abbreviation:"NM"},{name:"New York",abbreviation:"NY"},{name:"North Carolina",abbreviation:"NC"},{name:"North Dakota",abbreviation:"ND"},{name:"Ohio",abbreviation:"OH"},{name:"Oklahoma",abbreviation:"OK"},{name:"Oregon",abbreviation:"OR"},{name:"Pennsylvania",abbreviation:"PA"},{name:"Rhode Island",abbreviation:"RI"},{name:"South Carolina",abbreviation:"SC"},{name:"South Dakota",abbreviation:"SD"},{name:"Tennessee",abbreviation:"TN"},{name:"Texas",abbreviation:"TX"},{name:"Utah",abbreviation:"UT"},{name:"Vermont",abbreviation:"VT"},{name:"Virginia",abbreviation:"VA"},{name:"Washington",abbreviation:"WA"},{name:"West Virginia",abbreviation:"WV"},{name:"Wisconsin",abbreviation:"WI"},{name:"Wyoming",abbreviation:"WY"}]}angular.module("bdApp").controller("addressChoiceCtrl",e),e.$inject=["$scope","$filter","messages","api","user"]}();
!function(){function e(){return{restrict:"AE",templateUrl:"/directives/address-choice/address-choice.template.html",controller:"addressChoiceCtrl as adcvm",scope:{user:"=",addressObject:"=?"}}}angular.module("bdApp").directive("addressChoice",e)}();
!function(){function t(t,e,o,r){var n=this;n.centerPan=!1,n.zoom=!1,n.pan={x:50,y:30},n.isMobile=function(){return t.innerWidth<800},n.toggleZoom=function(){n.zoom=!n.zoom},n.touchEnd=function(){n.dragTracker={x:0,y:0},e.$apply()},n.returnPan=function(){return!n.isMobile()&&(n.pan="50% 30% 0",n.centerPan=!0,images=angular.element(document.querySelectorAll("#zoom-frame img")),void setTimeout(function(){images.css({"transform-origin":n.pan})},200))},n.touchStart=function(t){n.swipeStart={x:t.touches[0].clientX,y:t.touches[0].clientY},n.swipe={}},n.zoomDrag={x:0,y:0},n.dragTracker={x:0,y:0},n.touchMove=function(t){var o=angular.element(document.querySelectorAll("#zoom-frame img"));if(!n.isMobile())return!1;if(!n.zoom)return!1;t.preventDefault();var r=t.touches[0],i=r.target,a={x:r.clientX-n.swipeStart.x,y:r.clientY-n.swipeStart.y},c=a.x-n.dragTracker.x,l=a.y-n.dragTracker.y,c=c/i.clientWidth*100+n.zoomDrag.x,l=l/i.clientHeight*100+n.zoomDrag.y,g={y:{},x:{}};g.y.top=60,g.y.bottom=-90,g.x.left=-120,g.x.right=90,l>g.y.top&&(l=g.y.top),l<g.y.bottom&&(l=g.y.bottom),c<g.x.left&&(c=g.x.left),c>g.x.right&&(c=g.x.right);var m={x:c,y:l};n.zoomDrag=m;var f=-c+"% "+-l+"% 0";o.css({"transform-origin":f}),n.dragTracker=a,e.$apply()},n.dragPan=function(t,e){if(console.log(e.direction),!n.isMobile())return!1;if(!n.zoom)return!1;var o=angular.element(document.querySelectorAll("#zoom-frame img")),r=(window.innerHeight,o[0].height,{width:e.target.clientWidth,height:e.target.clientHeight}),i={x:e.deltaX,y:e.deltaY},a=i.x-n.dragTracker.x,c=i.y-n.dragTracker.y;console.log(a,c);var a=Math.abs(a)/r.width*100;a=i.x<0?-a:a;var c=Math.abs(c)/r.height*100;c=i.y<0?-c:c,a+=n.zoomDrag.x,c+=n.zoomDrag.y;var l={y:{},x:{}};l.y.top=60,l.y.bottom=-90,l.x.left=-150,l.x.right=60,c>l.y.top&&(c=l.y.top),c<l.y.bottom&&(c=l.y.bottom),a<l.x.left&&(a=l.x.left),a>l.x.right&&(a=l.x.right);var g={x:a,y:c};console.log(g),n.zoomDrag=g;var m=-a+"% "+-c+"% 0";o.css({"transform-origin":m}),n.dragTracker=e.isFinal?{x:0,y:0}:i},n.scanImage=function(e,o){setTimeout(function(){n.centerPan=!1},200),frame=angular.element(document.querySelector("#zoom-frame"))[0],fWidth=frame.clientWidth,fHeight=frame.clientHeight,rect=frame.getBoundingClientRect(),rootDoc=frame.ownerDocument.documentElement,offsetT=rect.top+t.pageYOffset-rootDoc.clientTop,offsetL=rect.left+t.pageXOffset-rootDoc.clientLeft,xPosition=(e-offsetL)/fWidth*100,yPosition=(o-offsetT)/fHeight*100,t.innerWidth<n.breakPoint?pan=100-xPosition+"% "+(100-yPosition)+"% 0":pan=xPosition+"% "+yPosition+"% 0",n.pan=pan,images=angular.element(document.querySelectorAll("#zoom-frame img")),images.css({"transform-origin":pan})},n.trackMouse=function(t){n.scanImage(t.pageX,t.pageY)}}angular.module("bdApp").controller("istackCtrl",t),t.$inject=["$window","$scope","$q","jean"]}();
!function(){function t(){return{restrict:"AE",templateUrl:"/directives/image-stack/image-stack.template.html",controller:"istackCtrl as isvm",scope:{jeanData:"="},link:function(t,n,c,o){n.on("touchstart",function(n){t.isvm.touchStart(n)}),n.on("touchmove",function(n){t.isvm.touchMove(n)}),n.on("touchend",function(n){t.isvm.touchEnd(n)})}}}angular.module("bdApp").directive("imageStack",t)}();
!function(){function e(){return{restrict:"EA",replace:!0,template:'<ng-include src="templatePath"/>',scope:{click:"=?",data:"="},link:function(e,t,a){console.log(a);var c=a.template?a.template:"jean-card";e.templatePath="/directives/jean-card/"+c+".template.html"}}}angular.module("bdApp").directive("jeanCard",e)}();
!function(){angular.module("bdApp").directive("jeanList",["jean","api",function(e,t){return{restrict:"EA",templateUrl:"/directives/jean-list/jean-list.template.html",scope:{fields:"=?",jean:"=?"},link:function(i){i.data=t.getData(),i.jean=i.jean||e.get();var a=["fabric_id","fabric_type","top_thread_id","bottom_thread_id","accent_thread_id","gender_option_id","style_option_id"];i.findLabel=function(e){var t={fabric_id:"Fabric",fabric_type:"Fabric Type",accent_thread_id:"Accent Thread",top_thread_id:"Top Thread",bottom_thread_id:"Bottom Thread",gender_option_id:"Gender",style_option_id:"Style"};return t[e]},i.fields=i.fields||a,i.dataLookup=function(e){if(e.indexOf("fabric_type")>-1)for(d=0;d<i.data.fabrics.length;d++)if(i.data.fabrics[d].id==i.jean.fabric_id)return i.data.fabrics[d].fabric_type;if(e.indexOf("id")<0)return i.jean[e];var t={fabric_id:"fabrics",accent_thread_id:"threads",top_thread_id:"threads",bottom_thread_id:"threads",gender_option_id:"gender_options",style_option_id:"style_options"},a={gender_option_id:"gender"},r=a[e]||"name";return i.data.lookup(t[e],"id",i.jean[e],r)},i.filterFields=function(e){matches={};for(var t in e)e.hasOwnProperty(t)&&i.fields.indexOf(t)>=0&&(matches[t]=e[t]);return matches}}}}])}();
!function(){function e(e,t,o,r,l,n){function c(e,t,o){e=e[0],t=t-e.offsetWidth/2+40;var r=e.scrollWidth-e.offsetWidth;t>=r&&(t=r-1),t==r&&(t=r-1);var l=Math.ceil(o/15),n=t-e.scrollLeft,c=n/l,a=e.scrollLeft<t?function(e,t){return e<=t-1}:function(e,t){return e>=t+1},s=setInterval(function(){if(a(e.scrollLeft,t)){var o=e.scrollLeft+c;o>=r&&(o=r-1),e.scrollLeft=o}else clearInterval(s)},15)}var a=this;a.popups=n.get(),a.jeanData=l.get(),a.breakPoint=800,a.touched=!1,a.selectorCoords={top:0,left:0},e.$watch("active",function(l,n){1==l&&o(function(){var o=a.jeanData[e.step.jeanKey],l=e.step.jeanKey+"_"+o;l=l.replace("_option_id","");var n=angular.element(document.querySelector("#"+l));a.selectorCoords.top=n.prop("offsetTop"),a.selectorCoords.left=n.prop("offsetLeft");var c=angular.element(document.querySelector("#"+e.step.jeanKey+"-selector"));if(c.css({top:a.selectorCoords.top+"px",left:a.selectorCoords.left+"px"}),r.innerWidth<a.breakPoint){var s=angular.element(t[0].querySelector(".chooser-grid")),p=s[0]?a.selectorCoords.left-s[0].offsetWidth/2+40:0;s.prop("scrollLeft",p)}else if(a.touched){var s=angular.element(t[0]);s.prop("scrollTop",a.selectorCoords.top-15)}},200)}),a.selectAttr=function(e,t,n,s){attrId=n.replace("_option_id",""),0==a.touched&&(a.touched=!0);var p=angular.element(document.querySelector("#"+attrId+"-chooser")),s=angular.element(document.querySelector("#"+attrId+"-selector")),f=angular.element(e.target).prop("offsetTop"),i=angular.element(e.target).prop("offsetLeft"),u=angular.element(document.querySelectorAll("#item-title"));u.css({right:"-400px",opacity:0}),s.css({top:f+"px",left:i+"px"}),a.selectorCoords={top:f,left:i},r.innerWidth<a.breakPoint&&c(p,i,200),o(function(){u.css({right:"15px",opacity:1}),l.set(n,t)},200)},a.jeanSet=function(e,t){a.jeanData[e]=t}}angular.module("bdApp").controller("chooserCtrl",e),e.$inject=["$scope","$element","$timeout","$window","jean","popups"]}();
!function(){function e(){return{restrict:"EA",templateUrl:"/directives/choosers/chooser.template.html",controller:"chooserCtrl as chvm",scope:{step:"=",dataset:"=",active:"="}}}angular.module("bdApp").directive("chooser",e)}();
!function(){angular.module("bdApp").directive("fabricChooser",["$window",function(e){return{restrict:"EA",template:'<div class="fabric-chooser-container" ng-include="viewUrl"></div>',controller:"chooserCtrl as chvm",scope:{step:"=",dataset:"=",active:"="},link:function(i){function t(){var t=e.innerWidth;t<i.breakPoint?i.viewUrl="/directives/choosers/fabric-chooser.template-mobile.html":t>=i.breakPoint&&(i.viewUrl="/directives/choosers/fabric-chooser.template-desk.html")}i.breakPoint=800,e.onresize=function(){t(),i.$apply()},t(),i.weightFilter=function(e,i){return function(t){return 0!=t.weight&&(!(e&&t.weight<e)&&!(i&&t.weight>i))}}}}}])}();
!function(){function e(){return{restrict:"EA",templateUrl:"/directives/choosers/gender-chooser.template.html",controller:"chooserCtrl as chvm",scope:{step:"=",dataset:"=",active:"="}}}angular.module("bdApp").directive("genderChooser",e)}();
!function(){function e(){return{restrict:"EA",templateUrl:"/directives/choosers/style-chooser.template.html",controller:"chooserCtrl as chvm",scope:{step:"=",dataset:"=",active:"="},link:function(e){e.checkGenderFilter=function(e){return function(t){return g=1==e?"male":"female",t[g]}}}}}angular.module("bdApp").directive("styleChooser",e)}();
!function(){function e(e,r,s,a,o){function t(e){var r=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return r.test(e)}function n(e){return e.length>5&&e.length<51&&e.search(/\d/)>-1&&e.search(/[a-z]/i)}var i=this;i.messages=s.get(),i.credentials={loginEmail:"",loginPassword:""},i.login=function(o,t){s.reset(),i.validateLoginForm()&&(console.log("valid"),r.login(o,t,function(){a.callback&&a.callback(),a.redirect&&"NULL"!==a.redirect&&e.path(a.redirect),a.callback||a.redirect||e.path("/closet")},function(e){"Incorrect username or password."==e.message&&(e.message="Incorrect Email address or password."),s.set(e.message,"error")}))},i.validateLoginForm=function(){return t(i.credentials.loginEmail)?!!i.credentials.loginPassword||(s.set("Please enter a password","error"),!1):(s.set("Please enter a valid Email address","error"),!1)},i.forgotPassword=!1,i.forgotPassword2=!1,"/customer-register/"==e.path()&&(i.forgotPassword=!0,i.customerReset=!0,e.search().email&&(i.credentials.loginEmail=e.search().email)),i.getResetToken=function(){s.reset(),i.validateForgot()&&(console.log("running func from user"),r.getResetToken(i.credentials.loginEmail,function(e){i.forgotPassword2=!0},function(e){e.message="Username/client id combination not found"==e.message?"We don't have an account registered for that email":e.message,s.set(e.message,"error")}))},i.validateForgot=function(){return!!t(i.credentials.loginEmail)||(s.set("Please enter a valid Email address","error"),!1)},i.resetPassword=function(){s.reset(),i.validateForgot2()&&(data={email:i.credentials.loginEmail,token:i.credentials.loginVerifcation,password:i.credentials.newPassword},r.resetPassword(data,function(e){console.log(e),s.set("Password reset successfully. Try logging in.","success"),i.forgotPassword=!1,i.forgotPassword2=!1},function(e){s.set(e.message,"error")}))},i.validateForgot2=function(){return t(i.credentials.loginEmail)?i.credentials.loginVerifcation?(n(i.credentials.newPassword)||s.set("A valid password must: <ul><li>Be between 6 and 50 characters</li><li>Contain at least one number</li><li>Contain at least one letter</li>"),i.credentials.newPassword===i.credentials.newPasswordConfirm||(s.set("Password and Confirmation do not match","error"),!1)):(s.set("Please enter your verifcation code","error"),!1):(s.set("Please enter a valid Email address","error"),!1)},i.loginFB=function(){}}angular.module("bdApp").controller("loginFormCtrl",e),e.$inject=["$location","user","messages","$scope","api"]}();
!function(){function r(){return{restrict:"AE",templateUrl:"/directives/login-form/login-form.template.html",controller:"loginFormCtrl as logvm",scope:{redirect:"=?",callback:"=?",forgot:"=?"}}}angular.module("bdApp").directive("loginForm",r)}();
!function(){function e(e,o,n){var t=this;t.loader=o.get("loader"),t.saver=o.get("saver"),t.drops={},t.drops.acct=!1,t.mobileMenu=!1,t.isLoggedIn=e.isLoggedIn(),t.logout=function(){e.logout(),n.setup(n.createNew())}}angular.module("bdApp").controller("navigationCtrl",e),e.$inject=["user","loader","jean"]}();
!function(){function t(){return{restrict:"EA",templateUrl:"/directives/navigation/navigation.template.html",controller:"navigationCtrl as navvm"}}angular.module("bdApp").directive("navigation",t)}();
!function(){function e(e,r,a,s,t){var i=this;i.messages=t.get(),i.credentials={first_name:"",last_name:"",email:"",password:""},i.validateRegistrationForm=function(){function e(e){return i.credentials.password.length>5&&i.credentials.password.length<51&&i.credentials.password.search(/\d/)>-1&&i.credentials.password.match(/[a-z]/i)}function r(e){var r=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return r.test(e)}return i.credentials.email&&i.credentials.first_name&&i.credentials.last_name&&i.credentials.password&&i.credentials.passwordConfirm?e(i.credentials.password)?i.credentials.password!==i.credentials.passwordConfirm?(t.set("Password and Confirmation do not match","error"),!1):!!r(i.credentials.email)||(t.set("Please Enter a valid E-mail address","error"),!1):(t.set("A valid password must: <ul><li>Be between 6 and 50 characters</li><li>Contain at least one number</li><li>Contain at least one letter</li>"),!1):(t.set("All fields are required","error"),!1)},i.registerUser=function(){t.reset();var s=i.validateRegistrationForm();return console.log(s),!!s&&void a.register(i.credentials.email,i.credentials.password,i.credentials.first_name,i.credentials.last_name,function(){e.callback&&e.callback(i.credentials),e.redirect&&r.path(e.redirect),e.callback||e.redirect||r.path("/closet")},function(e){(e.message="Duplicate email address")&&(e.message="This user is already registered."),t.set(e.message,"error")})}}angular.module("bdApp").controller("registerFormCtrl",e),e.$inject=["$scope","$location","user","$sce","messages"]}();
!function(){function r(){return{restrict:"AE",templateUrl:"/directives/register-form/register-form.template.html",controller:"registerFormCtrl as regvm",scope:{redirect:"=?",callback:"=?"}}}angular.module("bdApp").directive("registerForm",r)}();
!function(){function e(e,n){e.imagesLoaded=!1,n.preloadImages(e.slides).then(function(){e.imagesLoaded=!0},function(){console.log("error loading imgaes...")}),e.currentIndex=0,e.setCurrentSlideIndex=function(n){e.currentIndex=n},e.isCurrentSlideIndex=function(n){return e.currentIndex===n},e.nextSlide=function(){e.currentIndex=e.currentIndex<e.slides.length-1?++e.currentIndex:0},e.prevSlide=function(){e.currentIndex=e.currentIndex>0?--e.currentIndex:e.slides.length-1}}angular.module("bdApp").controller("sliderCtrl",e),e.$inject=["$scope","preloader"]}();
!function(){function e(){return{restrict:"EA",templateUrl:"/directives/slider/slider.template.html",controller:"sliderCtrl as slvm",scope:{slides:"=",imageClick:"&"}}}angular.module("bdApp").directive("slider",e)}();
!function(){function e(e,t,n,r){function a(e,t){var n=i[e](t);return n!==!1?"email"==e?window.open(n,"_self"):window.open(n,"","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600"):console.log("Error builiding social URL"),!1}var o=this;o.jean=e.jean,o.shareImageUploaded=e.shareImageUploaded,o.jeanToUrl=function(){var t="http://share.bluedeltajeans.com/";return t+=n.getDataCode(e.jean)};var i={},s="Custom Jeans by Blue Delta",u="Check out the jeans I made at the Blue Delta Jean Builder";i.facebook=function(e){if(!e)return!1;var t="https://www.facebook.com/sharer/sharer.php?u="+e;return t},i.twitter=function(e){return!!e&&"http://twitter.com/home?status="+s+"-"+e},i.email=function(e){return"mailto:?&subject="+s+"&body="+u+" - "+e},i.pinterest=function(e){return!!e&&"https://www.pinterest.com/pin/find/?description=sharing&url="+e+"&description="+s+"%0A"+u},o.share=function(e){var t=o.jeanToUrl();a(e,t)}}angular.module("bdApp").controller("socialCtrl",e),e.$inject=["$scope","popups","api","jean"]}();
!function(){angular.module("bdApp").directive("socialActions",[function(){return{restrict:"EA",replace:!0,templateUrl:"/directives/social-actions/social-actions.template.html",scope:{jean:"=",display:"=",savefunc:"=",uploaded:"="},controller:"socialCtrl as sovm"}}])}();
!function(){function o(o,n){var l=this;l.user={},n.getOptions().success(function(o){console.log("admin.controller.jsln16:::"),console.log(o)}).error(function(o){console.log(o)})}angular.module("bdApp").controller("adminCtrl",o),o.$inject=["$location","meanData"]}();
!function(){function e(e,a,n,t,o,i,l,r,s,d,p){function c(){var e=navigator.userAgent.toLowerCase(),a=e.indexOf("android")>-1;if(a){if(0==window.orientation||180==window.orientation)return!0;if(90==window.orientation||window.orientation==-90)return!1}else{if(90==window.orientation||window.orientation==-90)return!0;if(0==window.orientation||180==window.orientation)return!1}}var u=this;u.loader=d.get(),s.reset(),u.messages=s.get(),r.closeAll(),u.popups=r.get();var g;o.jeanId&&(g=o.jeanId);var h=!1;o.action&&(h=o.action),i.setup(g,h).then(function(e){u.jeanData=i.get(),l.$watch(function(){return u.jeanData},function(e,a){u.shareImageUploaded=!1,u.displaySocial=!1,u.displaySocialHelper=!1,u.updateActiveItem()},!0),l.$watch(function(){return u.data},function(e,a){u.updateActiveItem()},!0)},function(e){(e.message="Invalid Jean ID")&&r.set("noJean",!0)}),u.landscape=c();var v="onorientationchange"in window,f=v?"orientationchange":"resize";window.addEventListener(f,function(){u.landscape=c(),l.$apply()},!1),u.data=p,u.activeItem={},u.updateActiveItem=function(){if(!u.jeanData)return!1;var e=u.data[u.panel[u.panelStep].dataKey],a=u.jeanData[u.panel[u.panelStep].jeanKey],t=n("filter")(e,{id:a});t&&(t=t[0]),u.activeItem=t||null},u.panel=[],u.panel.push({panelTemplate:"gender-chooser",dataKey:"gender_options",title:"Gender",jeanKey:"gender_option_id"}),u.panel.push({panelTemplate:"style-chooser",dataKey:"style_options",title:"Style",jeanKey:"style_option_id"}),u.panel.push({panelTemplate:"fabric-chooser",dataKey:"fabrics",title:"Fabric",jeanKey:"fabric_id"}),u.panel.push({panelTemplate:"chooser",dataKey:"threads",title:"Top Thread",jeanKey:"top_thread_id"}),u.panel.push({panelTemplate:"chooser",dataKey:"threads",title:"Bottom Thread",jeanKey:"bottom_thread_id"}),u.panel.push({panelTemplate:"chooser",dataKey:"threads",title:"Accent Thread",jeanKey:"accent_thread_id"}),u.panel.push({panelTemplate:"list",title:"Overview"}),u.panelDir="next",u.panelStep=0,u.changeStep=function(e){return!(e>=u.panel.length)&&(!(e<0)&&(void 0!==e&&(u.panelStep=e,void(e+1!=u.panel.length&&u.updateActiveItem()))))},u.savingBar=!1,u.newJeanName="My New Jeans",u.authCallback,u.saveCallback;var m=function(){r.set("saveOpts",!0)},w=function(e){t.path("/order/"+e.id)};u.saveAndOrder=function(){u.saveCallback=w,u.runSave()},u.saveAndShowOpts=function(){u.saveCallback=m,u.runSave()},u.keepEditing=function(){console.log("KEEP ED.."),console.log(u.jeanData.id),console.log(parseInt(o.jeanId)),parseInt(o.jeanId)!==u.jeanData.id?t.path("/customizer/"+u.jeanData.id):r.closeAll()},u.goToCloset=function(){t.path("/closet")},u.startOver=function(){i.reset(),u.jeanData=i.get(),r.closeAll()},u.runSave=function(){r.closeAll(),u.jeanData.name?(u.savingBar=!0,i.save().then(function(e){u.jeanData=e,u.savingBar=!1,u.saveCallback&&u.saveCallback(e)})):r.set("namer",!0)},u.placeOrder=function(){return a.isLoggedIn()?void u.saveAndOrder():(u.authCallback=u.saveAndOrder,r.set("loginOrRegister",!0),!1)},u.socialAuthCheck=function(e){return a.isLoggedIn()?void e():(u.authCallback=e,r.set("loginOrRegister",!0),!1)},u.saveJean=function(){return a.isLoggedIn()?void u.saveAndShowOpts():(u.authCallback=u.saveAndShowOpts,r.set("loginOrRegister",!0),!1)},u.registerCallback=function(e){},u.shareImageUploaded=!1,u.displaySocial=!1,u.displaySocialHelper=!1,u.share=function(a){if(console.log("here it is"),console.log(a),1==u[a])u[dispaly]=!1;else{u[a]=!0;var n=e.getDataCode(u.jeanData),t=angular.copy(u.jeanData);delete t.image,delete t.image_url,i.testJeanForExistingImage(t,n,function(a){a.image_url?u.shareImageUploaded=!0:e.call("uploadJeanThumb",a.image,function(e){console.log("Image has been uploaded: "+e.url),u.shareImageUploaded=!0})})}}}angular.module("bdApp").controller("customizerCtrl",e),e.$inject=["api","user","$filter","$location","$routeParams","jean","$scope","popups","messages","loader","apiData"]}();
!function(){function e(e,r,a,s,n,o,t,i,d,l,u,c){function p(e){var r=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return r.test(e)}function m(e){var r=/^\+?([0-9]{2})\)?[-. ]?([0-9]{4})[-. ]?([0-9]{4})$/;return e.match(r)}function f(e){var r=/^(?=.*[0-9])(?=.*[!@#$%^&*])[a-zA-Z0-9!@#$%^&*]{6,50}$/;return r.test(e)}function g(e){for(var r=0;r<_.jeans.length;r++)if(_.jeans[r].id===e)return r}var _=this;n.closeAll(),_.popups=n.get(),_.messages=t.get(),_.data=c,console.log("LLLL"),console.log(_.data.lookup("order_statuses","id",5,"name")),_.jeans,l.call("getMyJeans",null,function(e){_.jeans=e}),_.orders=[],l.call("getMyOrders",null,function(e){_.orders=e;for(var r=0;r<_.orders.length;r++)_.checkUrl(_.orders[r])}),_.checkUrl=function(e){console.log("CHECKING URL!!!");var r=e.order_items[0].jean_image_url;if(r.indexOf("default.jpg")<0)return e.order_items[0].jean_image_url;var a=l.getDataCode(e.order_items[0]);s.testJeanForExistingImage(e.order_items[0],a,function(r){console.log("TEST FOR EXSIST RESULT"),console.log(r),console.log(e),r.image&&r.image.data?l.call("uploadJeanThumb",e.order_items[0].image,function(r){e.order_items[0].jean_image_url=r.url+"?tested=true",l.call("updateMyOrder",e)}):(e.order_items[0].jean_image_url=r.jean_image_url+"?tested=true",l.call("updateMyOrder",e))})},_.onload=function(){o.vm=_},_.userForm={},_.userForm.editing={},_.userForm.saving={},_.userForm.data={},_.userForm.feedback={type:"",message:""},_.changeOrderItemName=function(){var e=_.displayOrder.order_items[0].id,r=_.displayJean.jean_name;l.call("postOrderItem",{id:e,jean_name:r})},_.userForm.cancel=function(e){_.userForm.editing[e]=!1,_.user[e]=_.userForm.data[e]},_.userForm.editField=function(e){_.userForm.data[e]=angular.copy(_.user[e]),_.userForm.editing[e]=!0},_.formatDate=function(r,a){var a=a||"MM/dd/yyyy",r=new Date(r);return e("date")(r,a)},_.userForm.validate=function(e,r){return"email"==e?!!p(r)||(t.set("Please enter a valid email address","error"),!1):"phoneNumber"!=e||(!!m(r)||(t.set("Please enter a valid phone number","error"),!1))},_.userForm.save=function(e){_.userForm.validate(e,_.user[e])&&d.update(_.user,function(r){_.userForm.saving[e]=!1,_.userForm.editing[e]=!1})},_.user=d.get(),_.passForm={editing:!1,currentPass:"",newPass:"",newPassConfirm:"",clear:function(){_.passForm.editing=!1,_.passForm.currentPass="",_.passForm.newPass="",_.passForm.newPassConfirm="",t.reset()}},_.validatePasswordForm=function(){return f(_.passForm.newPass)||t.set('A valid password must: <ul><li>Be between 6 and 50 characters</li><li>Contain at least one number</li><li>Contain at least one uppercase letter</li><li>Contain at least one lowercase letter</li><li>Contain at least one special character ("!,@,#,$,%,^,&, or *")</li>'),_.passForm.newPass===_.passForm.newPassConfirm||(t.set("New Password and Confirmation do not match","error"),!1)},_.changePassword=function(){if(t.reset(),_.validatePasswordForm()){var e={id:_.user.id,password:_.passForm.newPass,old_password:_.passForm.currentPass};d.update(e,function(e){_.passForm.clear(),t.set("Password successfully changed.","success")},function(e){t.set(e.message,"error")})}},_.reOrder=function(e){var a={price:e.price,shipping_phone:e.shipping_phone,shipping_name:e.shipping_name,shipping_address_id:e.shipping_address_id,user_id:e.user_id,vendor_id:e.vendor_id,rep_id:e.rep_id};a.payment_status_id=1,a.order_status_id=5,a.order_type_id=5,a.reorder_item_id=e.order_items[0].id,l.call("placeMyOrder",a,function(e){r.path("/pay/"+e.id)})},_.copyJean=function(e){dataCode=l.getDataCode(e),s.setup(dataCode,!0),r.path("/customizer")},_.displayJean={},_.selectJean=function(e){_.popups.jeanProfile=!0,_.displayJean=e},_.selectOrder=function(e){_.popups.orderProfile=!0,_.displayOrder=e,_.displayJean=e.order_items[0]},_.deleteJean=function(e){l.call("deleteMyJean",e,function(r){var a=g(e);_.jeans.splice(a,1)})},_.orderJean=function(e){r.path("/order/"+e)},_.payInvoice=function(e){r.path("/pay/"+e)}}angular.module("bdApp").controller("closetCtrl",e),e.$inject=["$filter","$location","$window","jean","popups","$scope","messages","loader","user","api","$routeParams","apiData"]}();
!function(){function e(e,r,d,a,i,t,o){var n=this;n.messages=e.get(),n.userLoggedIn=a.isLoggedIn(),n.user={loaded:!1},n.user=a.get(),n.user.loaded=!n.userLoggedIn,n.checkoutForm={},n.data=t,n.add={},n.formStep=1,n.fitMatch=d.orderDetails.split("-"),n.cards=null,n.cardForm={addingCard:!1,loadingCards:!0},n.authCallback=function(){n.user=a.get(),n.userLoggedIn=a.isLoggedIn()},n.logout=function(){a.logout(function(){n.user={},n.user.loaded=!0,n.userLoggedIn=a.isLoggedIn(),n.add={}},!1)},n.fire=function(){},r.$watch(function(){return n.user},function(e,r){if(!n.user.id)return!1;if(n.user.loaded=!0,n.user.addresses.length)for(var d=0;d<n.user.addresses.length;d++)if(n.user.addresses[d].primary){n.add=n.user.addresses[d];break}e.square_id?(n.cardForm.loadingCards=!0,i.call("getMyCreditCards",null,function(e){e.length<1?n.cardForm.addingCard=!0:n.cards=e,n.cardForm.loadingCards=!1})):e.id&&!e.square_id?(console.log("USER doesn't sqid"),n.cardForm.addingCard=!0,n.cardForm.loadingCards=!1):(console.log("no user"),n.cardForm.loadingCards=!1)},!0),n.inputConfigOverrides={cardNumber:{placeholder:""},cvv:{placeholder:""},expirationDate:{placeholder:""}},n.inputStyles=[{backgroundColor:"#e8edef",padding:"10px",fontSize:"20px",lineHeight:"20px"}],n.nonceReceived=function(e,r){i.call("createMyCreditCard",{nonce:e},function(e){n.orderFitMatch(e.card_id)})},n.orderFitMatch=function(e){if(!n.validateFitMatch())return!1;var r={credit_card_id:e,shipping_address_id:n.add.id,requested_fabric_ids:JSON.stringify(n.fitMatch)};i.call("createMyFitMatch",r,function(){o.path("/thank-you/fitmatch")})},n.fit_match_error=!1,n.validateFitMatch=function(){return n.fit_match_error=!1,!!n.add.id||(n.fit_match_error="Please provide a shipping address",!1)},n.addCard=function(){n.validateFitMatch()&&n.fire()}}angular.module("bdApp").controller("fmCtrl",e),e.$inject=["messages","$scope","$routeParams","user","api","apiData","$location"]}();
!function(){function e(e,r,t,a,o,d,n,s,p,l,_){function u(e){if(!e||!e.length)return!1;for(var r=0;r<e.length;r++)if(1==e[r].primary)return e[r].id;return e[0].id}var h=this;if(h.popups=a.get(),h.tailors=l.tailors,h.ordersLoaded=!1,h.orderForm={},h.orderCreateObj={},h.editData={},h.lookup=l.lookup,h.user={},h.user=n.get(),p.$watch("vm.user",function(e){h.orderCreateObj.shipping_name=e.first_name+" "+e.last_name,h.orderCreateObj.shipping_phone=e.phone,h.orderCreateObj.shipping_address_id=u(e.addresses)},!0),h.orders=[],s.call("getMyOrders",null,function(e){h.orders=e,h.ordersLoaded=!0}),d.dataId&&"re-order"==d.action)h.orderCreateObj.order_type_id=5,h.orderCreateObj.comment="Re-Order of Order #"+d.dataId,p.$watch("vm.orders",function(e){if(!e.length)return!1;for(var r=!1,t=0;t<e.length;t++)if(e[t].id==d.dataId){var a=e[t];h.jeanData=a.order_items[0],h.copyItem=a.order_items[0],h.jeanData.image_url=h.jeanData.jean_image_url,h.jeanData.name=h.jeanData.jean_name,h.orderCreateObj.reorder_item_id=a.order_items[0].id,r=!0;break}r||(h.orderErr="Order Not Found!")},!0);else if(d.dataId&&!d.action){var c=d.dataId;t.setup(c).then(function(){h.jeanData=t.get(),console.log("aftersetup"),console.log(h.jeanData),h.orderCreateObj.jean_id=h.jeanData.id,console.log(h.orderCreateObj)})}h.goToCloset=function(){r.path("/closet")},h.startOver=function(){t.reset(),r.path("/customizer")},h.placeOrder=function(){return h.orderFormErr=!1,h.orderCreateObj.shipping_name||(h.orderFormErr="Please enter a shipping name."),h.orderCreateObj.shipping_phone||(h.orderFormErr="Please enter a shipping phone number."),h.orderCreateObj.order_type_id||(h.orderFormErr="Please choose a fitting option."),h.orderCreateObj.shipping_address_id||(h.orderFormErr="Please choose a shipping address."),!h.orderFormErr&&void s.call("placeMyOrder",h.orderCreateObj,function(e){h.popups.orderPlaced=!0})},h.chooseOrderType=function(e,r){if(h.orderCreateObj.order_type_id=e,r){var t=r.order_items[0];h.orderCreateObj.fitDate=r.fit_date}4==e?(h.orderCreateObj.copy_order_item_id=t.id,h.copyItem=t):(delete h.orderCreateObj.copy_order_item_id,h.copyItem={}),1===e&&2===e||delete h.orderCreateObj.tailor_id},h.measurementKeys=["waist","seat_down","seat_right","rise","full_rise","thigh_upper_down","thigh_upper_right","thigh_middle_down","thigh_middle_right","thigh_lower_down","thigh_lower_right","outseam","knee_up","knee_right","calf_up","calf_right","leg_opening"],h.hasMeasurements=function(e){if(!e||!e.order_items.length)return!1;var r=e.order_items[0],t=["waist"],a=!0;for(i=0;i<t.length;i++)if(""==r[t[i]]||null==r[t[i]]){a=!1;break}return a},h.editField=function(e){var r=h.orderCreateObj[e]||" ";h.editData[e]=angular.copy(r)},h.revertField=function(e){h.orderCreateObj[e]=angular.copy(h.editData[e]),h.editData[e]=!1}}angular.module("bdApp").controller("orderCtrl",e),e.$inject=["$window","$location","jean","popups","$filter","$routeParams","user","api","$scope","apiData","$http"]}();
!function(){function o(o,e,t){var n=this;e.type||t.path("/login"),n.type=e.type,n.userLoggedIn=o.isLoggedIn(),n.user=o.get(),n.logout=function(){o.logout(function(){n.orderErr=!1,n.user={},n.user.loaded=!0,n.userLoggedIn=o.isLoggedIn(),t.path("/login")},!1)}}angular.module("bdApp").controller("tyCtrl",o),o.$inject=["user","$routeParams","$location"]}();
!function(){function r(r,e,d,o,a,n,t){var s=this;s.messages=r.get(),s.userLoggedIn=o.isLoggedIn(),s.user=o.get(),s.user.loaded=!s.userLoggedIn,s.orderErr=!1,s.checkoutForm={},s.data=n,s.user=o.get(),s.add={},s.formStep=1,s.paidDate=!1,s.cards=null,s.cardForm={addingCard:!1,loadingCards:!0},s.authCallback=function(){console.log("AUTH"),s.orderLoaded=!1,s.user=o.get(),s.userLoggedIn=o.isLoggedIn(),s.initPage()},s.logout=function(){o.logout(function(){s.orderErr=!1,s.user={},s.user.loaded=!0,s.userLoggedIn=o.isLoggedIn()},!1)},s.fire=function(){},e.$watch(function(){return s.user},function(r,e){if(!s.user.id)return!1;if(s.user.loaded)return!1;if(s.user.loaded=!0,s.user.addresses.length)for(i=0;i<s.user.addresses.length;i++)if(s.user.addresses[i].primary){s.add=s.user.addresses[i];break}r.square_id?(s.cardForm.loadingCards=!0,a.call("getMyCreditCards",null,function(r){r.length<1?s.cardForm.addingCard=!0:s.cards=r,s.cardForm.loadingCards=!1})):r.id&&!r.square_id&&(s.cardForm.addingCard=!0,s.cardForm.loadingCards=!1)},!0),s.inputConfigOverrides={cardNumber:{placeholder:""},cvv:{placeholder:""},expirationDate:{placeholder:""}},s.inputStyles=[{backgroundColor:"#e8edef",padding:"10px",fontSize:"20px",lineHeight:"20px"}],s.nonceReceived=function(r,e){a.call("createMyCreditCard",{nonce:r},function(r){s.payInvoice(r.card_id)})},s.payInvoice=function(r){var e={orderId:s.order.id,customer_card_id:r,amount_money:s.checkoutForm.price,customer_id:s.user.square_id};console.log(e),a.call("ordersCharge",e,function(){t.path("/thank-you/order")})},s.initPage=function(){s.orderId=d.orderDetails,a.call("getMyOrders",d.orderDetails,function(r){if(r.price){if(s.order=r,3==r.payment_status_id)s.orderErr="This order has been comped",s.orderLoaded=!0;else if(1!==r.payment_status_id&&r.transactions)for(var e=0;e<r.transactions.length;e++)if("ok"===r.transactions[e].status){s.paidDate=new Date(r.transactions[e].created_at);break}s.checkoutForm.price=r.price,s.orderLoaded=!0}else s.orderErr="Sorry, but this order is not ready for payment",s.orderLoaded=!0},function(r){s.orderLoaded=!0,404==r.status&&(s.orderErr="Sorry, but you don't have an Order #"+d.orderDetails)})},s.userLoggedIn?s.initPage():s.orderLoaded=!0}angular.module("bdApp").controller("payCtrl",r),r.$inject=["messages","$scope","$routeParams","user","api","apiData","$location"]}();
!function(){function e(e,o,n){var t=this;t.user=o.get(),console.log(e.localStorage.getItem("bdAccessToken"))}angular.module("bdApp").controller("homeCtrl",e),e.$inject=["$window","user","api"]}();
!function(){function e(e){var n=this;e.reset(),n.messages=e.get()}angular.module("bdApp").controller("loginCtrl",e),e.$inject=["messages"]}();
!function(){function e(e){var t=this;e.reset(),t.messages=e.get(),t.formStep=1}angular.module("bdApp").controller("registerCtrl",e),e.$inject=["messages"]}();
//# sourceMappingURL=app.min.js.map
