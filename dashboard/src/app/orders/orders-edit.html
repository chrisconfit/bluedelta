<div>
<toaster-container></toaster-container>

	<div class="row wrapper border-bottom white-bg page-heading">
		<h1 ng-if="ovm.order.orderId">Order {{ovm.order.orderId}}</h1>
		<h1 ng-if="!ovm.order.orderId">Create New Order</h1>
	</div>              
	
	<div class="wrapper wrapper-content">
	
    <div class="row">
	    
      <div class="col-md-3">
        <!-- Profile Image -->
        <div class="ibox ibox-primary">
					<div class="ibox-title" ng-if="ovm.order.orderItems[0].jean.name">
						<h3>Jean Name: {{ovm.order.orderItems[0].jean.name}}</h3>
					</div>
					
          <div class="ibox-content ibox-profile">              
	          <a ng-if="!ovm.orderUser.identityId" href="" ng-click="ovm.editUser()" class="btn btn-flat btn-primary btn-block">Add a Client</a>
						<img ng-if="ovm.order.orderItems[0].jean.imageURL" width="100%" ng-src="{{ovm.order.orderItems[0].jean.imageURL}}">
	          <ul ng-if="ovm.orderUser.identityId" class="list-group list-group-unbordered">
              <li class="list-group-item clearfix">
                <b>Customer</b> <a href="#" ng-click="ovm.editUser()" class="pull-right">{{ovm.orderUser.name}}</a>
              </li>
              <li class="list-group-item clearfix">
                <b>Email</b> <a href="#" class="pull-right">{{ovm.orderUser.email}}</a>
              </li>
              <li class="list-group-item clearfix">
                <p><b>Shipping Address</b><a class="pull-right fa fa-edit" ng-click="ovm.editAddress('Shipping', 'fa-truck')" href="#"></a></p>
                <p>{{ovm.order.shippingAddress.addressLine1}}<br>
                  {{ovm.order.shippingAddress.addressLine2}}<br ng-if="ovm.order.shippingAddress.addressLine2 && ovm.order.shippingAddress.addressLine2!=''">
                  {{ovm.order.shippingAddress.city}}, {{ovm.order.shippingAddress.state}} {{ovm.order.shippingAddress.zip}}</p>
              </li>
              <li class="list-group-item clearfix">
                <p><b>Billing Address</b><a class="pull-right fa fa-edit" ng-click="ovm.editAddress('Billing', 'fa-list')" href="#"></a></p>
                <p ng-if="ovm.billingSameAsShipping()">Same as Shipping Address</p>
                <p ng-if="!ovm.billingSameAsShipping()">{{ovm.order.billingAddress.addressLine1}}<br>
                  {{ovm.order.billingAddress.addressLine2}}<br ng-if="ovm.order.billingAddress.addressLine2.length">
                  {{ovm.order.billingAddress.city}}, {{ovm.order.billingAddress.state}} {{ovm.order.billingAddress.zip}}</p>
              </li>
            </ul>
            
            <!--
            <a href="#" class="btn btn-flat btn-danger btn-block"><b>Awaiting Payment</b></a>
            <a href="#" class="btn btn-flat btn-primary btn-block"><b>Re-Send Invoice</b></a>
            -->
            
          </div>
          <!-- /.ibox-content -->
        </div>
        <!-- /.ibox -->
      </div><!-- /.col -->
      
      <div class="col-md-9">
        <div class="row">
					<div class="col-md-6">
						<div class="ibox ibox-default clearfix">
							<div class="ibox-title">
								<h3>
									Jean Build 
									<a ng-if="!ovm.jeanEditMode" class="pull-right fa fa-edit" ng-click="ovm.beginJeanEdit()" href="#"></a>
									<a ng-if="ovm.jeanEditMode" class="pull-right fa fa-save" ng-click="ovm.saveOrder(); ovm.jeanEditMode=false" href="#"></a>
									<a ng-if="ovm.jeanEditMode" class="pull-right fa fa-undo" ng-click="ovm.clearJeanEdit()" href="#"></a>
								</h3> 
							</div>
							<div class="ibox-content">
                <ul class="list-group jean-list-edit list-group-unbordered">
		              <li class="list-group-item clearfix">
	                  <b>Gender</b>
	                  <span ng-if="!ovm.jeanEditMode" class="pull-right">{{ovm.lookup("genderId", ovm.order.orderItems[0].jean.gender, ovm.genders).label}}</span>
	                  <select class="form-control pull-right" 
											ng-if="ovm.jeanEditMode" 
											ng-model="ovm.order.orderItems[0].jean.gender" 
											ng-options="gender.genderId as gender.label for gender in ovm.genders">
										</select>
	                </li>
	                <li class="list-group-item clearfix">
	                  <b>Style</b> 
	                  <span ng-if="!ovm.jeanEditMode" class="pull-right">{{ovm.lookup("styleId", ovm.order.orderItems[0].jean.style, ovm.style).label}}</span>
	                  <select class="form-control  pull-right" 
											ng-if="ovm.jeanEditMode" 
											ng-model="ovm.order.orderItems[0].jean.style"
											ng-options="style.styleId as style.label for style in ovm.style">
										</select>
	                </li>
	                <li class="list-group-item clearfix">
	                  <b>Fabric</b> 
	                  <span ng-if="!ovm.jeanEditMode" class="pull-right">{{ovm.order.orderItems[0].jean.fabric.name}}</span>
										<select class="form-control  pull-right" 
											ng-if="ovm.jeanEditMode" 
											ng-options="fabric.fabricId+' - '+fabric.name for fabric in ovm.data.fabric track by fabric.fabricId" 	
											ng-model="ovm.order.orderItems[0].jean.fabric">
										</select>
	                </li>
	                <li class="list-group-item clearfix">
	                  <b>Accent Thread</b> 
	                  <span ng-if="!ovm.jeanEditMode" class="pull-right">{{ovm.order.orderItems[0].jean.accent_thread.name}}</span>
										<select class="form-control  pull-right" 
											ng-if="ovm.jeanEditMode" 
											ng-options="thread.name for thread in ovm.data.thread track by thread.threadId" 	
											ng-model="ovm.order.orderItems[0].jean.accent_thread">
										</select>
	                </li>
	                <li class="list-group-item clearfix">
	                  <b>Top Thread</b> 
	                  <span ng-if="!ovm.jeanEditMode" class="pull-right">{{ovm.order.orderItems[0].jean.top_thread.name}}</span>
	                  <select class="form-control  pull-right" 
											ng-if="ovm.jeanEditMode" 
											ng-options="thread.name for thread in ovm.data.thread track by thread.threadId" 	
											ng-model="ovm.order.orderItems[0].jean.top_thread">
										</select>
	                </li>
	                <li class="list-group-item clearfix">
	                  <b>Bottom Thread</b> 
	                  <span ng-if="!ovm.jeanEditMode" class="pull-right">{{ovm.order.orderItems[0].jean.bottom_thread.name}}</span>
	                  <select class="form-control  pull-right" 
											ng-if="ovm.jeanEditMode" 
											ng-options="thread.name for thread in ovm.data.thread track by thread.threadId" 	
											ng-model="ovm.order.orderItems[0].jean.bottom_thread">
										</select>
									</li>
									<li ng-if="ovm.order.orderItems[0].jean.rivets" class="list-group-item">
	                  <b>Rivets</b>
	                  <a ng-if="!ovm.jeanEditMode" href="#" class="pull-right">No</a>
	                  <select ng-if="ovm.jeanEditMode" class="form-control  pull-right" 
											ng-model="ovm.order.orderItems[0].jean.fake_pocket">
											<option ng-value="0">No</option>
											<option ng-value="1">Yes</option>
										</select>
	                </li>
	                <li class="list-group-item" ng-if="ovm.order.orderItems[0].jean.fake_pocket">
	                  <b>Fake Pocket</b> 
	                  <a ng-if="!ovm.jeanEditMode" href="#" class="form-control  pull-right">No</a>
	                  <select ng-if="ovm.jeanEditMode" class="pull-right" 
											ng-model="ovm.order.orderItems[0].jean.fake_pocket">
											<option ng-value="0">No</option>
											<option ng-value="1">Yes</option>
										</select>
	                </li>
	                <li class="list-group-item clearfix">
	                  <p><b>Order Notes</b></p>
	                  <p ng-if="!ovm.jeanEditMode">{{ovm.order.orderItems[0].notes}}</p>
	                  <textarea class="form-control" ng-if="ovm.jeanEditMode" ng-model="ovm.order.orderItems[0].notes"></textarea>
	                </li>
	              </ul>
							</div>
						</div>
					</div>
					<div class="col-md-6">
						<div class="ibox ibox-default">
							<div class="ibox-title with-border">
								<h3>Order Info</h3>
							</div>
							<div class="ibox-content clearfix">
								<div class="form-group">
									<label class="control-label" for="customer">Jean Price</label>
                  <div class="input-group">
		                <span class="input-group-addon">$</span>
		                <input type="text" class="form-control" ng-model="ovm.order.price" ng-blur="ovm.convertToCurrency()" placeholder="350.00">
		              </div>
								</div>
                <div class="form-group">
	                <label>Vendor</label>
	                <select ng-model="ovm.order.vendor" class="form-control select2" style="width: 100%;"
		                ng-options="vendor.name as vendor.name for vendor in ovm.data.vendor">
	                </select>
	              </div>
              
                <div class="form-group">
	                <label>Rep</label>
	                <select class="form-control select2" ng-model="ovm.order.rep" style="width: 100%;" 
		              ng-options="rep.name as rep.name for rep in ovm.data.rep">
	                </select>
	              </div>
	              
	              <div class="form-group">
	                <label>Order Type</label>
	                <select class="form-control select2" ng-model="ovm.order.orderType" style="width: 100%;"
									ng-options="type.typeId as type.label for type in ovm.orderType">
                	</select>
	              </div>
              
                <div class="form-group">
	                <label>Status</label>
	                <select class="form-control select2" 
	                ng-options="status.label as status.label for status in ovm.status"  
		              ng-model="ovm.order.status" style="width: 100%;">
	                </select>
	              </div>
	              <div class="row">
	              	<div class="col-sm-6">
		              	<div class="form-group">
			                <label>Fitting Date:</label>
			
			                <div class="input-group date">
				                <span class="input-group-addon"><i class="fa fa-calendar"></i></span>
												<input type="datetime" class="form-control" ng-model="ovm.order.fitDate" date-time view="date" auto-close="true" min-view="date" format="YYYY-MM-DD">
											</div>
			                <!-- /.input group -->
			              </div>
	              	</div>
	              	<div class="col-sm-6">
		              	<div class="form-group">
			                <label>Due Date:</label>
			                <div class="input-group date">
				                <span class="input-group-addon"><i class="fa fa-calendar"></i></span>
												<input type="datetime" class="form-control" ng-model="ovm.order.dueDate" date-time view="date" auto-close="true" min-view="date" format="YYYY-MM-DD">
											</div>
			                <!-- /.input group -->
			              </div>
	              	</div>
	              </div>
	              
	              
	              <div class="form-group">
	                <label>Jean DOB:</label>
										{{ovm.order.dob}}
	                <div class="input-group date">
		                <span class="input-group-addon"><i class="fa fa-calendar"></i></span>
										<input type="datetime" class="form-control" date-time ng-model="ovm.order.dob" view="date" auto-close="true" min-view="date" format="YYYY-MM-DD">
									</div>
	                <!-- /.input group -->
	              </div>
		            <a href="#" ng-click="ovm.saveOrder()" class="btn btn-success pull-right btn-flat btn-lg"><b>Save Order</b></a>
							</div>
						</div>
					</div>
        </div>
      </div><!-- /.col -->

    	<div class="col-md-9 pull-right">
        <div class="tabs-container">

          <uib-tabset active="'timeline'">
            <uib-tab index="timeline" active="true" ng-if="ovm.order.orderItems[0].jean.jeanId" heading="Timeline">
              <div class="panel-body">
                
                <h3>Timeline</h3>
								
								<!--Timeline Form-->
								<div class="form-group">
								  <label class="control-label" for="order_id">Enter Note</label>
								  <div class="input-group">
								    <input type="text" class="form-control" ng-model="ovm.timelineForm.message" placeholder="Add Order Note">
								    <span class="input-group-btn">
								      <button type="button" ng-click="ovm.addTimelineItem()" class="btn btn-primary btn-flat">Add</button>
								    </span>
								  </div>
								</div>
														
								<!--Timeline Display-->
								<div id="vertical-timeline" class="vertical-container dark-timeline">
									<div ng-repeat="t in ovm.order.timeline | orderBy: '-timestamp'"class="vertical-timeline-block">
										<div class="vertical-timeline-icon navy-bg">
											<i class="fa fa-circle bg-gray"></i>
										</div>
										<div class="vertical-timeline-content">
											<h3 class="timeline-header no-border">{{t.message}}</h3>
											<span class="vertical-date"><span class="time"><i class="fa fa-clock-o"></i> </span> {{ovm.timeFromNow(t.timestamp)}} <br/>
												<small>{{t.timestamp | date : 'd MMM. yyyy'}}</small>
												<small ng-if="t.user">&nbsp;&nbsp;<i class="fa fa-user"></i> {{t.user}}</small>
											</span>
										</div>
									</div>
								</div>
		              
              </div>
            </uib-tab>
            
            <uib-tab index="measurements" heading="Measurements">
              <div class="panel-body">
                     
                <div class="row">
									<div class="col-sm-2">
										<div class="form-group">
									    <label class="control-label" for="customer">Waist</label>
									    <input type="text" ng-model="ovm.order.orderItems[0].jean.measurement.waist" name="waist" id="waist" class="form-control">
										</div>
									</div>
									<div class="col-sm-2">
										<div class="form-group">
											<label class="control-label" for="customer">Seat-Down</label>
											<input type="text" ng-model="ovm.order.orderItems[0].jean.measurement.seatDown" name="seatDown" id="seatDown" class="form-control">
										</div>
									</div>
									<div class="col-sm-2">
										<div class="form-group">
											<label class="control-label" for="customer">Seat-Right</label>
											<input type="text" ng-model="ovm.order.orderItems[0].jean.measurement.seatRight" name="seatRight" id="seatRight"  class="form-control">
										</div>
									</div>
									<div class="col-sm-2">
										<div class="form-group">
											<label class="control-label" for="customer">Rise</label>
											<input type="text" ng-model="ovm.order.orderItems[0].jean.measurement.rise" name="rise" id="rise"  class="form-control">
										</div>
									</div>
									<div class="col-sm-2">
										<div class="form-group">
											<label class="control-label" for="customer">Full Rise</label>
											<input type="text" ng-model="ovm.order.orderItems[0].jean.measurement.fullRise" name="fullRise" id="fullRise"  class="form-control">
										</div>
									</div>
								</div>
								
								<div class="row">
									<div class="col-sm-2">
										<div class="form-group">
											<label class="control-label" for="customer">Thigh-Upper-Down</label>
											<input type="text" ng-model="ovm.order.orderItems[0].jean.measurement.thighUpperDown" name="thighUpperDown" id="thighUpperDown"  class="form-control">
										</div>
									</div>
									<div class="col-sm-2">
										<div class="form-group">
											<label class="control-label" for="customer">Thigh-Upper-Right</label>
											<input type="text" ng-model="ovm.order.orderItems[0].jean.measurement.thighUpperRight" name="thighUpperRight" id="thighUpperRight"  class="form-control">
										</div>
									</div>
									<div class="col-sm-2">
										<div class="form-group">
											<label class="control-label" for="customer">Thigh-Middle-Down</label>
											<input type="text" ng-model="ovm.order.orderItems[0].jean.measurement.thighMiddleDown" name="thighMiddleDown" id="thighMiddleDown"  class="form-control">
										</div>
									</div>
									<div class="col-sm-2">
										<div class="form-group">
											<label class="control-label" for="customer">Thigh-Middle-Right</label>
											<input type="text" ng-model="ovm.order.orderItems[0].jean.measurement.thighMiddleRight" name="thighMiddleRight" id="thighMiddleRight"  class="form-control">
										</div>
									</div>
									<div class="col-sm-2">
										<div class="form-group">
											<label class="control-label" for="customer">Thigh-Lower-Down</label>
											<input type="text" ng-model="ovm.order.orderItems[0].jean.measurement.thighLowerDown" name="thighLowerDown" id="thighLowerDown"  class="form-control">
										</div>
									</div>
									<div class="col-sm-2">
										<div class="form-group">
											<label class="control-label" for="customer">Thigh-Lower-Right</label>
											<input type="text" ng-model="ovm.order.orderItems[0].jean.measurement.thighLowerRight" name="thighLowerRight" id="thighLowerRight"  class="form-control">
										</div>
									</div>
								</div>
								
								<div class="row">
									<div class="col-sm-2">
										<div class="form-group">
											<label class="control-label" for="customer">Outseam</label>
											<input type="text" ng-model="ovm.order.orderItems[0].jean.measurement.outseam" name="outseam" id="outseam"  class="form-control">
										</div>
									</div>
									<div class="col-sm-2">
										<div class="form-group">
											<label class="control-label" for="customer">Knee-Up</label>
											<input type="text" ng-model="ovm.order.orderItems[0].jean.measurement.kneeUp" name="kneeUp" id="kneeUp"  class="form-control">
										</div>
									</div>
									<div class="col-sm-2">
										<div class="form-group">
											<label class="control-label" for="customer">Knee-Right</label>
											<input type="text" ng-model="ovm.order.orderItems[0].jean.measurement.kneeRight" name="kneeRight" id="kneeRight"  class="form-control">
										</div>
									</div>
									<div class="col-sm-2">
										<div class="form-group">
											<label class="control-label" for="customer">Calf-Up</label>
											<input type="text" ng-model="ovm.order.orderItems[0].jean.measurement.calfUp" name="calfUp" id="calfUp"  class="form-control">
										</div>
									</div>
									<div class="col-sm-2">
										<div class="form-group">
											<label class="control-label" for="customer">Calf-Right</label>
											<input type="text" ng-model="ovm.order.orderItems[0].jean.measurement.calfRight" name="calfRight" id="calfRight"  class="form-control">
										</div>
									</div>
									<div class="col-sm-2">
										<div class="form-group">
											<label class="control-label" for="customer">Leg-Opening</label>
											<input type="text" ng-model="ovm.order.orderItems[0].jean.measurement.legOpening" name="legOpening" id="legOpening"  class="form-control">
										</div>
									</div>
								</div>
								
								
								
								<hr>
								
								<div class="row">
									<div class="col-sm-2">
										<div class="form-group">
											<label class="control-label" for="customer">Height</label>
											<input type="text" ng-model="ovm.order.orderItems[0].jean.measurement.height" name="height" id="height"  class="form-control">
										</div>
									</div>
									<div class="col-sm-2">
										<div class="form-group">
											<label class="control-label" for="customer">Weight</label>
											<input type="text" ng-model="ovm.order.orderItems[0].jean.measurement.weight" name="weight" id="weight"  class="form-control">
										</div>
									</div>									
								</div>

              </div>
                     
						</uib-tab>
          </uib-tabset>

        </div>
			</div><!-- /.col -->
    	
    </div><!-- /.row -->

	</div>
	<br><br><br>
	
</div>